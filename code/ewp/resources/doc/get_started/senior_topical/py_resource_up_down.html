<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>命令行方式上传下载离线资源 | EMP用户手册</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.3.4">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../senior_topical/offline_resource.html" />
    
    
    <link rel="prev" href="../senior_topical/client_package_verify.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="14.8" data-basepath=".." data-revision="1463048404363">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="overview/Introduction.html">
            
                
                    <a href="../overview/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         什么是EMP
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="overview/TermIntroduction.html">
            
                
                    <a href="../overview/TermIntroduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         名词解释
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="overview/EMPIntroduce.html">
            
                
                    <a href="../overview/EMPIntroduce.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         EMP 概述
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="overview/Components.html">
            
                
                    <a href="../overview/Components.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         EMP 组件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="overview/Client.html">
            
                
                    <a href="../overview/Client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         EMP 客户端
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5" data-path="overview/EWP.html">
            
                
                    <a href="../overview/EWP.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                         EMP EWP服务
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.6" data-path="overview/Console.html">
            
                
                    <a href="../overview/Console.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                         EMP 管理平台
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7" data-path="overview/IDE.html">
            
                
                    <a href="../overview/IDE.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                         EMP IDE
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.8" data-path="overview/EMPRun.html">
            
                
                    <a href="../overview/EMPRun.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                         EMP 如何运转
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="prerequisites/Introduction.html">
            
                
                    <a href="../prerequisites/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         储备知识
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="prerequisites/Erlang.html">
            
                
                    <a href="../prerequisites/Erlang.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Erlang
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="prerequisites/Lua.html">
            
                
                    <a href="../prerequisites/Lua.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Lua
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="prerequisites/XHTML.html">
            
                
                    <a href="../prerequisites/XHTML.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         XHTML
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="prerequisites/CSS.html">
            
                
                    <a href="../prerequisites/CSS.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         CSS
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="prerequisites/ClearSilver.html">
            
                
                    <a href="../prerequisites/ClearSilver.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         CLEARSILVER
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="setup_develop_env/Introduction.html">
            
                
                    <a href="../setup_develop_env/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         开发环境安装
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="setup_develop_env/server/Introduction.html">
            
                
                    <a href="../setup_develop_env/server/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         EMP Server 开发环境
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1.1" data-path="setup_develop_env/server/Windows/Introduction.html">
            
                
                    <a href="../setup_develop_env/server/Windows/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                         Windows系统中环境安装
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1.1.1" data-path="setup_develop_env/server/Windows/VMInstall.html">
            
                
                    <a href="../setup_develop_env/server/Windows/VMInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.1.</b>
                        
                         虚拟机安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.1.2" data-path="setup_develop_env/server/Windows/ErlangInstall.html">
            
                
                    <a href="../setup_develop_env/server/Windows/ErlangInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.2.</b>
                        
                         Erlang安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.1.3" data-path="setup_develop_env/server/Windows/AndroidSimInstall.html">
            
                
                    <a href="../setup_develop_env/server/Windows/AndroidSimInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.3.</b>
                        
                         Android模拟器安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.1.4" data-path="setup_develop_env/server/Windows/EclipseIDEInstall.html">
            
                
                    <a href="../setup_develop_env/server/Windows/EclipseIDEInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.4.</b>
                        
                         Eclipse IDE安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.1.5" data-path="dev_book/develop_env/atom.html">
            
                
                    <a href="../dev_book/develop_env/atom.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.5.</b>
                        
                         开发工具
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.1.6" data-path="dev_book/develop_env/env.html">
            
                
                    <a href="../dev_book/develop_env/env.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.6.</b>
                        
                         开发环境
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3.1.2" data-path="setup_develop_env/server/Linux/Introduction.html">
            
                
                    <a href="../setup_develop_env/server/Linux/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                         Linux系统中环境安装
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1.2.1" data-path="setup_develop_env/server/Linux/EMPInstall.html">
            
                
                    <a href="../setup_develop_env/server/Linux/EMPInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.1.</b>
                        
                         ubuntu系统EMP开发环境安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.2.2" data-path="setup_develop_env/server/Linux/AndroidSimInstall.html">
            
                
                    <a href="../setup_develop_env/server/Linux/AndroidSimInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.2.</b>
                        
                         Android 模拟器安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.1.2.3" data-path="setup_develop_env/server/Linux/ECTSInstall.html">
            
                
                    <a href="../setup_develop_env/server/Linux/ECTSInstall.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.3.</b>
                        
                         ECTS环境安装
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="hello_emp/Introduction.html">
            
                
                    <a href="../hello_emp/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Hello EMP
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="dev_book/create_project/create_project.html">
            
                
                    <a href="../dev_book/create_project/create_project.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         创建Project
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="dev_book/create_project/start_project.html">
            
                
                    <a href="../dev_book/create_project/start_project.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         启动Project
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="app_dev/Introduction.html">
            
                
                    <a href="../app_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         前端界面开发入门
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="app_dev/xhtml/XHTMLDev.html">
            
                
                    <a href="../app_dev/xhtml/XHTMLDev.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         XHTML界面开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1.1" data-path="app_dev/xhtml/xhtmlCompost/XHTMLCompost.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/XHTMLCompost.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.</b>
                        
                         界面基本构成
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1.1.1" data-path="app_dev/xhtml/xhtmlCompost/xhtml_baseTag.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/xhtml_baseTag.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.1.</b>
                        
                         标准控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.1.1.2" data-path="app_dev/xhtml/xhtmlCompost/xhtml_css.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/xhtml_css.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.2.</b>
                        
                         CSS样式
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.1.1.3" data-path="app_dev/xhtml/xhtmlCompost/xhtml_cusTag.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/xhtml_cusTag.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.3.</b>
                        
                         定制控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.1.1.4" data-path="app_dev/xhtml/xhtmlCompost/xhtml_LuaScript.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/xhtml_LuaScript.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.4.</b>
                        
                         Lua脚本
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.1.1.5" data-path="app_dev/xhtml/xhtmlCompost/xhtml_mul_example.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlCompost/xhtml_mul_example.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.5.</b>
                        
                         综合实例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5.1.2" data-path="app_dev/xhtml/xhtmlDyn/xhtml_dyn.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlDyn/xhtml_dyn.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.2.</b>
                        
                         动态界面
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1.2.1" data-path="app_dev/xhtml/xhtmlDyn/xhtml_init.html">
            
                
                    <a href="../app_dev/xhtml/xhtmlDyn/xhtml_init.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.2.1.</b>
                        
                         界面初始化
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="app_dev/module/module_dev.html">
            
                
                    <a href="../app_dev/module/module_dev.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         EWP MODULE开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.2.1" data-path="app_dev/module/module_function.html">
            
                
                    <a href="../app_dev/module/module_function.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.1.</b>
                        
                         Module实现功能
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2.2" data-path="app_dev/module/module_compose.html">
            
                
                    <a href="../app_dev/module/module_compose.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.2.</b>
                        
                         Module创建以及编写
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5.3" data-path="app_dev/ewpData/module_data.html">
            
                
                    <a href="../app_dev/ewpData/module_data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                         MODULE数据获取
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.3.1" data-path="app_dev/ewpData/simple_session.html">
            
                
                    <a href="../app_dev/ewpData/simple_session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.1.</b>
                        
                         Session简单操作
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.3.2" data-path="app_dev/ewpData/database.html">
            
                
                    <a href="../app_dev/ewpData/database.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.2.</b>
                        
                         数据库获取
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.3.3" data-path="app_dev/ewpData/other_service.html">
            
                
                    <a href="../app_dev/ewpData/other_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.3.</b>
                        
                         第三方Service获取
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5.4" data-path="app_dev/pageData/page_data.html">
            
                
                    <a href="../app_dev/pageData/page_data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                         界面数据获取
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.4.1" data-path="app_dev/pageData/from_module.html">
            
                
                    <a href="../app_dev/pageData/from_module.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.1.</b>
                        
                         获取MODULE数据
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.4.2" data-path="app_dev/pageData/page_to_page.html">
            
                
                    <a href="../app_dev/pageData/page_to_page.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.2.</b>
                        
                         界面间传值
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5.5" data-path="app_dev/mul_example/Introduction.html">
            
                
                    <a href="../app_dev/mul_example/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                         综合实例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="deepin_app_dev/Introduction.html">
            
                
                    <a href="../deepin_app_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         前端深入APP开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="deepin_app_dev/channel_and_collection/Introduction.html">
            
                
                    <a href="../deepin_app_dev/channel_and_collection/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         菜单和业务频道
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1.1" data-path="deepin_app_dev/channel_and_collection/channel_and_collection.html">
            
                
                    <a href="../deepin_app_dev/channel_and_collection/channel_and_collection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.1.</b>
                        
                         菜单和业务频道介绍
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.2" >
            
            <span><b>6.1.2.</b> 使用管理后台</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1.2.1" data-path="deepin_app_dev/channel_and_collection/create_channel_and_collection.html">
            
                
                    <a href="../deepin_app_dev/channel_and_collection/create_channel_and_collection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.2.1.</b>
                        
                         创建菜单和业务频道
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.2.2" data-path="deepin_app_dev/channel_and_collection/create_collection_page.html">
            
                
                    <a href="../deepin_app_dev/channel_and_collection/create_collection_page.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.2.2.</b>
                        
                         开发菜单界面
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.2.3" data-path="deepin_app_dev/channel_and_collection/create_channel_entrance_page.html">
            
                
                    <a href="../deepin_app_dev/channel_and_collection/create_channel_entrance_page.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.2.3.</b>
                        
                         开发频道入口界面
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6.1.3" >
            
            <span><b>6.1.3.</b> 使用atom工具</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1.3.1" data-path="dev_book/create_channel/create_channel.html">
            
                
                    <a href="../dev_book/create_channel/create_channel.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.3.1.</b>
                        
                         创建channel
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6.1.4" data-path="deepin_app_dev/channel_page/Introduction.html">
            
                
                    <a href="../deepin_app_dev/channel_page/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.</b>
                        
                         业务界面
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1.4.1" data-path="dev_book/lua_fun/jump.html">
            
                
                    <a href="../dev_book/lua_fun/jump.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.1.</b>
                        
                         跳转界面
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.4.2" data-path="dev_book/lua_fun/public_fun.html">
            
                
                    <a href="../dev_book/lua_fun/public_fun.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.2.</b>
                        
                         公共方法
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.4.3" data-path="dev_book/page_dev/add_basic_common.html">
            
                
                    <a href="../dev_book/page_dev/add_basic_common.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.3.</b>
                        
                         使用基础控件和公共控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.4.4" data-path="deepin_app_dev/channel_page/channel_page_develop.html">
            
                
                    <a href="../deepin_app_dev/channel_page/channel_page_develop.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.4.</b>
                        
                         开发业务界面
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.4.5" data-path="deepin_app_dev/channel_page/channel_lua_develop.html">
            
                
                    <a href="../deepin_app_dev/channel_page/channel_lua_develop.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.4.5.</b>
                        
                         使用公共方法编写脚本逻辑
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6.1.5" data-path="dev_book/debug/Introduction.html">
            
                
                    <a href="../dev_book/debug/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.5.</b>
                        
                         调试
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1.5.1" data-path="dev_book/debug/debug.html">
            
                
                    <a href="../dev_book/debug/debug.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.5.1.</b>
                        
                         如何调试
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.1.5.2" data-path="dev_book/debug/log.html">
            
                
                    <a href="../dev_book/debug/log.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.5.2.</b>
                        
                         查看日志
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="deepin_app_dev/complete_transaction_dev/Introduction.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         完整交易开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="deepin_app_dev/complete_transaction_dev/folder_introduction.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/folder_introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         文件夹目录介绍
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="deepin_app_dev/complete_transaction_dev/page_dev.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/page_dev.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         界面开发
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="deepin_app_dev/complete_transaction_dev/pack.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/pack.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         离线资源打包
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4" data-path="deepin_app_dev/complete_transaction_dev/upload.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/upload.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                         离线资源上传
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.5" data-path="deepin_app_dev/complete_transaction_dev/run_and_verify.html">
            
                
                    <a href="../deepin_app_dev/complete_transaction_dev/run_and_verify.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                         运行和验证
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" >
            
            <span><b>8.</b> 后端Module开发入门</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="app_dev/module/module_dev.html">
            
                
                    <a href="../app_dev/module/module_dev.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         EWP MODULE开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1.1" data-path="app_dev/module/module_function.html">
            
                
                    <a href="../app_dev/module/module_function.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                         Module实现功能
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.1.2" data-path="app_dev/module/module_compose.html">
            
                
                    <a href="../app_dev/module/module_compose.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.2.</b>
                        
                         Module创建以及编写
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="app_dev/ewpData/module_data.html">
            
                
                    <a href="../app_dev/ewpData/module_data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         MODULE数据获取
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.1" data-path="app_dev/ewpData/simple_session.html">
            
                
                    <a href="../app_dev/ewpData/simple_session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                         Session简单操作
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.2" data-path="app_dev/ewpData/database.html">
            
                
                    <a href="../app_dev/ewpData/database.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                         数据库获取
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.3" data-path="app_dev/ewpData/other_service.html">
            
                
                    <a href="../app_dev/ewpData/other_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.3.</b>
                        
                         第三方Service获取
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="deepin_app_dev/Introduction.html">
            
                
                    <a href="../deepin_app_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         后端深入开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.1" data-path="deepin_app_dev/adapter/Introduction.html">
            
                
                    <a href="../deepin_app_dev/adapter/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                         适配器
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.1.1" data-path="deepin_app_dev/adapter/adapter.html">
            
                
                    <a href="../deepin_app_dev/adapter/adapter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.1.</b>
                        
                         适配器介绍
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9.1.2" data-path="deepin_app_dev/adapter/deploy_adapter.html">
            
                
                    <a href="../deepin_app_dev/adapter/deploy_adapter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.2.</b>
                        
                         配置适配器
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9.1.3" data-path="deepin_app_dev/adapter/channel_module_develop.html">
            
                
                    <a href="../deepin_app_dev/adapter/channel_module_develop.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.3.</b>
                        
                         开发业务流程
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="deepin_app_dev/interface/Introduction.html">
            
                
                    <a href="../deepin_app_dev/interface/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         接口介绍
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.1" data-path="deepin_app_dev/interface/WebInterfaceIntroduction.html">
            
                
                    <a href="../deepin_app_dev/interface/WebInterfaceIntroduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                         扩展Web接口
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.1.1" data-path="deepin_app_dev/interface/webInterface_regAndImplement.html">
            
                
                    <a href="../deepin_app_dev/interface/webInterface_regAndImplement.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.1.</b>
                        
                         Web接口注册与实现
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="10.2" data-path="deepin_app_dev/interface/callback_plugin_introduction.html">
            
                
                    <a href="../deepin_app_dev/interface/callback_plugin_introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                         Callback 插件开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.2.1" data-path="deepin_app_dev/interface/callback_plugin_dev_guide.html">
            
                
                    <a href="../deepin_app_dev/interface/callback_plugin_dev_guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.1.</b>
                        
                         Callback插件开发入门
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.2.2" data-path="deepin_app_dev/interface/ewp_callback_plugin_introduction.html">
            
                
                    <a href="../deepin_app_dev/interface/ewp_callback_plugin_introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.2.</b>
                        
                         EWP Callback详细介绍
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="code_standard/code_standard.html">
            
                
                    <a href="../code_standard/code_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         编码规范
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="11.1" data-path="code_standard/erlang_standard.html">
            
                
                    <a href="../code_standard/erlang_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                         Erlang 编码规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.2" data-path="code_standard/xhtml_standard.html">
            
                
                    <a href="../code_standard/xhtml_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.2.</b>
                        
                         Xhtml 编码规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.3" data-path="code_standard/css_standard.html">
            
                
                    <a href="../code_standard/css_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.3.</b>
                        
                         CSS 编码规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.4" data-path="code_standard/lua_standard.html">
            
                
                    <a href="../code_standard/lua_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.4.</b>
                        
                         Lua 编码规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.5" data-path="code_standard/lua_include.html">
            
                
                    <a href="../code_standard/lua_include.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.5.</b>
                        
                         界面编写部分规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.6" data-path="code_standard/basic_tag_standard.html">
            
                
                    <a href="../code_standard/basic_tag_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.6.</b>
                        
                         基础控件命名规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.7" data-path="code_standard/public_tag_standard.html">
            
                
                    <a href="../code_standard/public_tag_standard.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.7.</b>
                        
                         公共控件命名规范
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="dev_book/add_tag/Introduction.html">
            
                
                    <a href="../dev_book/add_tag/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         控件入库流程
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="12.1" data-path="dev_book/add_tag/basic_ui.html">
            
                
                    <a href="../dev_book/add_tag/basic_ui.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.1.</b>
                        
                         基础控件入库流程
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.2" data-path="dev_book/add_tag/public_ui.html">
            
                
                    <a href="../dev_book/add_tag/public_ui.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.2.</b>
                        
                         公共控件入库流程
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="common_problem/FAQ.html">
            
                
                    <a href="../common_problem/FAQ.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         常见问题
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="senior_topical/Introduction.html">
            
                
                    <a href="../senior_topical/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         EWP 高级主题
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="14.1" data-path="senior_topical/Session.html">
            
                
                    <a href="../senior_topical/Session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.1.</b>
                        
                         SESSION操作
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.2" data-path="senior_topical/SessionShared.html">
            
                
                    <a href="../senior_topical/SessionShared.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.2.</b>
                        
                         SESSION共享操作
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.3" data-path="senior_topical/Push.html">
            
                
                    <a href="../senior_topical/Push.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.3.</b>
                        
                         消息推送
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.4" data-path="senior_topical/error_code_service.html">
            
                
                    <a href="../senior_topical/error_code_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.4.</b>
                        
                         错误服务
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.5" data-path="senior_topical/data_store.html">
            
                
                    <a href="../senior_topical/data_store.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.5.</b>
                        
                         数据采集
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.6" data-path="senior_topical/OfflineStore.html">
            
                
                    <a href="../senior_topical/OfflineStore.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.6.</b>
                        
                         离线存储
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.7" data-path="senior_topical/client_package_verify.html">
            
                
                    <a href="../senior_topical/client_package_verify.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.7.</b>
                        
                         防篡改
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="14.8" data-path="senior_topical/py_resource_up_down.html">
            
                
                    <a href="../senior_topical/py_resource_up_down.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.8.</b>
                        
                         命令行方式上传下载离线资源
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.9" data-path="senior_topical/offline_resource.html">
            
                
                    <a href="../senior_topical/offline_resource.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.9.</b>
                        
                         离线资源的使用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.10" data-path="senior_topical/preset_resource.html">
            
                
                    <a href="../senior_topical/preset_resource.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.10.</b>
                        
                         服务器如何正确导出预置资源
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14.11" data-path="senior_topical/Database.html">
            
                
                    <a href="../senior_topical/Database.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.11.</b>
                        
                         数据库
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown">下载</a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                
                <a href="/emp/get_started/get_started.zip" class="button">html</a>
                
                
                <a href="/emp/get_started/book.pdf" class="button">pdf</a>
                
                
                <a href="" class="button">epub</a>
                
            </div>
        </div>
    </div>

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >EMP用户手册</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_99">
                    
                        <h1 id="命令行上传下载离线资源">命令行上传下载离线资源</h1>
<!-- toc -->
<ul>
<li><a href="#打包">打包</a><ul>
<li><a href="#dlnormalres普通资源打包">dl_normal_res(普通资源打包)</a></li>
<li><a href="#dlpluginres插件资源打包">dl_plugin_res(插件资源打包)</a></li>
</ul>
</li>
<li><a href="#uploadres离线资源上传">upload_res(离线资源上传)</a></li>
<li><a href="#uploadh5res多app-h5离线资源上传">upload_h5_res(多App H5离线资源上传)</a></li>
<li><a href="#验证">验证</a></li>
<li><a href="#注意事项">注意事项</a></li>
<li><a href="#dlofflineres下载预置资源">dl_offline_res(下载预置资源)</a></li>
<li><a href="#delofflineres删除资源">del_offline_res(删除资源)</a><ul>
<li><a href="#单个文件删除">单个文件删除</a></li>
<li><a href="#批量删除">批量删除</a></li>
</ul>
</li>
<li><a href="#chofflineconf离线资源配置">ch_offline_conf(离线资源配置)</a></li>
<li><a href="#backupres资源备份">backup_res(资源备份)</a></li>
<li><a href="#restoreres资源回退">restore_res(资源回退)</a></li>
</ul>
<!-- toc stop -->
<p>在有些项目中，由于客户网络要求等导致不能使用管理后台，那么这个时候就需要使用命令行来进行离线资源的打包上传等操作，
本章详细介绍如何使用ewp_ctrl脚本进行这些操作。</p>
<h2 id="打包">1 打包</h2>
<p>产品将离线资源的打包和上传命令编写在ewp_ctrl脚本中。</p>
<p>这里默认大家使用ewp rpm进行开发，对于使用ewp源码开发的情况不做描述。</p>
<p>打开一个Terminal，输入<code>ewp_ctrl -h</code></p>
<pre><code>[root@tracvm ~]# ewp_ctrl -h
bash: ewp_ctrl: command not found
</code></pre><p>如果显示为命令找不到，则请进入ewp_ctrl脚本所在目录。</p>
<pre><code>[root@tracvm ~]# cd /usr/local/lib/ewp/bin
[root@tracvm bin]# ./ewp_ctrl -h
Usage:
  ewp_ctrl start  
      -- start ewp

  ewp_ctrl stop  
      -- stop ewp

  ewp_ctrl restart  
      -- restart ewp

  ewp_ctrl install_app &lt;app-zip-archive&gt;  
      -- install app

  ewp_ctrl erase_app &lt;app-name&gt;  
      -- erase app

  ewp_ctrl update_app|upgrade_app &lt;app-zip-archive&gt;  
      -- upgrade app

  ewp_ctrl start_app &lt;app-name&gt;  
      -- start app

  ewp_ctrl stop_app &lt;app-name&gt;  
      -- stop app

  ewp_ctrl import_channel_conf &lt;app-name&gt; [file-path]  
      -- import configuration file of channels

  ewp_ctrl upload_res [parameters]  
      -- Upload resource. Use &quot;ewp_ctrl upload_res -h&quot; to see information of parameters

  ewp_ctrl upload_h5_res [parameters]  
      -- Upload h5 resource. Use &quot;ewp_ctrl upload_h5_res -h&quot; to see information of parameters

  ewp_ctrl dl_offline_res [parameters]  
      -- download offline resource. Use &quot;ewp_ctrl dl_offline_res -h&quot; to see information of parameters

  ewp_ctrl del_offline_res [parameters]  
      -- delete offline resource. Use &quot;ewp_ctrl del_offline_res -h&quot; to see information of parameters

  ewp_ctrl ch_offline_conf [parameters]  
      -- change offline resource transmission configuration. Use &quot;ewp_ctrl ch_offline_conf -h&quot; to see information of parameters

  ewp_ctrl dl_plugin_res &lt;app-name&gt; &lt;download-dir&gt; [sname]  
      -- download plugin resources of channels to download-dir with &lt;app-name&gt;

  ewp_ctrl dl_normal_res &lt;app-path&gt; &lt;download-dir&gt;  
      -- download normal resources to download-dir

  ewp_ctrl call &lt;Module&gt; &lt;Function&gt; [Args]  
      -- call Module:Function(Args)
</code></pre><p>根据脚本的帮助可以看到离线资源相关的命令为四个。下面详细介绍此四个命令。</p>
<h3 id="dlnormalres普通资源打包">1.1 dl_normal_res(普通资源打包)</h3>
<p><code>dl_normal_res &lt;app-path&gt; &lt;download-dir&gt;</code></p>
<p>此为下载普通资源命令,<code>app-apth</code>为app路径,<code>download-dir</code>为下载后存放路径。</p>
<p>一般<code>app</code>存放路径为<code>/var/app/apps/ebank</code>，个人习惯于将下载后的资源放在<code>app</code>的<code>public/res</code>路径下，所以执行命令
:</p>
<pre><code>ewp_ctrl dl_normal_res /var/www/apps/ebank /var/www/apps/ebank/public/res
application dir is /var/www/apps/ebank
/usr/local/lib/ewp/ebin
args:--[{root,[&quot;/usr/lib64/erlang&quot;]},
        {progname,[&quot;erl&quot;]},
        {home,[&quot;/root&quot;]},
        {pa,[&quot;/usr/local/lib/ewp/ebin&quot;]},
        {sname,[&quot;common_pkg&quot;]},
        {app_dir,[&quot;/var/www/apps/ebank&quot;]},
        {dest_dir,[&quot;/var/www/apps/ebank/public/res&quot;]},
        {package_mod,[&quot;batch_mod&quot;]},
        {noshell,[]}]

=INFO REPORT==== 3-Mar-2015::13:23:01 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.android.default.zip&quot;

=INFO REPORT==== 3-Mar-2015::13:23:06 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.iphone.640-960.zip&quot;

=INFO REPORT==== 3-Mar-2015::13:23:10 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.iphone.default.zip&quot;

=INFO REPORT==== 3-Mar-2015::13:23:14 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.qt.default.zip&quot;

=INFO REPORT==== 3-Mar-2015::13:23:18 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.wp.default.zip&quot;

=INFO REPORT==== 3-Mar-2015::13:23:21 ===
admin_package_resource:238 success to create common resource zip file.&quot;batch-normal__package.common.zip&quot;
Success
</code></pre><p>看到运行普通资源打包成功，进入<code>/var/www/apps/ebank/public/res</code>目录下查看：</p>
<pre><code>[root@localhost ~]# ll /var/www/apps/ebank/public/res
总用量 17124
-rw-r--r-- 1 root root 17533970 3月   3 13:23 batch-normal-package.zip
</code></pre><h3 id="dlpluginres插件资源打包">1.2 dl_plugin_res(插件资源打包)</h3>
<p><code>dl_plugin_res &lt;app-name&gt; &lt;download-dir&gt; [sname]</code></p>
<p><code>app-name</code> 为必输参数，为app名称，这里为ebank。</p>
<p><code>download-dir</code>为打包资源存放路径，在这里我们将此路径同样写为<code>/var/www/apps/ebank/public/res</code>.</p>
<p><code>sname</code>为可选参数，如果启动app节点名称不为<code>ewp_production</code>请输入当前启动app的节点名称。</p>
<p>一般使用<code>ewp_ctrl</code>脚本启动的app节点名称为<code>ewp_production</code>。</p>
<p>可以先查看一下启动了哪些app：</p>
<pre><code>[root@localhost ~]# ps -ef|grep ewp
root     17287     1  0 Mar02 ?        00:03:32 /usr/lib64/erlang/erts-5.9/bin/beam -K true -A 32 -fnu -K true -- -root /usr/lib64/erlang -progname erl -- -home /root -- -noshell -noinput -pa /usr/local/lib/yaws/ebin -pa /usr/local/lib/ewp/ebin -sname ewp_production -ewp_config_dir /usr/local/lib/ewp/config -ewp_priv_dir /usr/local/lib/ewp/priv -ewp_log_dir /usr/local/lib/ewp/log -ewp_public_dir /usr/local/lib/ewp/public -smp auto -kernel inet_dist_listen_min 4100 inet_dist_listen_max 4110 -run yaws -conf /usr/local/lib/ewp/config/yaws.conf -yaws id ewp_production
root     17329 17287  0 Mar02 ?        00:00:00 /usr/local/lib/ewp/priv/emagick
root     18453     1  1 Mar02 ?        00:12:47 /usr/lib64/erlang/erts-5.9/bin/beam -K true -A 32 -fnu -K true -- -root /usr/lib64/erlang -progname erl -- -home /root -- -noshell -noinput -pa /usr/local/lib/yaws/ebin -pa /usr/local/lib/ewp/ebin -sname emas -ewp_conf config/ewp.conf -ewp_config_dir /usr/local/lib/ewp/config -ewp_priv_dir /usr/local/lib/ewp/priv -ewp_log_dir /usr/local/lib/ewp/log -ewp_public_dir /usr/local/lib/ewp/public -smp auto -kernel inet_dist_listen_min 4100 inet_dist_listen_max 4110 -run yaws -conf config/yaws.conf -yaws id emas
root     18495 18453  0 Mar02 ?        00:00:00 /usr/local/lib/ewp/priv/emagick
root     19557     1  0 Mar02 ?        00:00:23 /usr/lib64/erlang/erts-5.9/bin/beam -K true -A 32 -fnu -K true -- -root /usr/lib64/erlang -progname erl -- -home /root -- -noshell -noinput -pa /usr/local/lib/yaws/ebin -pa /usr/local/lib/ewp/ebin -sname ebank_port -ewp_conf config/ewp.conf -ewp_config_dir /usr/local/lib/ewp/config -ewp_priv_dir /usr/local/lib/ewp/priv -ewp_log_dir /usr/local/lib/ewp/log -ewp_public_dir /usr/local/lib/ewp/public -smp auto -kernel inet_dist_listen_min 4100 inet_dist_listen_max 4110 -run yaws -conf config/yaws.conf -yaws id ebank_port
root     19599 19557  0 Mar02 ?        00:00:00 /usr/local/lib/ewp/priv/emagick
root     20907     1  0 Mar02 ?        00:00:13 /usr/lib64/erlang/erts-5.9/bin/beam -K true -A 32 -fnu -K true -- -root /usr/lib64/erlang -progname erl -- -home /root -- -noshell -noinput -pa /usr/local/lib/yaws/ebin -pa /usr/local/lib/ewp/ebin -sname simulator -ewp_conf config/ewp.conf -ewp_config_dir /usr/local/lib/ewp/config -ewp_priv_dir /usr/local/lib/ewp/priv -ewp_log_dir /usr/local/lib/ewp/log -ewp_public_dir /usr/local/lib/ewp/public -smp auto -kernel inet_dist_listen_min 4100 inet_dist_listen_max 4110 -run yaws -conf config/yaws.conf -yaws id simulator
root     20949 20907  0 Mar02 ?        00:00:00 /usr/local/lib/ewp/priv/emagick
root     24323 24037  0 14:03 pts/0    00:00:00 grep ewp
</code></pre><p>可以看到启动了四个app，sname分别为：<code>ewp_production</code>,<code>emas</code>,<code>ebank_port</code>,<code>simulator</code>。</p>
<p>执行下载插件资源命令：</p>
<pre><code>[root@localhost ~]# ewp_ctrl dl_plugin_res ebank /var/www/apps/ebank/public/res
download dir is /var/www/apps/ebank/public/res
/usr/local/lib/ewp/ebin

=INFO REPORT==== 3-Mar-2015::14:06:17 ===
admin_channel:1078 success to create channel zip file.
** at node ewp_production@localhost **

=INFO REPORT==== 3-Mar-2015::14:06:57 ===
admin_channel:1050 success to create adapter zip file.
** at node ewp_production@localhost **
ErrLists = []
success to create resource zip file.
Success
[root@localhost ~]#
</code></pre><p>命令运行成功进入res路径进行查看：</p>
<pre><code>[root@localhost ~]# ll /var/www/apps/ebank/public/res
总用量 67876
-rw-r--r-- 1 root root 17533970 3月   3 13:23 batch-normal-package.zip
-rw-r--r-- 1 root root 51967309 3月   3 14:06 batch_package.zip
[root@localhost ~]#
</code></pre><p>成功生成插件资源包。</p>
<p>非<code>ewp_production</code>节点名称的app的插件资源下载命令,假定app节点名称为<code>ebank</code>：</p>
<pre><code>[root@localhost ~]# ewp_ctrl dl_plugin_res ebank /var/www/apps/ebank/public/res ebank
download dir is /var/www/apps/ebank/public/res
sname is ebank
/usr/local/lib/ewp/ebin
......
</code></pre><h2 id="uploadres离线资源上传">2 upload_res(离线资源上传)</h2>
<p>运行命令<code>ewp_ctrl upload_res -h</code></p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -h
Parameters for upload_res:
  -a app-name        -- Specify the application. This parameter is necessary.
  -f file-path       -- Specify the absolute path of resource file. This parameter is necessary.
  -l relative-path   -- Specify the relative path for package single file.
  -t res-type        -- Specify the resource type. 2 for h5, 1 for package, 0 for normal. Default is 0.
  -d download-type   -- Specify the download type. 1 for optional and 0 for required. Default is 0.
  -e encrypt-flag    -- Specify the encrypt flag. 1 for being encrypted and 0 for not. Default is 0.
  -p platform        -- Specify the platform.
  -r resolution      -- Specify the resolution.
  -s sname           -- Specify the short name of app node.
  -c comment         -- Specify the comment.
</code></pre><p>-a app名称，必传。<br>-f 资源路径，必传。<br>-l 插件文件相对路径，上传单个插件文件时，所需的相对路径。<br>-t 资源类型，2表示H5普通资源，1表示插件资源，0表示普通资源，默认为0。<br>-d 下载类型，1表示可选下载，0表示必选下载，默认为0。<br>-e 是否加密资源，1表示加密，0表示部加密，默认为0。<br>-p 平台，对应管理后台中上传时平台输入。可以为iphone,android,wp,qt,ipad等。<br>-r 分辨率，对应管理后台中上传时输入的分辨率，可以为320*480,640*960等。<br>-s app节点名称，如果节点名称不为<code>ewp_production</code>则需要输入此参数。<br>-c 资源描述，追加离线资源的资源描述。传入参数需要使用引号，如，<code>-c &quot;hello world&quot;</code>  </p>
<p>将上一章节中下载的普通资源上传，执行命令：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/batch-normal-package.zip
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;batch-normal-package.zip&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;normal&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/batch-normal-package.zip&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:27:00 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>将已下载插件资源上传，执行命令：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/batch_package.zip
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;batch_package.zip&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;normal&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/batch_package.zip&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:31:38 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>上传单独的一个插件包,假定插件包放在public/res文件夹下，名称为<code>login.zip</code>,此时执行命令为：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/login.zip -t 1
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;login.zip&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;package&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/login.zip&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:36:36 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>上传单独的一个普通资源，假定资源放在public/res文件夹下，名称为test.lua，此时执行命令为：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/test.lua
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;test.lua&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;normal&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/test.lua&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:39:47 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>如果需要针对android平台的1024*768分辨率单独上传一份普通资源则执行命令为：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/test.lua -p android -r 1024*768
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;test.lua&quot;},
           {&quot;platform&quot;,&quot;android&quot;},
           {&quot;resolution&quot;,&quot;1024*768&quot;},
           {&quot;type&quot;,&quot;normal&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/test.lua&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:41:24 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>如果插件资源为非必选下载，执行命令：</p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -a ebank -f /var/www/apps/ebank/public/res/login.zip -t 1 -d 1
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;login.zip&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;package&quot;},
           {&quot;download_type&quot;,&quot;1&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;}]
FilePath == &quot;/var/www/apps/ebank/public/res/login.zip&quot;
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ewp_production@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 3-Mar-2015::14:43:34 ===
admin_resource:676  **upload res file at ewp_production@localhost: ok
** at node ewp_production@localhost **
Success
[root@localhost ~]#
</code></pre><p>上传EWP服务器的H5资源，执行命令：  </p>
<pre><code>[root@localhost ~]# ewp_ctrl upload_res -t 2 -a ebank -f /var/www/apps/unit-test/public/www/unit-test-resources/local_h5.zip -s ebank_port

params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;local_h5.zip&quot;},
           {&quot;platform&quot;,[]},
           {&quot;resolution&quot;,[]},
           {&quot;type&quot;,&quot;h5&quot;},
           {&quot;download_type&quot;,&quot;0&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;},
           {&quot;ensure_type&quot;,&quot;1&quot;},
           {&quot;comment&quot;,[]}]
FilePath == &quot;/var/www/apps/unit-test/public/www/unit-test-resources/local_h5.zip&quot;

=INFO REPORT==== 29-Nov-2015::05:37:00 ===
ewp_resource:97 generating descriptions of resources...
** at node ebank_port@localhost **

=INFO REPORT==== 29-Nov-2015::05:37:03 ===
ewp_resource:126 gen desc of verion 0 without sca successfully
** at node ebank_port@localhost **

=INFO REPORT==== 29-Nov-2015::05:37:11 ===
ewp_resource:1299 gen desc of verion 1 without sca successfully
** at node ebank_port@localhost **

=INFO REPORT==== 29-Nov-2015::05:37:11 ===
ewp_resource:1299 gen desc of verion 0 with sca successfully
** at node ebank_port@localhost **

=INFO REPORT==== 29-Nov-2015::05:37:11 ===
ewp_resource:1299 gen desc of verion 1 with sca successfully
** at node ebank_port@localhost **
result: &quot;{\&quot;done_nodes\&quot;:[\&quot;ebank_port@localhost\&quot;],\&quot;failed_nodes\&quot;:[],\&quot;bad_nodes\&quot;:[]}&quot;

=INFO REPORT==== 29-Nov-2015::05:37:11 ===
admin_resource:1272  **upload res file at ebank_port@localhost: ok
** at node ebank_port@localhost **
Success
</code></pre><p>其他情况不一一列举，最主要还是将这些参数的意义弄明白，输入正确参数即可。</p>
<h2 id="uploadh5res多app-h5离线资源上传">3 upload_h5_res(多App H5离线资源上传)</h2>
<pre><code>[root@localhost ~]# ewp_ctrl upload_h5_res -h
Parameters for upload_h5_res:
  -a app-name        -- Specify the application. This parameter is necessary.
  -f file-path       -- Specify the absolute path of resource file. This parameter is necessary.
  -l relative-path   -- Specify the relative path for package single file.
  -y upload-type     -- Specify the type of upload resources.0 for batch h5 packet, 1 for h5 packet file, 2 for all h5 resources
  -e encrypt-flag    -- Specify the encrypt flag. 1 for being encrypted and 0 for not. Default is 0.
  -c comment         -- Specify the commnet.
  -s sname           -- Specify the short name of app node.
</code></pre><p>-a app名称，必传。<br>-f 资源路径，必传。<br>-l 插件文件相对路径，上传单个插件文件时，所需的相对路径。<br>-y 上传H5离线资源方式，0表示增量-批量上传(zip包)，1表示增量-单个文件(文件)，2表示全量(zip包)<br>-e 是否加密资源，1表示加密，0表示部加密，默认为0。<br>-s app节点名称，如果节点名称不为<code>ewp_production</code>则需要输入此参数。<br>-c 资源描述，追加离线资源的资源描述。传入参数需要使用引号，如，<code>-c &quot;hello world&quot;</code>  </p>
<p>上传多App类型服务器的H5资源，<code>-f .../mobile.zip</code>中mobile为多App服务器的名字，执行命令：</p>
<pre><code>[root@localhost apps]# ewp_ctrl upload_h5_res -a ebank -f /var/www/apps/unit-test/public/www/unit-test-resources/mobile.zip -s ebank_port
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;file&quot;,&quot;mobile.zip&quot;},
           {&quot;encrypt&quot;,&quot;0&quot;},
           {&quot;ensure_type&quot;,&quot;1&quot;},
           {&quot;comment&quot;,[]}]
FilePath == &quot;/var/www/apps/unit-test/public/www/unit-test-resources/mobile.zip&quot;

=INFO REPORT==== 29-Nov-2015::05:40:08 ===
ewp_resource:66 generating descriptions of resources...
** at node ebank_port@localhost **

=INFO REPORT==== 29-Nov-2015::05:40:09 ===
admin_resource:130  **upload res file at ebank_port@localhost: ok
** at node ebank_port@localhost **
Success
</code></pre><p>其他情况不一一列举，最主要还是将这些参数的意义弄明白，输入正确参数即可。</p>
<h2 id="验证">4 验证</h2>
<p>这个时候我们需要去验证一下脚本上传的离线资源是否正确，如果有管理后台可以直接从管理后台查看是否已上传成功。在管理后台不能用的情况下，我们
只有进入<code>resources</code>文件夹下查看。</p>
<p>进入<code>/var/www/apps/ebank/public/www/resources</code>:</p>
<p>查看andoird平台分辨率为1024*768的文件夹下是否有test.lua文件。</p>
<pre><code>[root@localhost lua]# ll /var/www/apps/ebank/public/www/resources/android/1024-768/lua
总用量 8
-rw-r--r-- 1 root root 7143 3月   3 14:41 test.lua
[root@localhost lua]#
</code></pre><p>test.lua文件上传成功。</p>
<p>在查看一下login.zip文件是否正确上传：</p>
<pre><code>[root@localhost zip]# ll /var/www/apps/ebank/public/www/resources/common/zip/login.zip
-rw-r--r-- 1 root root 55146 3月   3 14:43 /var/www/apps/ebank/public/www/resources/common/zip/login.zip
[root@localhost zip]#
</code></pre><p>login.zip文件上传成功。</p>
<p>在<code>/var/www/apps/ebank/public/www/resources/common/zip</code>文件夹下存在此项目定义的业务频道插件包，表示离线资源上传成功。</p>
<h2 id="注意事项">5 注意事项</h2>
<p>产品在离线资源上传时做了很多功能优化，试想如果有100个channel，每一个channel打包为一个插件包，然后在一个一个上传这是件多么难以忍受的事。
所以在资源上传时，可以将这些插件包压缩为一个整体包，然后上传，但是此时上传资源类型必须为普通，上传功能中会在上传时解压此压缩包然后处理每一个插件资源。</p>
<h2 id="dlofflineres下载预置资源">6 dl_offline_res(下载预置资源)</h2>
<p>此脚本功能与EWP管理平台下载预置资源功能相同<br>运行帮助命令<code>ewp_ctrl dl_offline_res -h</code>查看参数介绍  </p>
<pre><code>[root@localhost ~]# ewp_ctrl dl_offline_res -h
Parameters for download_offline_res:
  -a app-name        -- Specify the application. This parameter is necessary.
  -f from            -- Specify the H5 Server Name. Default is undefined.
  -d dest-path       -- Specify the download path of offline file. Default is current path.
  -e pre-encrypt     -- Specify the offline pre-encrypt type. 0 for not-encrypt and 1 for use-sca and 2 for unuse-sca. Default is 0.
  -k encrypt-key     -- Specify the encrypt key. This parameter is necessary when pre-encrypt is 1 or 2.
  -p platform        -- Specify the platform. value is iphone/android/wp/qt. Default is iphone.
  -r resolution      -- Specify the resolution. Default is 320*480.
  -s sname           -- Specify the short name of app node. Default is ewp_production.
  -t update-type     -- Specify the update type. 0 for required and 1 for optional. Default is 0.
  -u use-sca         -- Specify the calculation of the calibration values using sca . Default is 1.
  -v version         -- Specify the offline protocol version. 0 for before EMP5.2, 1 for EMP5.2 and above, 2 same as 1, 3 for EMP5.3 and above(with mutil-app h5 and local h5). Default is 1.
Example: ewp_ctrl dl_offline_res -a ebank -s ewp_production -u 1 -k testkey -e 1 -p wp -r 320*480 -v 1 -d /var/www/apps
</code></pre><p>-a app名称。<strong>必传</strong>。<br>-s app节点名称。<strong>如果节点名称不为<code>ewp_production</code>则需要输入此参数</strong>。<br>-f H5 Server Name。多App的主机名，在下载多AppH5服务器的离线资源时使用。<br>-d 下载至指定路径。默认为当前路径。<br>-e 离线资源预置加密方式。0为不加密，1为使用&quot;国密&quot;加密，2为使用&quot;非国密&quot;加密。默认为0。<br>-k 加密密钥。当-e为1或2时，此参数为必传参数。默认为&quot;空&quot;。<br>-p 平台，对应管理后台中上传时平台输入。可以为iphone,android,wp,qt等。默认为&quot;iphone&quot;。<br>-r 分辨率，对应管理后台中上传时输入的分辨率，可以为320*480,640*960等。默认为320*480。<br>-t 是否下载可选资源。0为否，1为是。默认为0。<br>-u 使用国密算法计算校验值。0为否，1为是，默认为1。<br>-v 离线协议版本。0为EMP5.2之前版本，1和2为EMP5.2及以上版本，3为EMP5.3及以上版本(带有H5资源或者多App H5资源)。默认为1。  </p>
<p>例如：<br>ewp_ctrl dl_offline_res -a ebank -s ewp_production -u 1 -k testkey -e 1 -p wp -r 320*480 -v 1 -t 1 -d /var/www/apps<br>下载预置资源：<code>APP名ebank 节点名ebank 使用国密算法计算校验值 使用&quot;国密&quot;加密 加密密钥:testkey 平台:wp 分辨率:320*480 离线协议版本:EMP5.2及以上版本 下载可选资源 将预置资源下载到/var/www/apps路径</code>  </p>
<pre><code>[root@localhost ~]# ewp_ctrl dl_offline_res -a ebank -s ebank -u 1 -k testkey -e 1 -p wp -r 320\*480 -v 1 -t 1 -d /var/www/apps
params == [{&quot;app&quot;,&quot;ebank&quot;},
           {&quot;download_platform&quot;,&quot;wp&quot;},
           {&quot;download_resolution&quot;,&quot;320*480&quot;},
           {&quot;version&quot;,&quot;1&quot;},
           {&quot;use_sca&quot;,&quot;1&quot;},
           {&quot;update_type&quot;,&quot;1&quot;},
           {&quot;pre_encrypt&quot;,&quot;1&quot;},
           {&quot;encrypt_key&quot;,&quot;testkey&quot;}]
FilePath == &quot;/var/www/apps&quot;
Success
[root@localhost ~]# ls /var/www/apps/
ebank-wp-320-480-1.zip
[root@localhost ~]#
</code></pre><h2 id="delofflineres删除资源">7 del_offline_res(删除资源)</h2>
<p>运行帮助命令<code>ewp_ctrl del_offline_res -h</code>查看参数介绍  </p>
<pre><code>[root@localhost ~]# ewp_ctrl del_offline_res -h
Parameters for delete_offline_res:
  -a app-name        -- Specify the application. This parameter is necessary.
  -b batchfile       -- Specify the batch file.
  -f deletefile      -- Specify the normal delete file.
  -p platform        -- Specify the platform. value is iphone/android/wp/qt.
  -r resolution      -- Specify the resolution.
  -s sname           -- Specify the short name of app node. Default is ewp_production.
Example: ewp_ctrl del_offline_res -a ebank -s ewp_production -f add_button.png -p iphone -r 320*480
         ewp_ctrl del_offline_res -a ebank -s ewp_production -b /var/www/apps/test.txt
</code></pre><p>-a app名称。<strong>必传</strong>。<br>-s app节点名称。<strong>如果节点名称不为<code>ewp_production</code>则需要输入此参数</strong>。<br>-b 批量删除文件。需要文件的绝对路径。<br>-f 单个删除文件名。类型：<code>文件名.后缀</code>。<br>-p 平台，对应管理后台中上传时平台输入。可以为iphone,android,wp,qt等。默认为&quot;common&quot;。<br>-r 分辨率，对应管理后台中上传时输入的分辨率，可以为320*480,640*960等。默认为&quot;common&quot;。  </p>
<h3 id="单个文件删除">7.1 单个文件删除</h3>
<p>在使用删除脚本时，如果只删除一个文件，可以使用<code>-f FileName</code>来指定删除文件。单个文件删除不支持模糊删除功能。  </p>
<pre><code>使用脚本参数对应删除文件路径为：
%% 删除&quot;common&quot;平台下的&quot;test.txt&quot;
%% 删除文件路径：APP/public/resources/common/txt/test.txt
-f test.txt

%% 删除&quot;android&quot;平台 &quot;common&quot;分辨率的&quot;test.txt&quot;
%% 删除文件路径：APP/public/resources/android/common/txt/test.txt
-f test.txt -p android

%% 删除&quot;android&quot;平台 &quot;320*480&quot;分辨率的&quot;test.txt&quot;
%% 删除文件路径：APP/public/resources/android/320-480/txt/test.txt
-f test.txt -p android -r 320*480
</code></pre><p>例如：<br>ewp_ctrl del_offline_res -a ebank -s ewp_production -f add_button.png -p iphone -r 320*480<br>功能为：删除<code>APP：ebank  节点：ewp_production  平台：iphone  分辨率：320*480  文件：add_button.png</code>  </p>
<h3 id="批量删除">7.2 批量删除</h3>
<p>如果删除资源文件较多，就可以是用<code>-b AbsolutePath/BatchFile</code>进行批量删除文件，此时不需要<code>-f -p -r</code>三个参数。<br>删除功能是把文件里的Erlang项值读出来，所以，BatchFile的内容格式为：<code>{&quot;FileName&quot;, &quot;Platform&quot;, &quot;Resolution&quot;}.</code> <strong>注意句末的句号</strong><br>&quot;Platform&quot;: iphone/android/wp/qt/*<br>Platform的*星号表示:所有平台(包括common)<br>&quot;Resolution&quot;：320*480/640*960/.../*<br>Resolution的*星号表示:所有分辨率(包括common)<br>从上面的解释可以知道，批量删除支持模糊删除。具体用法请参考下面实例：  </p>
<pre><code>BatchFile文件内容如下：
%% 固定删除：iphone平台、分辨率320*480、test01.txt文件
%% 路径：App/public/resources/iphone/320-480/txt/test01.txt
{&quot;test01.txt&quot;, &quot;iphone&quot;, &quot;320*480&quot;}.

%% 固定删除：android平台、common分辨率、test02.txt
%% 路径：App/public/resources/android/common/txt/test02.txt
{&quot;test02.txt&quot;, &quot;android&quot;, &quot;&quot;}.

%% 固定删除：common平台、test03.png
%% 路径：App/public/resources/common/png/test03.png
{&quot;test03.png&quot;, &quot;&quot;, &quot;&quot;}.

%% 匹配删除：iphone/android/wp/qt/common平台、320*480分辨率、以tes开头的所有类型文件
%% 路径：App/public/resources/{iphone/android/wp/qt}/320-480/*/tes* 和
%%      App/public/resources/common/*/tes*
%% {iphone/android/wp/qt} 表示四个平台
%% * 为该路径下所有能匹配的文件夹或文件
{&quot;tes*&quot;, &quot;*&quot;, &quot;320*480&quot;}.

%% 匹配删除：android平台、所有(包括common)分辨率、以a开头的zip类型文件
%% 路径：App/public/resources/android/*/*/a* 
%% * 为该路径下所有能匹配的分辨率(包括common)、文件夹、文件
{&quot;a*.zip&quot;, &quot;android&quot;, &quot;*&quot;}.

%% 删除所有离线资源
{&quot;*&quot;, &quot;*&quot;, &quot;*&quot;}.
</code></pre><p>例如：<br>ewp_ctrl del_offline_res -a ebank -s ewp_production -b /var/www/apps/test.txt<br>功能为：删除<code>APP：ebank  节点：ewp_production  /var/www/apps/test.txt内描述的所有文件</code>  </p>
<h2 id="chofflineconf离线资源配置">8 ch_offline_conf(离线资源配置)</h2>
<p>此脚本功能与EWP管理平台离线资源配置功能相同<br>运行帮助命令<code>ewp_ctrl ch_offline_conf -h</code>查看参数介绍  </p>
<pre><code>[root@localhost ~]# ewp_ctrl ch_offline_conf -h
Parameters for change_offline_config:
  -a app-name        -- Specify the application. This parameter is necessary.
  -d download_type   -- Specify the download type. value is http/tcp. Default is http.
  -e encrypt_type    -- Specify the encrypt type. value is 0/1/2/3. Default is 0.
  -t host            -- Specify the http host. this is necessary when use &#39;-d http -e 3&#39;.
  -s sname           -- Specify the short name of app node. Default is ewp_production.
Example: ewp_ctrl ch_offline_conf -a ebank -s ewp_production -d tcp -e 2
         ewp_ctrl ch_offline_conf -a ebank -s ewp_production -d http -e 3 -t https://192.168.64.220:4004
</code></pre><p>-a app名称。<strong>必传</strong>。<br>-s app节点名称。<strong>如果节点名称不为<code>ewp_production</code>则需要输入此参数</strong>。<br>-d 下载方式。配置下载离线资源的方式，http或tcp。默认是http。<br>-e 安全传输方式。配置下载离线资源的安全传输方式，0～3。默认是0。<br>-t http host。配置下载离线资源的主机地址。默认是空。  </p>
<p>例如：  </p>
<pre><code>ewp_ctrl ch_offline_conf -a ebank -s ewp_production -d tcp -e 2  
修改离线资源配置为：tcp下载，EMP信道密文传输  

ewp_ctrl ch_offline_conf -a ebank -s ewp_production -d http -e 3 -t https://192.168.64.220:4004  
修改离线资源配置为：http下载，HTTPS传输，HOST地址https://192.168.64.220:4004
</code></pre><h2 id="backupres资源备份">9 backup_res(资源备份)</h2>
<p>运行帮助命令<code>ewp_ctrl backup_res -h</code>查看参数介绍  </p>
<pre><code>[root@localhost ~]# ewp_ctrl backup_res -h
Parameters for backup_res:
  -a app-name        -- Specify the application. This parameter is necessary.&quot;
  -s app_node_name   -- Specify the aApp node name, if the node name for ewp_production you will need to input this parameter.&quot;
  -f file-name       -- Specify the After the specified backup zip file name.&quot;
  -p file-path       -- Specify the backup path.&quot;
Example: ewp_ctrl backup_res -a ebank -s ewp_production -f res_backup_1457347935.zip -f /var/www/apps/unit-test/public/resources_backup
</code></pre><p>-a app名称。<strong>必传</strong>。<br>-s app节点名称。<strong>如果节点名称不为<code>ewp_production</code>则需要输入此参数</strong>。
-f 指定备份后的压缩包文件名。
-p 指定备份路径。</p>
<p>例如：  </p>
<pre><code>ewp_ctrl backup_res -a ebank -s ewp_production -f res_backup_1457347935.zip -f /var/www/apps/unit-test/public/resources_backup
将AppPath/public/resources路径下除了old_desc、old_sca_desc的所有文件，其余压缩成res_backup_1457347935.zip包，保存在/var/www/apps/unit-test/public/resources_backup下
注：AppPath为app所在目录,当不传&quot;f&quot;或&quot;p&quot;参数时，默认的压缩包文件名为：res_backup_系统时间.zip，默认的备份路径为：AppPath/public/resources_backup
</code></pre><h2 id="restoreres资源回退">10 restore_res(资源回退)</h2>
<p>运行帮助命令<code>ewp_ctrl restore_res -h</code>查看参数介绍  </p>
<pre><code>[root@localhost ~]# ewp_ctrl restore_res -h
Parameters for restore_res:
  -a app-name        -- Specify the application. This parameter is necessary.&quot;
  -s app_node_name   -- Specify the aApp node name, if the node name for ewp_production you will need to input this parameter.&quot;
  -f file-name       -- Specify the Need to specify the return to a version of the backup file name (absolute path) will be sent.&quot;
Example: ewp_ctrl restore_res -a ebank -s ewp_production -f /var/www/apps/unit-test/public/resources_backup/res_backup_1457347935.zip
</code></pre><p>-a app名称。<strong>必传</strong>。<br>-s app节点名称。<strong>如果节点名称不为<code>ewp_production</code>则需要输入此参数</strong>。
-f 指定需要恢复到某一版本的备份文件名(绝对路径)，<strong>必传</strong>。</p>
<p>例如：  </p>
<pre><code>ewp_ctrl restore_res -a ebank -s ewp_production -f /var/www/apps/unit-test/public/resources_backup/res_backup_1457347935.zip
删除AppPath/public/resources路径下除了old_desc、old_sca_desc的所有文件，将指定备份文件解压到AppPath/public/resources下，恢复指定版本，重新生成一次描述文件
注：AppPath为app所在目录
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../senior_topical/client_package_verify.html" class="navigation navigation-prev " aria-label="Previous page: 防篡改"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../senior_topical/offline_resource.html" class="navigation navigation-next " aria-label="Next page: 离线资源的使用"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
