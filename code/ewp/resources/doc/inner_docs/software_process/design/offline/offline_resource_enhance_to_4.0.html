<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>增强版升级离线4.0服务端设计 | 产品文档</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.3.4">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../../../software_process/design/EMP/EWP_support_https_list.html" />
    
    
    <link rel="prev" href="../../../software_process/design/EWP/design_of_client_anti_replaying.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../../../gitbook/style.css">


        
    <div class="book" data-level="8.6.8" data-basepath="../../.." data-revision="1463048464910">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="hg_guide/Introduction.html">
            
                
                    <a href="../../../hg_guide/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         代码提交
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="hg_guide/commit_specification.html">
            
                
                    <a href="../../../hg_guide/commit_specification.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         代码提交规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="hg_guide/how_mercurial_works.html">
            
                
                    <a href="../../../hg_guide/how_mercurial_works.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         mercurial基本原理
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="hg_guide/mercurial_commands.html">
            
                
                    <a href="../../../hg_guide/mercurial_commands.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         mercurial使用教程
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="coding_convention/c++.html">
            
                
                    <a href="../../../coding_convention/c++.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         编码规范
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="coding_convention/c++.html">
            
                
                    <a href="../../../coding_convention/c++.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         c++编码规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="coding_convention/client_development_specification.html">
            
                
                    <a href="../../../coding_convention/client_development_specification.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         客户端开发规范
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="coding_convention/android_convention.html">
            
                
                    <a href="../../../coding_convention/android_convention.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         android开发规范
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="code_review/code_review_points.html">
            
                
                    <a href="../../../code_review/code_review_points.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         代码评审
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="code_review/ios/FAQ.html">
            
                
                    <a href="../../../code_review/ios/FAQ.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         FAQ(iOS)
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="ci_guide/Introduction.html">
            
                
                    <a href="../../../ci_guide/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         持续集成
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="ci_guide/jenkins.html">
            
                
                    <a href="../../../ci_guide/jenkins.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Jenkins持续集成
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="ci_guide/deploy.html">
            
                
                    <a href="../../../ci_guide/deploy.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         Jenkins持续发布
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="ci_guide/ClientBuild.html">
            
                
                    <a href="../../../ci_guide/ClientBuild.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         客户端构建
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="ci_guide/sonarqube.html">
            
                
                    <a href="../../../ci_guide/sonarqube.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         Sonar代码质量检测
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.5" data-path="ci_guide/Phabricator.html">
            
                
                    <a href="../../../ci_guide/Phabricator.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                         Code Review
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.6" data-path="ci_guide/Appium.html">
            
                
                    <a href="../../../ci_guide/Appium.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                         UI自动化测试
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.7" data-path="ci_guide/ldap.html">
            
                
                    <a href="../../../ci_guide/ldap.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                         LDAP服务部署和集成
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.8" data-path="ci_guide/p_code.html">
            
                
                    <a href="../../../ci_guide/p_code.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                         个人构建
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9" data-path="ci_guide/tools/Introduction.html">
            
                
                    <a href="../../../ci_guide/tools/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                         持续集成依赖工具
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.9.1" data-path="ci_guide/tools/brew.html">
            
                
                    <a href="../../../ci_guide/tools/brew.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.1.</b>
                        
                         Homebrew安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.2" data-path="ci_guide/tools/install_jdk.html">
            
                
                    <a href="../../../ci_guide/tools/install_jdk.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.2.</b>
                        
                         JDK安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.3" data-path="ci_guide/tools/install_sdk.html">
            
                
                    <a href="../../../ci_guide/tools/install_sdk.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.3.</b>
                        
                         Android SDK安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.4" data-path="ci_guide/tools/install_tomcat.html">
            
                
                    <a href="../../../ci_guide/tools/install_tomcat.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.4.</b>
                        
                         Tomcat安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.5" data-path="ci_guide/tools/maven.html">
            
                
                    <a href="../../../ci_guide/tools/maven.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.5.</b>
                        
                         Maven构建工具
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.6" data-path="ci_guide/tools/nexus.html">
            
                
                    <a href="../../../ci_guide/tools/nexus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.6.</b>
                        
                         Nexus依赖仓库
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.9.7" data-path="ci_guide/tools/Ansible.html">
            
                
                    <a href="../../../ci_guide/tools/Ansible.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.7.</b>
                        
                         Asible服务集群部署
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="code_server/Introduction.html">
            
                
                    <a href="../../../code_server/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         代码服务器
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="code_server/deploy.html">
            
                
                    <a href="../../../code_server/deploy.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         代码服务器部署
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="code_server/hghook.html">
            
                
                    <a href="../../../code_server/hghook.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         hghook脚本安装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.3" data-path="code_server/pmmm_functions.html">
            
                
                    <a href="../../../code_server/pmmm_functions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                         PMMM插件功能列表
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.4" data-path="code_server/trac_sqlite_to_mysql.html">
            
                
                    <a href="../../../code_server/trac_sqlite_to_mysql.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                         Trac迁移Sqlite到MySQL
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="tech/tech_wordpress.html">
            
                
                    <a href="../../../tech/tech_wordpress.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         技术期刊
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="tech/tech_wordpress.html">
            
                
                    <a href="../../../tech/tech_wordpress.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         技术期刊Wordpress搭建
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2" data-path="tech/mail_wordpress.html">
            
                
                    <a href="../../../tech/mail_wordpress.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                         Wordpress安装邮件服务
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="software_process/requirement/Introduction.html">
            
                
                    <a href="../../../software_process/requirement/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         需求文档
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" >
            
            <span><b>7.1.</b> 离线资源</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1.1" data-path="software_process/requirement/offline/security_optimization_of_offline.html">
            
                
                    <a href="../../../software_process/requirement/offline/security_optimization_of_offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.1.</b>
                        
                         离线资源安全优化需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.2" data-path="software_process/requirement/offline/multi_app_support_of_offline.html">
            
                
                    <a href="../../../software_process/requirement/offline/multi_app_support_of_offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.2.</b>
                        
                         离线多App需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.3" data-path="software_process/requirement/offline/websocket_offline.html">
            
                
                    <a href="../../../software_process/requirement/offline/websocket_offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.3.</b>
                        
                         离线Websocket下载需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.4" data-path="software_process/requirement/offline/single_optional_resource_dl_offline.html">
            
                
                    <a href="../../../software_process/requirement/offline/single_optional_resource_dl_offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.4.</b>
                        
                         离线可选资源单个文件下载需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.5" data-path="software_process/requirement/offline/offline4.0_supplement.html">
            
                
                    <a href="../../../software_process/requirement/offline/offline4.0_supplement.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.5.</b>
                        
                         离线4.0补充需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.1.6" data-path="software_process/requirement/5.3/multi_encrypted_tunnels.html">
            
                
                    <a href="../../../software_process/requirement/5.3/multi_encrypted_tunnels.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.6.</b>
                        
                         多信道需求
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="software_process/requirement/EMP/touchevent/touchEventRequirement.html">
            
                
                    <a href="../../../software_process/requirement/EMP/touchevent/touchEventRequirement.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         TouchEvent事件监听需求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="software_process/requirement/client_anti_replaying.html">
            
                
                    <a href="../../../software_process/requirement/client_anti_replaying.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         客户端防重放需求
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="software_process/design/Introduction.html">
            
                
                    <a href="../../../software_process/design/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         设计文档
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" >
            
            <span><b>8.1.</b> 文件上传</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1.1" data-path="software_process/design/EWP/server_design_of_uploading_file.html">
            
                
                    <a href="../../../software_process/design/EWP/server_design_of_uploading_file.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                         服务端设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="software_process/design/offline/Introduction.html">
            
                
                    <a href="../../../software_process/design/offline/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         离线资源
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.1" data-path="software_process/design/offline/offline_resource.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                         离线资源协议1.0版
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.1.1" data-path="software_process/design/offline/offline_resource_design_server.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_design_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.1.</b>
                        
                         服务端设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.1.2" data-path="software_process/design/offline/offline_resource_design_client.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_design_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.2.</b>
                        
                         客户端设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.2.2" data-path="software_process/design/offline/offline_resource_2.0.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_2.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                         离线资源协议2.0版
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.2.1" data-path="software_process/design/offline/design_of_security_optimization.html">
            
                
                    <a href="../../../software_process/design/offline/design_of_security_optimization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.1.</b>
                        
                         离线资源2.0安全性优化设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.2.2" data-path="software_process/design/offline/h5_resources_support.html">
            
                
                    <a href="../../../software_process/design/offline/h5_resources_support.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.2.</b>
                        
                         离线资源2.1 H5资源支持设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.2.3" data-path="software_process/design/offline/h5_resources_support_client.html">
            
                
                    <a href="../../../software_process/design/offline/h5_resources_support_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.3.</b>
                        
                         离线资源2.1 H5资源支持客户端设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.2.3" data-path="software_process/design/offline/offline_resource_3.0.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_3.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.3.</b>
                        
                         离线资源协议3.0版
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.3.1" data-path="software_process/design/offline/design_of_multi_app_support_of_offline_server.html">
            
                
                    <a href="../../../software_process/design/offline/design_of_multi_app_support_of_offline_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.3.1.</b>
                        
                         离线资源3.0 离线资源多App支持服务器设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.3.2" data-path="software_process/design/offline/design_of_multi_app_support_of_offline_client.html">
            
                
                    <a href="../../../software_process/design/offline/design_of_multi_app_support_of_offline_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.3.2.</b>
                        
                         离线资源3.0 离线资源多App支持客户端设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4" data-path="software_process/design/offline/offline_resource_4.0.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_4.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.</b>
                        
                         离线资源协议4.0版
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.2.4.1" data-path="software_process/design/offline/h5_plug_support_client.html">
            
                
                    <a href="../../../software_process/design/offline/h5_plug_support_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.1.</b>
                        
                         离线H5资源插件下载
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.2" data-path="software_process/design/offline/websocket_resources_support_client.html">
            
                
                    <a href="../../../software_process/design/offline/websocket_resources_support_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.2.</b>
                        
                         客户端离线资源WebSocket下载支持设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.3" data-path="software_process/design/offline/offline_4_0_design_server.html">
            
                
                    <a href="../../../software_process/design/offline/offline_4_0_design_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.3.</b>
                        
                         离线资源4.0 服务器设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.4" data-path="software_process/design/offline/offline_resource_optimization_client.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_optimization_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.4.</b>
                        
                         离线资源优化-客户端设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.5" data-path="software_process/design/offline/offline_resource_optimization_server.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_optimization_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.5.</b>
                        
                         离线资源优化-服务端设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.6" data-path="software_process/design/offline/offline_resource_optimization_pre&amp;download_android.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_optimization_pre&amp;download_android.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.6.</b>
                        
                         离线资源优化-预置&amp;下载-Android
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.7" data-path="software_process/design/offline/offline_resource_optimization_pre&amp;download_android.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_optimization_pre&amp;download_android.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.7.</b>
                        
                         离线资源优化-预置&amp;下载-Android
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2.4.8" data-path="software_process/design/offline/offline_resource_optinal_part_client.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_optinal_part_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.8.</b>
                        
                         离线资源-可选资源增量更新
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.3" data-path="software_process/design/xmpp/Introduction.html">
            
                
                    <a href="../../../software_process/design/xmpp/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                         可靠消息
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.3.1" data-path="software_process/design/xmpp/xmpp_design_client.html">
            
                
                    <a href="../../../software_process/design/xmpp/xmpp_design_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.1.</b>
                        
                         可靠消息机制客户端设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.4" data-path="software_process/design/editor/Introduction.html">
            
                
                    <a href="../../../software_process/design/editor/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                         Editor调试工具
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.4.1" data-path="software_process/design/editor/client/editor_client_design.html">
            
                
                    <a href="../../../software_process/design/editor/client/editor_client_design.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.1.</b>
                        
                         客户端Editor工具实现思路
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.4.2" data-path="software_process/design/editor/client/data_transfer_old.html">
            
                
                    <a href="../../../software_process/design/editor/client/data_transfer_old.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.2.</b>
                        
                         数据传输协议(老版本)
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.4.3" data-path="software_process/design/editor/client/data_transfer_new.html">
            
                
                    <a href="../../../software_process/design/editor/client/data_transfer_new.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.3.</b>
                        
                         数据传输协议(新版本)
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.5" data-path="software_process/design/EMP/Introduction.html">
            
                
                    <a href="../../../software_process/design/EMP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                         EMP设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.5.1" data-path="software_process/design/EMP/slt2/design_of_slt2_parsing.html">
            
                
                    <a href="../../../software_process/design/EMP/slt2/design_of_slt2_parsing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.1.</b>
                        
                         SLT2脚本解析功能总体设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.2" data-path="software_process/design/EMP/files_security/local_files_security.html">
            
                
                    <a href="../../../software_process/design/EMP/files_security/local_files_security.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.2.</b>
                        
                         客户端文件安全
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.3" data-path="software_process/design/EMP/internationalization.html">
            
                
                    <a href="../../../software_process/design/EMP/internationalization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.3.</b>
                        
                         国际化设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.4" data-path="software_process/design/EMP/screen_adaptation/screen_adaptation.html">
            
                
                    <a href="../../../software_process/design/EMP/screen_adaptation/screen_adaptation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.4.</b>
                        
                         屏幕适配设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.5" data-path="software_process/design/EMP/iOS_5.3_NativeTesting_Design.html">
            
                
                    <a href="../../../software_process/design/EMP/iOS_5.3_NativeTesting_Design.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.5.</b>
                        
                         iOS native测试设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.6" data-path="software_process/design/EMP/Android_5.3_NativeTesting_Design.html">
            
                
                    <a href="../../../software_process/design/EMP/Android_5.3_NativeTesting_Design.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.6.</b>
                        
                         Android native测试设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.7" data-path="software_process/design/EMP/dom_search_optimization_scheme.html">
            
                
                    <a href="../../../software_process/design/EMP/dom_search_optimization_scheme.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.7.</b>
                        
                         DOM查找性能测试及优化方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.8" data-path="software_process/design/EMP/globalcss/css_global_cache.html">
            
                
                    <a href="../../../software_process/design/EMP/globalcss/css_global_cache.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.8.</b>
                        
                         CSS公共样式设计方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.9" data-path="software_process/design/EMP/touch_event/touch_event.html">
            
                
                    <a href="../../../software_process/design/EMP/touch_event/touch_event.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.9.</b>
                        
                         touch event事件监听设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.10" data-path="software_process/design/EMP/multitask/multitask.html">
            
                
                    <a href="../../../software_process/design/EMP/multitask/multitask.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.10.</b>
                        
                         多任务设计文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.11" data-path="software_process/design/EMP/control_lua/Introduction.html">
            
                
                    <a href="../../../software_process/design/EMP/control_lua/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.11.</b>
                        
                         html设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.5.11.1" data-path="software_process/design/EMP/control_lua/metatable_property_degsign.html">
            
                
                    <a href="../../../software_process/design/EMP/control_lua/metatable_property_degsign.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.11.1.</b>
                        
                         lua_property
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.11.2" data-path="software_process/design/EMP/control_lua/radio_checkbox_icon_design.html">
            
                
                    <a href="../../../software_process/design/EMP/control_lua/radio_checkbox_icon_design.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.11.2.</b>
                        
                         radio/checkbox icon
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.11.3" data-path="software_process/design/EMP/control_lua/select_lua_design.html">
            
                
                    <a href="../../../software_process/design/EMP/control_lua/select_lua_design.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.11.3.</b>
                        
                         select增加lua支持
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.5.12" data-path="software_process/design/EMP/design_of_tls_rehandshake.html">
            
                
                    <a href="../../../software_process/design/EMP/design_of_tls_rehandshake.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.12.</b>
                        
                         信道重连设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.13" data-path="software_process/design/EMP/iOS/Introduction.html">
            
                
                    <a href="../../../software_process/design/EMP/iOS/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.13.</b>
                        
                         iOS离线下载网路模块设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.5.13.1" data-path="software_process/design/EMP/iOS/offline/offline_download_websocket_process.html">
            
                
                    <a href="../../../software_process/design/EMP/iOS/offline/offline_download_websocket_process.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.13.1.</b>
                        
                         离线资源websocket下载过程说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.13.2" data-path="software_process/design/EMP/iOS/offline/updatehttpmanager_Instructions.html">
            
                
                    <a href="../../../software_process/design/EMP/iOS/offline/updatehttpmanager_Instructions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.13.2.</b>
                        
                         下载管理器UpdateHTTPManager使用说明
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.5.14" data-path="software_process/design/EMP/iOS/mdap_class_relation.html">
            
                
                    <a href="../../../software_process/design/EMP/iOS/mdap_class_relation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.14.</b>
                        
                         MDAP--iOS类关系图
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.5.15" data-path="software_process/design/EMP/EMP_support_https_list.html">
            
                
                    <a href="../../../software_process/design/EMP/EMP_support_https_list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.15.</b>
                        
                         客户端支持多https信道
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8.6" data-path="software_process/design/EWP/Introduction.html">
            
                
                    <a href="../../../software_process/design/EWP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.</b>
                        
                         EWP设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.6.1" data-path="software_process/design/EWP/design_of_anti_resubmit_service.html">
            
                
                    <a href="../../../software_process/design/EWP/design_of_anti_resubmit_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.1.</b>
                        
                         防重复提交设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.2" data-path="software_process/design/EWP/offline/DD_of_security_optimization.html">
            
                
                    <a href="../../../software_process/design/EWP/offline/DD_of_security_optimization.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.2.</b>
                        
                         离线配置设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.3" data-path="software_process/design/EWP/offline/design_of_refactor.html">
            
                
                    <a href="../../../software_process/design/EWP/offline/design_of_refactor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.3.</b>
                        
                         离线分层设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.4" data-path="software_process/design/EWP/session/design_of_optimization_of_shared_session.html">
            
                
                    <a href="../../../software_process/design/EWP/session/design_of_optimization_of_shared_session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.4.</b>
                        
                         Session共享概要设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.5" data-path="software_process/design/EWP/session/detailed_design_of_shared_session.html">
            
                
                    <a href="../../../software_process/design/EWP/session/detailed_design_of_shared_session.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.5.</b>
                        
                         Session共享详细设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.6" data-path="software_process/design/EWP/EAC/design_of_eac.html">
            
                
                    <a href="../../../software_process/design/EWP/EAC/design_of_eac.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.6.</b>
                        
                         EMP管理平台优化设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.7" data-path="software_process/design/EWP/design_of_client_anti_replaying.html">
            
                
                    <a href="../../../software_process/design/EWP/design_of_client_anti_replaying.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.7.</b>
                        
                         客户端防重放设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="8.6.8" data-path="software_process/design/offline/offline_resource_enhance_to_4.0.html">
            
                
                    <a href="../../../software_process/design/offline/offline_resource_enhance_to_4.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.8.</b>
                        
                         增强版升级离线4.0服务端设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.6.9" data-path="software_process/design/EMP/EWP_support_https_list.html">
            
                
                    <a href="../../../software_process/design/EMP/EWP_support_https_list.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.9.</b>
                        
                         服务端支持多https信道
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="software_process/test/Introduction.html">
            
                
                    <a href="../../../software_process/test/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         测试文档
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.1" data-path="software_process/test/EWP/Introduction.html">
            
                
                    <a href="../../../software_process/test/EWP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                         EWP测试结果
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.1.1" data-path="software_process/test/EWP/httpc_test.html">
            
                
                    <a href="../../../software_process/test/EWP/httpc_test.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.1.</b>
                        
                         HTTPC接口性能测试
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9.1.2" data-path="software_process/test/EWP/session_share_pftest_results.html">
            
                
                    <a href="../../../software_process/test/EWP/session_share_pftest_results.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.2.</b>
                        
                         Session优化性能测试
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9.1.3" data-path="software_process/test/EWP/test_of_anti_resubmit_service.html">
            
                
                    <a href="../../../software_process/test/EWP/test_of_anti_resubmit_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.3.</b>
                        
                         防重复提交功能性能测试
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9.2" data-path="software_process/test/EMP/Introduction.html">
            
                
                    <a href="../../../software_process/test/EMP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                         EMP测试结果
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.2.1" >
            
            <span><b>9.2.1.</b> Android</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="9.2.1.1" data-path="software_process/test/EMP/Android/offline/PresetResourceProcessingV3.0-PerformanceTestReport_1.1.html">
            
                
                    <a href="../../../software_process/test/EMP/Android/offline/PresetResourceProcessingV3.0-PerformanceTestReport_1.1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.1.1.</b>
                        
                         预置离线资源处理V3.0-性能测试报告
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="client_function/Introduction.html">
            
                
                    <a href="../../../client_function/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         客户端其他功能
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.1" data-path="client_function/error_check.html">
            
                
                    <a href="../../../client_function/error_check.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                         错误检测
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="technology_accumulation/Introduction.html">
            
                
                    <a href="../../../technology_accumulation/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         技术积累
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="11.1" data-path="technology_accumulation/Introduction.html">
            
                
                    <a href="../../../technology_accumulation/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                         iOS
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="11.1.1" data-path="technology_accumulation/iOS/schedule.html">
            
                
                    <a href="../../../technology_accumulation/iOS/schedule.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.1.</b>
                        
                         日程安排
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.2" data-path="technology_accumulation/iOS/technical_points/loop_reference.html">
            
                
                    <a href="../../../technology_accumulation/iOS/technical_points/loop_reference.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.2.</b>
                        
                         循环引用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.3" data-path="technology_accumulation/iOS/technical_points/table_cell_reuse.html">
            
                
                    <a href="../../../technology_accumulation/iOS/technical_points/table_cell_reuse.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.3.</b>
                        
                         tableCell重用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.4" data-path="technology_accumulation/iOS/advanced_technology/3DTouch.html">
            
                
                    <a href="../../../technology_accumulation/iOS/advanced_technology/3DTouch.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.4.</b>
                        
                         3DTouch
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.5" data-path="technology_accumulation/iOS/advanced_technology/cordova.html">
            
                
                    <a href="../../../technology_accumulation/iOS/advanced_technology/cordova.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.5.</b>
                        
                         cordova
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.6" data-path="technology_accumulation/iOS/advanced_technology/touchID.html">
            
                
                    <a href="../../../technology_accumulation/iOS/advanced_technology/touchID.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.6.</b>
                        
                         touchID
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11.1.7" data-path="technology_accumulation/iOS/advanced_technology/watchOS.html">
            
                
                    <a href="../../../technology_accumulation/iOS/advanced_technology/watchOS.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.7.</b>
                        
                         watchOS
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown">下载</a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                
                <a href="/emp/inner_docs/inner_docs.zip" class="button">html</a>
                
                
                <a href="/emp/inner_docs/book.pdf" class="button">pdf</a>
                
                
                <a href="" class="button">epub</a>
                
            </div>
        </div>
    </div>

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../" >产品文档</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_91">
                    
                        <h1 id="增强版升级离线40服务端设计">增强版升级离线4.0服务端设计</h1>
<!-- toc -->
<ul>
<li><a href="#需求">需求</a></li>
<li><a href="#网络传输优化">网络传输优化</a><ul>
<li><a href="#离线资源更新描述">离线资源更新描述</a><ul>
<li><a href="#离线资源变更-服务端处理">离线资源变更-服务端处理</a></li>
<li><a href="#管理后台-测试接口">管理后台-测试接口</a></li>
</ul>
</li>
<li><a href="#离线资源下载">离线资源下载</a><ul>
<li><a href="#外部接口变更">外部接口变更</a></li>
<li><a href="#服务端内部变更">服务端内部变更</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#实时更新">实时更新</a></li>
<li><a href="#交行离线升级方案设计">交行离线升级方案设计</a><ul>
<li><a href="#离线版本hash追加时间信息">离线版本hash追加时间信息</a></li>
<li><a href="#离线资源备份回退功能">离线资源备份、回退功能</a><ul>
<li><a href="#离线资源备份">离线资源备份</a></li>
<li><a href="#离线资源回退">离线资源回退</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#离线40加强版-附录">离线4.0加强版-附录</a><ul>
<li><a href="#span-id-localdesc服务端本地描述内容span"><span id = "local_desc">服务端本地描述内容</span></a></li>
<li><a href="#span-id-updatedesc服务端返回描述内容span"><span id = "update_desc">服务端返回描述内容</span></a></li>
<li><a href="#span-id-presetdesc预置资源描述内容span"><span id = "preset_desc">预置资源描述内容</span></a></li>
</ul>
</li>
<li><a href="#版本历史">版本历史</a></li>
</ul>
<!-- toc stop -->
<h2 id="需求">1 需求</h2>
<p>根据<a href="http://dev.rytong.me/emp/inner_docs/software_process/requirement/offline/offline4.0_supplement.html" target="_blank">离线资源优化需求</a>提出的需求，在EWP5.3增强版上开发对应的功能。  </p>
<h2 id="网络传输优化">2 网络传输优化</h2>
<h3 id="离线资源更新描述">2.1 离线资源更新描述</h3>
<h4 id="离线资源变更-服务端处理">2.1.1 离线资源变更-服务端处理</h4>
<p>通过<code>管理后台</code>或<code>脚本</code>上传、删除离线资源的方式不变，在有离线资源改变时，在生成最新的描述文件后，将描述文件复制一份保存起来，并将所有的旧版本描述文件与最新版本描述文件比对，生成更新描述，在客户端每次请求时，将客户端当前对应的版本更新描述返回给客户端。这样处理之后，旧版本描述文件要有<code>可持久化</code>功能和<code>清理策略</code>。  </p>
<h5 id="描述文件和更新描述管理">2.1.1.1 描述文件和更新描述管理</h5>
<p>根据需求，服务端将以描述文件内的资源类型hash值作为版本号，去找到服务器中保存的对应的版本更新描述（更新描述是新旧描述文件版本比对出来的差异），并返回给客户端，在服务器追加了旧描述文件保存和比对处理。<br>描述文件处理的新增接口名：gen_update_desc。  </p>
<p>gen_update_desc程序流程图：<br><img src="images/update_desc_start.png" alt="gen_update_desc程序流程图"><br>服务端将旧版本描述文件与最新描述文件做比对，生成更新描述文件update.desc，更新描述文件路径以erlang terms格式保存在文件名为old_desc.property的文件中。<br>gen_update_desc具体逻辑如下图：
<img src="images/gen_update_desc.png" alt="property文件生成逻辑图"><br>平台描述文件新旧版本比对如下图：</p>
<blockquote>
<p>注：由于common资源相对于其他平台(android/iphone/wp/qt)资源的特殊性，现假设服务器只有common资源和android资源
android新版本描述文件用A_new表示
android旧版本描述文件用A_old表示
common新版本描述文件用C_new表示
common旧版本描述文件用C_old表示</p>
</blockquote>
<p><img src="images/desc_compare.png" alt="比对结构图"> 
旧描述文件和更新描述保存在离线资源路径&quot;public/resources/old_desc&quot;、&quot;public/resources/old_sca_desc&quot;下，原描述文件存放路径保持不变。  </p>
<ul>
<li>&quot;旧版本在old_desc&quot;下目录结构：<code>AppName/平台/分辨率/时间戳/旧描述文件.desc</code>    </li>
<li>&quot;旧版本在old_sca_desc&quot;下目录结构：<code>AppName/平台/分辨率/时间戳/旧描述文件.desc</code>  </li>
<li>&quot;更新描述在old_desc&quot;下目录结构：<code>AppName/平台/分辨率/时间戳/分辨率/update.desc</code>    </li>
<li>&quot;更新描述在old_sca_desc&quot;下目录结构：<code>AppName/平台/分辨率/时间戳/分辨率/update.desc</code>  </li>
</ul>
<p>在<code>AppName/平台/</code>结构下，生成一个old_desc.property，用来统一管理更新描述的离线文件。</p>
<ul>
<li>old_desc.property内容格式：是以<code>[{key1, path1, time1}, {key2, path2, time2}].</code>这种Erlang term格式保存。  <ul>
<li>key：描述文件内的hash值。   </li>
<li>path：旧描述文件的绝对路径。  </li>
<li>time：旧版本描述文件内的时间戳。    </li>
</ul>
</li>
</ul>
<pre><code>old_desc.property
[{&quot;60f913dd99d7a2b472243baa1d2a4c30c56ec708&quot;, 
  &quot;/var/www/apps/unit-test/public/resources/desc/update_desc/common/320-480/1452438709/320-480/update.desc&quot;, 
  &quot;1452438709&quot;},
 {&quot;9d2f191dc23a2c3a0061e8f64a739211197466f8&quot;, 
  &quot;/var/www/apps/unit-test/public/resources/desc/update_desc/android/320-480/1452439209/320-480/update.desc&quot;, 
  &quot;1452439209&quot;},
  ...
].
</code></pre><h5 id="清理策略">2.1.1.2 清理策略</h5>
<p>根据<code>版本个数(desc_maximum)</code>和<code>时间(desc_expiry)</code>两个因素共同确定，满足任意条件即可删除符合条件的更新描述。<br>在<code>ewp.conf</code>的<code>offline</code>配置项中，追加<code>update_desc</code>字段，<code>desc_maximum</code>单位：个，<code>desc_expiry</code>单位：分钟。<br>创建一个gen_server，模块名：regular_clear_up，在初始化时，启动一个定时器，每10分钟执行一次清理机制。<br>在ewp_sup模块，追加regular_clear_up默认启动。  </p>
<ul>
<li><code>时间</code>清理策略：根据配置时间，获取分辨率目录级别下的时间戳目录列表，删除超过配置时长的时间戳目录。</li>
<li><code>版本个数</code>清理策略：根据配置版本个数，获取分辨率目录级别下的时间戳目录列表，删除时间较早的超过规定个数的对应的时间戳目录。  </li>
</ul>
<p>更新策略流程图：<br><img src="images/ewp_desc_server.png" alt="更新策略逻辑">  </p>
<h4 id="管理后台-测试接口">2.1.2 管理后台-测试接口</h4>
<p>在管理后台-离线资源配置页面，追加“修改网络阈值”、“修改清理更新描述的策略”、“更新描述版本查看”功能。<br>在<code>离线资源配置</code>页面追加这三项配置的修改处理。<br>“修改网络阈值”：可以修改不同网络环境的阈值。<br>“修改清理更新描述的策略”：可修改<code>版本个数(desc_maximum)</code>和<code>时间(desc_expiry)</code>，并有<code>立即执行清理策略</code>的功能。<br>“更新描述版本查看”：可以查看当前所有版本的旧描述  </p>
<h3 id="离线资源下载">2.2 离线资源下载</h3>
<p>修改后的大致流程如下：  </p>
<p><img src="images/resource_update_flow_chart.png" alt="离线资源更新程序流程图">  </p>
<h4 id="外部接口变更">2.2.1 外部接口变更</h4>
<p>离线4.0以后，由于交互流程的改变，请求的参数也做了一些调整。<strong>离线3版本以前的参数不变</strong><br>建立信道时(exchange和handshake)，客户端的参数：  </p>
<ul>
<li>URL中的参数：  <ul>
<li>离线版本： res_ver (1.0/2.0/2.1/3.0/4.0)  </li>
<li>平台： platform  </li>
<li>分辨率： resolution  </li>
<li>客户端网络状态 network (2G/3G/4G/WIFI/UNKNOWN/自定义)  </li>
</ul>
</li>
<li>body中的参数：  <ul>
<li>EWP必选S值： hash  </li>
<li>EWP可选S值： option_hash  </li>
<li>H5必选S值： h5_hash  </li>
</ul>
</li>
</ul>
<p>信道建立后，再请求resource_update接口的参数，保存在body里：  </p>
<ul>
<li>离线版本： version (1.0/2.0/2.1/3.0/4.0)  </li>
<li>平台： platform  </li>
<li>分辨率： resolution  </li>
<li>多AppName： from  </li>
<li>EWP必选S值： hash  </li>
<li>EWP可选S值： option_hash  </li>
<li>H5必选S值： h5_hash  </li>
<li>信道建立后不带“客户端网络状态”参数。  </li>
</ul>
<p>resource_update接口的返回内容也有部分变更。<br>离线4以后，需要将<code>resource_hash</code>的一些特殊字段<code>&quot;st&quot;</code>，整合到<code>resource_update</code>里面。<br><code>&quot;st&quot;</code>：安全传输的方式，0/1/2/3。<br><code>&quot;cd&quot;</code>：contain desc，在建立信道流程中，返回描述的大小超过了服务器配置的阈值时，则会有<code>cd</code>字段，0表示超过阈值，1表示未超过阈值（为1时没有该字段）。<br><code>&quot;tu&quot;</code>：全量更新，比如，客户端必选资源与服务端完全不一致，就包含此字段，<code>&quot;l&quot;</code>字段内的资源列表就是当时服务端上的所有必选资源。为1表示全量更新；为0表示非全量（为0时没有该字段）</p>
<pre><code>{
    &quot;h&quot;:&quot;http://127.0.0.1:4002/&quot;,   //http下载地址
    &quot;w&quot;:&quot;ws://192.168.64.220:4004&quot;, //Websocket下载地址
    &quot;t&quot;:4060,   //tcp下载端口
    &quot;m&quot;:0,      //资源更新提示方式。0为提示可选更新，1为提示强制更新，-1为不更新
    &quot;st&quot;:0,     //安全传输的方式
    &quot;cd&quot;:0      //本次更新是否包含更新描述
}
</code></pre><p>服务端返回描述新增字段有：<code>&quot;st&quot;</code>、<code>&quot;cd&quot;</code>、<code>&quot;tu&quot;</code>、<code>&quot;od&quot;</code>。  </p>
<ul>
<li><code>&quot;st&quot;</code>、<code>&quot;cd&quot;</code>只出现在返回描述的最外层。  </li>
<li><code>&quot;tu&quot;</code>出现在四种离线资源类型的外层。如<code>&quot;l&quot;:{&quot;tu&quot;:1 ...}</code>、<code>&quot;o&quot;:{&quot;tu&quot;:1 ...}</code>  </li>
<li><code>&quot;od&quot;</code>表示可选资源的删除内容，与<code>&quot;d&quot;</code>、<code>&quot;h5_d&quot;</code>内容格式相同。  </li>
</ul>
<p>带有&quot;描述文件&quot;的返回描述，请参考<a href="#update_desc">增强版-服务端返回描述内容</a><br>预置资源描述，请参考<a href="#preset_desc">增强版-预置资源描述内容</a>  </p>
<h4 id="服务端内部变更">2.2.2 服务端内部变更</h4>
<h5 id="resourceupdate">2.2.2.1 resource_update</h5>
<p>目前<code>resource_update</code>接口有8和9个参数两种。离线4版本以后，在后面追加一个参数<code>ResHashes</code>。  </p>
<pre><code>resource_update(..., ResHashes) -&gt; {obj, Lists}

Types:
    ResHashes = {Hash :: list(), OptHash :: list()}
    Network = 2G/3G/4G/WIFI/UNKNOWN/自定义 :: list()
    自定义:项目组可根据实际情况自行扩展网络类型，但必须与客户端传送的参数相同
    Lists = [{Key :: list(), Value :: term()}, ...]
</code></pre><p>resource_update公共处理 如下：<br><img src="images/resource_update_normal_to4.0.png" alt="resource_update公共处理">  </p>
<p>需要注意的是：<br>可选资源现在的处理与必选资源插件包的规则一样，只返回应该更新的部分，而不是完整的插件包。<br>对于确保更新&quot;u&quot;字段，如果整个包所有资源都是确保更新的内容，则无需在&quot;c&quot;字段带有&quot;u&quot;，而是写在与&quot;c&quot;同级的地方。  </p>
<p>服务端本地描述文件，请参考<a href="#local_desc">增强版-服务端本地描述内容</a>  </p>
<h5 id="自定义网络环境配置">2.2.2.2 自定义网络环境配置</h5>
<p>在<code>ewp.conf</code>的<code>offline</code>配置项中，追加<code>network</code>字段，表示配置网络环境支持返回描述的最大阈值。  </p>
<pre><code>{offline, [
    {network, [{&quot;2G&quot;, 50},          %% 网络类型必须与客户端参数相同，
               {&quot;3G&quot;, 200},         %% 数值单位：Kb，
               {&quot;4G&quot;, 1024},        %% 若没有与客户端匹配的值，
               {&quot;WIFI&quot;, 10240},     %% 则使用default，若没配置
               {&quot;UNKNOWN&quot;, 100},    %% 使用系统默认值100K。
               {自定义Key, Value}, 
               {default, 100}
              ]},
    ...
]}.
</code></pre><p>此配置内容，用于客户端建立信道时，找出参数Network对应的返回描述的最大阈值。<br>若Network的值在配置中匹配不到，则使用默认值。默认值为：<code>default</code>对应的配置，若没配置则使用系统默认值100k；若Network取值为<code>undefined</code>，即客户端没有传网络环境的参数，这种情况为建立信道以外的resource_update请求，不用判断阈值，直接返回对应的返回描述。</p>
<h2 id="实时更新">3 实时更新</h2>
<p>追加实时请求离线文件接口<code>ota/rt_resource</code>，&quot;real time resource&quot;。<br>为使得客户端能够准确的找到请求的文件，请求参数如下：  </p>
<ul>
<li>离线版本： version (1.0/2.0/2.1/3.0/4.0)  </li>
<li>平台： platform  </li>
<li>分辨率： resolution  </li>
<li>多AppName： from  </li>
<li>资源类型：filetype 参数值：ewp/h5</li>
<li>文件名： filename  </li>
</ul>
<p>功能介绍：<br>此接口的查找范围只限于离线资源。查找资源路径优先级：平台分辨率相符 &gt; 相同平台相近分辨率 &gt; common路径。<br>确认资源路径后，就可以根据filetype、filename去查找资源了。对于插件类型的资源来说filename是一个相对路径，而普通资源则是单纯一个文件名，所以可以借此方式，来判断普通、插件类型的资源，这样就可以直接拼路径找到客户端想要的文件了。<br>尽管如此，在实际项目开发中，<strong>尽量避免同名资源的出现</strong>。  </p>
<h2 id="交行离线升级方案设计">4 交行离线升级方案设计</h2>
<h3 id="离线版本hash追加时间信息">4.1 离线版本hash追加时间信息</h3>
<p><code>ewp_resource:gen_desc</code><br>生成描述文件处理变更：在1版本描述文件，追加&quot;utc&quot;字段，表示生成描述时的时间戳。获取时间戳方法：ewp_time:utc()，保存成字符串类型。<br><code>ewp_resource:resource_update</code>：离线4版本分支<br>更新描述判断逻辑变更：修改<code>get_updesc</code>函数处理，追加客户端请求s值的时间戳判断。先验证s值是否符合长度(合法长度：国密64位，国密+时间戳74位，非国密40位，非国密+时间戳50位)。获取s值的时间戳，与最新描述文件的&quot;utc&quot;时间戳比较。若s值比服务端的新，则该字段不需要更新；若s值比服务端的旧或相等(在服务端或客户端缺少时间戳的情况下：描述文件中无&quot;utc&quot;字段，而s值中有时间戳，视为比服务端新；其余情况视为比服务端旧)，则继续对比后续的hash值。<br>更新描述返回内容变更：每个离线资源类型的s字段追加后缀，内容为当前描述文件的&quot;utc&quot;时间戳。  </p>
<h3 id="离线资源备份回退功能">4.2 离线资源备份、回退功能</h3>
<h4 id="离线资源备份">4.2.1 离线资源备份</h4>
<p>此功能是通过脚本触发，由于此功能使用频率不高，可以设计成：将所有离线资源压缩成一个zip包，保存到指定路径。<br>追加ewp_ctrl脚本指令：&quot;backup_res&quot;。<br>参数：  </p>
<pre><code>-a app名称，必传。
-s app节点名称，如果节点名称不为ewp_production则需要输入此参数。
-f 指定备份后的压缩包文件名。
-p 指定备份路径。
</code></pre><p>当不传&quot;f&quot;或&quot;p&quot;参数时，默认的压缩包文件名为：<code>res_backup_系统时间.zip</code>，系统时间取方法：<code>ewp_time:datetime_str()</code>；默认的备份路径为：<code>AppPath/public/resources_backup</code>。<br>资源备份逻辑：将<code>AppPath/public/resources</code>路径下除了<code>old_desc</code>、<code>old_sca_desc</code>，其余压缩成zip包，保存在指定路径。  </p>
<h4 id="离线资源回退">4.2.2 离线资源回退</h4>
<p>通过脚本触发，将回退的指定版本的离线zip包解压到离线资源路径下，并重新生成全部离线资源的描述文件。<br>追加ewp_ctrl脚本指令：&quot;restore_res&quot;。  </p>
<pre><code>-a app名称，必传。
-s app节点名称，如果节点名称不为ewp_production则需要输入此参数。
-f 指定需要恢复到某一版本的备份文件名(绝对路径)，必传。
</code></pre><p>资源恢复逻辑：删除<code>AppPath/public/resources</code>路径下除了<code>old_desc</code>、<code>old_sca_desc</code>的所有文件，将指定备份文件解压到<code>AppPath/public</code>下恢复指定版本，重新生成一次描述文件。  </p>
<h2 id="离线40加强版-附录">5 离线4.0加强版-附录</h2>
<h3 id="span-id-localdesc服务端本地描述内容span">5.1 <span id = "local_desc">服务端本地描述内容</span></h3>
<pre><code>{   &quot;utc&quot;:&quot;1457347935&quot;, //表示生成描述时的时间戳 离线4增强版新增字段，
    &quot;hash&quot;:&quot;126df75ebaeed200ab5aa2abe2e5f1c6c4859091&quot;,
    &quot;hash_4&quot;:&quot;6c1e951cd21b6227d91241b5a03caee1d6e311c5&quot;, //ewp必选资源哈希值 离线4增强版新增字段
    &quot;h5_hash&quot;:&quot;794c3569fe9219f93508efd0c5a5b58171bd804a&quot;, //h5必选资源哈希值 离线4增强版新增字段
    &quot;hash_opt&quot;:&quot;ee98e6467da4964a3c0081f80fed6b879a707100&quot;,
    &quot;l&quot;: { //必选下载资源描述
        &quot;home.html&quot;: {
            &quot;e&quot;: 0, //加密标记，0为不加密，1为加密。默认为0
            &quot;r&quot;: &quot;ad4d26cc1dcc7210b6f7…&quot;, // 文件哈希值
            &quot;p&quot;: &quot;iphone/320*480/html&quot;, // 文件存放相对路径
            &quot;u&quot;: 1//确保更新标记。1为确保，反之为0。默认为0
            &quot;n&quot;: &quot;普通资源说明&quot;
        },
        &quot;home.zip&quot;: {
            &quot;r&quot;: &quot;ad4d26cc1dcc7210b6f7…&quot;,
            &quot;p&quot;: &quot;common/zip&quot;,
            &quot;e&quot;: 0,
            &quot;n&quot;: &quot;普通资源说明&quot;
            &quot;c&quot;: { //插件资源包里的各资源描述
                &quot;home/index.xhtml&quot;: {
                    &quot;r&quot;:&quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;,
                    &quot;u&quot;: 1
                },
                &quot;home/hello.xhtml&quot;: {
                    &quot;r&quot;:&quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                },
                ......
            }
        },
        ...
    },
    &quot;o&quot;: { //可选下载资源描述，格式与必选资源相同
        &quot;home.zip&quot;: {
            &quot;p&quot;: &quot;common/zip&quot;,
            &quot;r&quot;: &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;,
            &quot;e&quot;:0,
            &quot;n&quot; : &quot;插件包说明&quot;
            &quot;u&quot;: 1, //当整个插件包全为确保更新，与&quot;c&quot;同级。 
            &quot;c&quot;: { //插件资源包里的各资源描述
                &quot;home/index.xhtml&quot;: {
                    &quot;r&quot;:&quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                },
                ......
            }
        },
        ...
    },
    &quot;h5&quot;: { //h5 必选资源描述
        &quot;path/file1&quot; : { // 如: &quot;demo/img/welcome.png&quot;
            &quot;p&quot; : &quot;h5&quot;,  // h5 普通资源路径，固定值&quot;h5&quot;
            &quot;mime&quot; : MimeType,  // 如: &quot;text/plain&quot;、&quot;image/png&quot;...
            &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;,
            &quot;e&quot; : 1,  //1,加密, 0,不加密 默认为0,且如果为默认,则省略此字段
            &quot;u&quot; : 1,  //1,确保更新, 0,非确保更新 默认为0,且如果为默认,则省略此字段
            &quot;n&quot; : &quot;普通资源说明&quot;
        },
        ......//其他 h5 必选资源
    }
}
</code></pre><h3 id="span-id-updatedesc服务端返回描述内容span">5.2 <span id = "update_desc">服务端返回描述内容</span></h3>
<pre><code>{
    &quot;h&quot;:&quot;http://127.0.0.1:4002/&quot;,   //http下载地址
    &quot;w&quot;:&quot;ws://192.168.64.220:4004&quot;, //Websocket下载地址
    &quot;t&quot;:4060,   //tcp下载端口
    &quot;m&quot;:0,      //资源更新提示方式。0为提示可选更新，1为提示强制更新，-1为不更新
    &quot;st&quot;:0,     //安全传输的方式
    &quot;l&quot; :       //必选下载资源描述
    {
        &quot;s&quot;:&quot;21468cbc6559727548342f5c6fa0915c01a6a1ea&quot;,
        //必选资源hash 服务端计算的必选下载资源描述的哈希值，
        //客户端将该哈希值保存，作为建立信道、ota/resource_update接口参数使用。
        &quot;tu&quot;:1, //是否全量更新，1表示全量更新；0表示非全量更新；为0时没有该字段
        &quot;file_path&quot;:    //普通资源路径,如&quot;ebank/resources/common/txt&quot;
        {
            &quot;file1&quot;:
            {
                &quot;r&quot;:&quot;6c6046e40e1e582529eeceec680fd573a2275f78&quot;,
                &quot;e&quot;:1,      //1,加密, 0,不加密 默认为0,为0时省略此字段
                &quot;u&quot;:1,      //1,确保更新, 0,非确保更新 
                            //默认为0,且如果为默认,则省略此字段
                &quot;n&quot; : &quot;普通资源说明&quot;
            }
        },
        &quot;zip_path&quot;:     //插件资源路径,如&quot;ebank/resources/common/zip&quot;
        {
            &quot;zip1.zip&quot; : //zip包中部分文件的更新 如: account.zip
            {
                &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                &quot;e&quot; : 1   //1,加密, 0,不加密 默认为0,且如果为默认,则省略此字段
                &quot;n&quot; : &quot;插件包说明&quot;
                &quot;a&quot; : 1,  //是否下载整个zip包，1为是，0为否。
                          //默认为1, 且如果为默认,则省略此字段。
                &quot;c&quot; :     //需要下载文件的列表
                {
                    &quot;file1&quot; :   //file1为相对于zip1的相对路径,
                                //如: account/xhtml/index.xml
                    {
                        &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                        &quot;u&quot;: 1      //1,确保更新, 0,非确保更新 
                                    //默认为0,且如果为默认,则省略此字段
                    }
                }
            }
        },
        ...     //其他EWP必选资源
    },

    &quot;d&quot; :       //EWP删除资源描述
    [
        {&quot;zip1.zip&quot; :
            [
                &quot;file3&quot;,
                &quot;file4&quot;
            ]
        },
        &quot;file5&quot;,
        &quot;file6&quot;,
        &quot;zip2.zip&quot;
    ],

    &quot;o&quot; : {     //可选下载资源描述
        &quot;s&quot;:&quot;21468cbc6559727548342f5c6fa0915c01a6a1ea&quot;,
        //可选资源hash 服务端计算的可选下载资源描述的哈希值，
        //客户端将该哈希值保存，作为建立信道、ota/resource_update接口参数使用。
        &quot;tu&quot;:1, //是否全量更新，1表示全量更新；0表示非全量更新；为0时没有该字段
        &quot;zip_path&quot;:     //插件资源路径,如&quot;ebank/resources/common/zip&quot;
        {
            &quot;zip1.zip&quot; : //zip包中部分文件的更新 如: account.zip
            {
                &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                &quot;e&quot; : 1   //1,加密, 0,不加密 默认为0,且如果为默认,则省略此字段
                &quot;n&quot; : &quot;插件包说明&quot;
                &quot;a&quot; : 1,  //是否下载整个zip包，1为是，0为否。
                          //默认为1, 且如果为默认,则省略此字段。
                &quot;c&quot; :     //需要下载文件的列表
                {
                    &quot;file1&quot; :   //file1为相对于zip1的相对路径,
                                //如: account/xhtml/index.xml
                    {
                        &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                        &quot;u&quot; : 1      //1,确保更新, 0,非确保更新 
                                     //默认为0,且如果为默认,则省略此字段
                    }
                }
            }
        },
        ...     //其他EWP可选资源
    },

    &quot;od&quot; :       //EWP可选资源删除资源描述
    [
        {&quot;zip1.zip&quot; :
            [
                &quot;file3&quot;,
                &quot;file4&quot;
            ]
        },
        &quot;zip2.zip&quot;
    ],

    &quot;h5&quot; :      //本地H5必选下载资源描述
    {
        &quot;s&quot;:&quot;21468cbc6559727548342f5c6fa0915c01a6a1ea&quot;,
        //H5必选资源hash 服务端计算的可选下载资源描述的哈希值，
        //客户端将该哈希值保存，作为建立信道、ota/resource_update接口参数使用。
        &quot;tu&quot;:1, //是否全量更新，1表示全量更新；0表示非全量更新；为0时没有该字段
        &quot;h5&quot;:           // h5 普通资源路径，固定值&quot;h5&quot;
        {
            &quot;file1&quot; :   // h5的普通资源中,可以包含资源路径,如:&quot;mobs/html/main.html&quot;
            {
                &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                &quot;e&quot; : 1 //1,加密, 0,不加密 默认为0,且如果为默认,则省略此字段
                &quot;u&quot; : 1 //1,确保更新, 0,非确保更新 
                        //默认为0,且如果为默认,则省略此字段
                &quot;mime&quot; : MimeType,  // 如: &quot;text/plain&quot;、&quot;image/png&quot;...
                &quot;n&quot; : &quot;普通资源说明&quot;
            },
            ......//其他 h5 普通资源
        }
    },

    &quot;h5_d&quot; :       //本地H5必选资源删除描述
    [
        &quot;file5&quot;,
        &quot;file6&quot;
    ]

}
</code></pre><h3 id="span-id-presetdesc预置资源描述内容span">5.3 <span id = "preset_desc">预置资源描述内容</span></h3>
<pre><code>{   
    &quot;l&quot; : { //EWP必选资源描述
        &quot;s&quot;:&quot;21468cbc6559727548342f5c6fa0915c01a6a1ea&quot;,
        //必选资源hash 服务端计算的必选下载资源描述的哈希值，
        //客户端将该哈希值保存，作为建立信道、ota/resource_update接口参数使用。
        &quot;file_path&quot;:    //普通资源路径,如&quot;ebank/resources/common/txt&quot;
        {
            &quot;file1&quot;:
            {
                &quot;r&quot;:&quot;6c6046e40e1e582529eeceec680fd573a2275f78&quot;,
                &quot;e&quot;:1,      //1,加密, 0,不加密 默认为0,为0时省略此字段
                &quot;n&quot; : &quot;普通资源说明&quot;
            }
        },
        &quot;zip_path&quot;:     //插件资源路径,如&quot;ebank/resources/common/zip&quot;
        {
            &quot;zip1.zip&quot; : //zip包中部分文件的更新 如: account.zip
            {
                &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                &quot;e&quot; : 1   //1,加密, 0,不加密 默认为0,且如果为默认,则省略此字段
                &quot;n&quot; : &quot;插件包说明&quot;
                &quot;c&quot; :     //需要下载文件的列表
                {
                    &quot;file1&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                }
            }
        },
        ...     //其他EWP必选资源
    },
    &quot;p&quot; : { //预置EWP可选资源描述，下载预置资源包时，选择下载可选资源，有此内容。
        &quot;zip2.zip&quot; : 
        {
           &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
           &quot;e&quot; : 1 //如果不需要加密存储,则没有此字段
           &quot;c&quot; : 
           {
                &quot;file1&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
           }
        }
    },
    &quot;o&quot;: { //EWP可选资源描述
        &quot;w&quot; : &quot;ws://192.168.64.220:4004&quot;, //Websocket下载地址
        &quot;t&quot; : 4060, //tcp下载端口
        &quot;s&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
        &quot;dir1&quot; :  //如: ebank/resources/common/zip
        {
            &quot;zip1.zip&quot; : //zip包中部分文件的更新 如: account.zip
            {
                &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                &quot;n&quot; : &quot;插件包说明&quot;
                &quot;c&quot; : //需要下载文件的列表
                {
                    &quot;file1&quot; :   //file1为相对于zip1的相对路径,如: account/xhtml/index.xml
                    {
                        &quot;r&quot; : &quot;c4f3cffb7d68e63531c60e74611a2d2f569173e7&quot;
                        &quot;u&quot; : 1  //1,确保更新, 0,非确保更新 默认为0,且如果为默认,则省略此字段
                    }
                }
            }
        }
    },
    &quot;h5&quot; : //预置h5必选下载资源描述
    {
        &quot;s&quot;:&quot;21468cbc6559727548342f5c6fa0915c01a6a1ea&quot;,
        //必选资源hash 服务端计算的必选下载资源描述的哈希值，
        //客户端将该哈希值保存，作为建立信道、ota/resource_update接口参数使用。
        &quot;file_path&quot;:    //普通资源路径,如&quot;ebank/resources/common/txt&quot;
        {
            &quot;file1&quot;:
            {
                &quot;r&quot;:&quot;6c6046e40e1e582529eeceec680fd573a2275f78&quot;,
                &quot;e&quot;:1,      //1,加密, 0,不加密 默认为0,为0时省略此字段
                &quot;mime&quot; : MimeType  // 新增 如: &quot;text/plain&quot;、&quot;image/png&quot;...
                &quot;n&quot; : &quot;普通资源说明&quot;
            }
        },
        ...     //其他H5必选资源
    }
}
</code></pre><h2 id="版本历史">6 版本历史</h2>
<table>
<thead>
<tr>
<th>版本号</th>
<th>日期</th>
<th>作者</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>v1.0.0</td>
<td>2016.01.19</td>
<td>于鑫(yu.xin1)</td>
<td>初稿(半成品)</td>
</tr>
<tr>
<td>v1.0.1</td>
<td>2016.01.20</td>
<td>于鑫(yu.xin1)</td>
<td>完善服务端内部设计</td>
</tr>
<tr>
<td>v1.0.2</td>
<td>2016.02.21</td>
<td>于鑫(yu.xin1)</td>
<td>离线优化-离线版本时间戳方案</td>
</tr>
<tr>
<td>v1.0.3</td>
<td>2016.03.29</td>
<td>曾永伟(zeng.yongwei)</td>
<td>完善服务端内部设计</td>
</tr>
</tbody>
</table>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../../software_process/design/EWP/design_of_client_anti_replaying.html" class="navigation navigation-prev " aria-label="Previous page: 客户端防重放设计"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../../software_process/design/EMP/EWP_support_https_list.html" class="navigation navigation-next " aria-label="Next page: 服务端支持多https信道"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
