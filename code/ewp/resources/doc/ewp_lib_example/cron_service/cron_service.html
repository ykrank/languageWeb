<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>cron_service | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.3.4">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../cs_api/cs_api.html" />
    
    
    <link rel="prev" href="../index.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="1" data-basepath=".." data-revision="1463048530419">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="1" data-path="cron_service/cron_service.html">
            
                
                    <a href="../cron_service/cron_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         cron_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="cs_api/cs_api.html">
            
                
                    <a href="../cs_api/cs_api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         cs_api
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="evo/evo.html">
            
                
                    <a href="../evo/evo.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         evo
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="ewp_adapter/ewp_adapter.html">
            
                
                    <a href="../ewp_adapter/ewp_adapter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         ewp_adapter
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="ewp_app_manager/ewp_app_manager.html">
            
                
                    <a href="../ewp_app_manager/ewp_app_manager.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         ewp_app_manager
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="ewp_channel_util/ewp_channel_util.html">
            
                
                    <a href="../ewp_channel_util/ewp_channel_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         ewp_channel_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="ewp_conf_util/ewp_conf_util.html">
            
                
                    <a href="../ewp_conf_util/ewp_conf_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         ewp_conf_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="ewp_file_util/ewp_file_util.html">
            
                
                    <a href="../ewp_file_util/ewp_file_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         ewp_file_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="ewp_http_client/ewp_http_client.html">
            
                
                    <a href="../ewp_http_client/ewp_http_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         ewp_http_client
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="ewp_json/ewp_json.html">
            
                
                    <a href="../ewp_json/ewp_json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         ewp_json
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="ewp_params/ewp_params.html">
            
                
                    <a href="../ewp_params/ewp_params.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         ewp_params
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="ewp_pubsub_service/ewp_pubsub_service.html">
            
                
                    <a href="../ewp_pubsub_service/ewp_pubsub_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         ewp_pubsub_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="ewp_render_util/ewp_render_util.html">
            
                
                    <a href="../ewp_render_util/ewp_render_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         ewp_render_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="ewp_str_util/ewp_str_util.html">
            
                
                    <a href="../ewp_str_util/ewp_str_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         ewp_str_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="ewp_time/ewp_time.html">
            
                
                    <a href="../ewp_time/ewp_time.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         ewp_time
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="ewp_unicode/ewp_unicode.html">
            
                
                    <a href="../ewp_unicode/ewp_unicode.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         ewp_unicode
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="ewp_util/ewp_util.html">
            
                
                    <a href="../ewp_util/ewp_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         ewp_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="18" data-path="ewp_yaws_util/ewp_yaws_util.html">
            
                
                    <a href="../ewp_yaws_util/ewp_yaws_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                         ewp_yaws_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="19" data-path="push/push.html">
            
                
                    <a href="../push/push.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                         push
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="20" data-path="session_service/session_service.html">
            
                
                    <a href="../session_service/session_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                         session_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="21" data-path="xml_eng/xml_eng.html">
            
                
                    <a href="../xml_eng/xml_eng.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                         xml_eng
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="22" data-path="define/define.html">
            
                
                    <a href="../define/define.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                         宏定义
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown">下载</a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                
                <a href="/emp/ewp_lib_example/ewp_lib_example.zip" class="button">html</a>
                
                
                <a href="/emp/ewp_lib_example/book.pdf" class="button">pdf</a>
                
                
            </div>
        </div>
    </div>

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_2">
                    
                        <h1 id="module-cronservice">Module cron_service</h1>
<!-- toc -->
<ul>
<li><a href="#介绍">介绍</a></li>
<li><a href="#举例">举例</a><ul>
<li><a href="#loadtaskfromlist">load_task_from_list</a></li>
<li><a href="#loadtaskfromfile">load_task_from_file</a></li>
<li><a href="#loadtask">load_task</a></li>
<li><a href="#canceltask-selectbyname">cancel_task &amp; select_by_name</a></li>
<li><a href="#list">list</a></li>
<li><a href="#restarttask">restart_task</a></li>
<li><a href="#startlink">start_link</a></li>
</ul>
</li>
</ul>
<!-- toc stop -->
<h2 id="介绍">1 介绍</h2>
<p>在特定的项目场景中可能需要按照特定的时间表执行功能。
这个时候即需要用到此模块，此模块可以称为一个函数执行调度器，它会按照你的时间表自动执行功能。</p>
<p>下面介绍一下如何使用此函数。</p>
<p><em>第一步：</em><br>在ewp.conf的server列表中添加{cron_service,true}。  </p>
<p><em>第二步:</em><br>使用下面三种方法中的任意一种加载你的任务：<br>a. cron_service:load_from_file(FilePath).<br>b. cron_service:load_from_list(TaskList).<br>c. cron_service:load_task([#task{}]).  </p>
<p>当使用 load_from_file/1 或者 load_from_list/1加载任务时，一个任务为包含六或者七个元素的元组。<br>例子：<br>{Minute, Hour, Day_Of_The_Month, Month, Day_Of_The_Week, MFA}<br>{Minute, Hour, Day_Of_The_Month, Month, Day_Of_The_Week, MFA, Options}</p>
<p>前面五个为时间调度元素，第六个为执行函数，最后一个为额外选项。</p>
<p>前五个元素允许的值为下表所列：</p>
<table>
<thead>
<tr>
<th>元素</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minute</td>
<td>0-59</td>
</tr>
<tr>
<td>Hour</td>
<td>0-23</td>
</tr>
<tr>
<td>Day of the Month</td>
<td>1-31</td>
</tr>
<tr>
<td>Month</td>
<td>1-12</td>
</tr>
<tr>
<td>Day of the Week</td>
<td>0-7</td>
</tr>
</tbody>
</table>
<p>在以上任何值中，星号<code>*</code>可以用来代表所有有效的值。<br>譬如，月份值中的星号意味着在满足其它制约条件后每月都执行该命令。<br>整数间的短线<code>-</code>指定一个整数范围。譬如，<code>1-4</code> 意味着整数 <code>1、2、3、4</code>。<br>用逗号<code>,</code>隔开的一系列值指定一个列表。譬如，<code>[3,4,6,8]</code> 标明这四个指定的整数。<br>正斜线<code>/</code>可以用来指定间隔频率。在范围后加上<code>/&lt;integer&gt;</code>意味着在范围内可以跳过<code>integer</code>。譬如,<code>0-59/2</code>可以用来在分钟字段定义每两分钟。
间隔频率值还可以和星号一起使用。例如，*/3 的值可以用在月份字段中表示每三个月运行一次任务。</p>
<p>关于这个时间调度举几个简单例子：</p>
<p>{5,&#39;<em>&#39;,&#39;</em>&#39;,&#39;<em>&#39;,&#39;</em>&#39;,MFA}：指定每小时的第5分钟执行一次<code>M:F(A)</code>。<br>{30,5,&#39;<em>&#39;,&#39;</em>&#39;,&#39;<em>&#39;,MFA}：指定每天的5:30执行<code>M:F(A)</code>。<br>{30,7,8,&#39;</em>&#39;,&#39;<em>&#39;,MFA}：指定每月8号的7:30分执行<code>M:F(A)</code>。<br>{30,5,8,6,&#39;</em>&#39;,MFA}：指定每年的6月8日5:30执行<code>M:F(A)</code>。<br>{30,6,&#39;<em>&#39;,&#39;</em>&#39;,0,MFA}：指定每星期日的6:30执行<code>M:F(A)</code>[注：0表示星期天，1表示星期1， 以此类推]<br>{30,3,[10,20],&#39;<em>&#39;,&#39;</em>&#39;,MFA}每月10号及20号的3:30执行<code>M:F(A)</code>[注：<code>,</code>用来连接多个不连续的时段]<br>{&#39;<em>/15&#39;,&#39;</em>&#39;,&#39;<em>&#39;,&#39;</em>&#39;,&#39;*&#39;,MFA}每15分钟执行一次<code>M:F(A)</code>[即每个小时的第<code>0 15 30 45 60</code>分钟执行<code>M:F(A)</code>]  </p>
<p>MFA 元素为mfa元组：{Module, Function, Arg}</p>
<p>Options 元素为可选的，它可以允许下面所列类型：</p>
<pre><code>Options = [Option]
Option = {name, TaskName} | {interval, IntervalMinutes} |
         {start, StartAfter} | {finish, FinishBefore} |
         {max, MaxExecTimes} | {persistent, Bool}
TaskName = any()
IntervalMinutes, MaxExecTimes = int()
StartAfter, FinishBefore = {date(), time()}
Bool = true | false
</code></pre><p>当设置了间隔(interval)选项，启动(start)选项也必须设置。</p>
<p>下面根据 #task{} 定义详细介绍各项意义。</p>
<pre><code>%% definition of cron task scheduled by cron_service.
-record(task, {
      name,             %% Task name:任务名称
      next_exec_at,     %% Next datetime to execute:下次执行事件
      mfa_to_exec,      %% {Module, Function, Arg}:执行MFA
      start_after,      %% Start to match &#39;next_exec_at&#39; after &#39;start_after&#39; :在这个时间之后匹配下次执行时间然后执行
      finish_before,    %% Finish to match &#39;next_exec_at&#39; before &#39;finish_before&#39;:在这个时间之前匹配下次执行时间进行执行
      max_times,        %% Max times of executing &#39;mfa_to_exec&#39; during match period:在时间段之间最大执行次数
      persistent,       %% The task will be persistent if this flag is setted:保持状态

      created_at,       %% Timestamp of creating this task:创建任务时间
      exec_times,       %% Times of executing &#39;mfa_to_exec&#39;:执行次数
      status            %% One of these three status:ready, cancel, finish:任务状态
}).
</code></pre><h2 id="举例">2 举例</h2>
<h3 id="loadtaskfromlist">2.1 load_task_from_list</h3>
<p>假定现在需要每隔10分钟在日志中打印&quot;I&#39;m still alive&quot;。</p>
<p>首先实现一个Function:</p>
<pre><code>print_msg(Msg) -&gt;
    io:format(&quot;~p~n&quot;, [Msg]).
</code></pre><p>假定此Function所在Module名称为&#39;timer_fun.erl&#39;,那么MFA为</p>
<pre><code>Arg = [&quot;I&#39;m still alive&quot;],
MFA = {timer_fun,print_msg,Arg}
</code></pre><p>根据需求Task应该为:
由于在此任务的时间中不支持<code>*</code>，所以我们需要写成<code>0-59/10</code></p>
<pre><code>Name = &quot;test&quot;,
Task = {&#39;0-59/10&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,MFA,[{name, Name}]},
</code></pre><p>在timer_fun.erl中添加load_task方法：</p>
<pre><code>load_task() -&gt;
    Arg = [&quot;I&#39;m still alive&quot;],
    MFA = {timer_fun,print_msg,Arg},
    Name = &quot;test&quot;,
    Task = {&#39;0-59/10&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,MFA,[{name, Name}]},
    cron_service:load_task_from_list([Task]).
</code></pre><p>编译运行，可以看到日志上每隔10分钟打印一次<code>I&#39;m still alive</code>。</p>
<p>增加一个同样的任务为一分钟打印一次<code>hello</code>,增加代码：</p>
<pre><code>Arg1 = [&quot;hello&quot;],
MFA1 = {timer_fun,print_msg,Arg1},
Name1 = &quot;test1&quot;,
Task1 = {&#39;0-59/1&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,MFA1,[{name, Name1}]},
cron_service:load_task_from_list([Task,Task1]).
</code></pre><p>编译运行效果为：</p>
<pre><code>(ebank@tracvm)4&gt; &quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;hello&quot;
&quot;I&#39;m still alive&quot;
</code></pre><h3 id="loadtaskfromfile">2.2 load_task_from_file</h3>
<p>从文件中加载任务，编写文件为：</p>
<pre><code>{&#39;0-59/10&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,{timer_fun,print_msg,[&quot;I&#39;m still alive&quot;]},[{name, &quot;test1&quot;}]}.
{&#39;0-59/1&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,{timer_fun,print_msg,[&quot;hello&quot;]},[{name, &quot;test&quot;}]}.
</code></pre><p>将此文件放在<code>config</code>文件夹下，命名为<code>task.conf</code>则调用为：
<code>cron_service:load_task_from_file(&quot;config/task.conf&quot;).</code></p>
<h3 id="loadtask">2.3 load_task</h3>
<p>加载一个任务，调用此方法时参数为任务记录。</p>
<p>举例：</p>
<pre><code>load_record_test() -&gt;
    Now = calendar:local_time(),
    {{_Y, Mo, D}, {H, _Mi, _S}} = Now,
    Secs = calendar:datetime_to_gregorian_seconds(Now),
    Task1 = #task{name = test,
                  next_exec_at = {interval, {Secs+10, 120}},
                  mfa_to_exec = {?MODULE, print_msg, [&quot;payload1111&quot;]},
                  finish_before = Secs - 1,
                  max_times = 4},
    Task2 = #task{name = test,
                  next_exec_at = {normal, {lists:seq(0,59), H, D, Mo, &#39;*&#39;}},
                  mfa_to_exec = {?MODULE, print_msg, [&quot;payload2222&quot;]},
                  start_after  = Secs + 180,
                  finish_before = undefined,
                  max_times = undefined},

    cron_service:load_task([Task1, Task2]).
</code></pre><p>Task1为每隔一段时间执行任务，Task2为类似linux cron定时任务执行。</p>
<h3 id="canceltask-selectbyname">2.4 cancel_task &amp; select_by_name</h3>
<p>如果突然不需要定时执行此任务了，怎么停止加入的这个任务呢，可以调用<code>cancel_task/1</code>这个方法取消一个任务。根据API描述，此方法参数为<code>task</code>
的<code>key</code>，此时就会想，是不是<code>name</code>呢，先用<code>name</code>试一下。</p>
<pre><code>(ebank@tracvm)6&gt; cron_service:cancel_task(&quot;test&quot;).
{error,task_not_found}
</code></pre><p>执行时表示，任务没找到，那么表示不是用<code>name</code>当做<code>key</code>值。我们使用<code>select_by_name/1</code>接口查询一下任务，看看能否得到任务的key值。</p>
<pre><code>cron_service:select_by_name(&quot;test&quot;).
{ok,[{&quot;B88623E7B0A667586E024063F4AB9DB5&quot;,
      {task,&quot;test&quot;,
            {normal,{[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17|...],
                     &#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;}},
            {timer_fun,print_msg,[&quot;I&#39;m still alive&quot;]},
            undefined,undefined,undefined,undefined,
            {{2015,4,10},{17,29,11}},
            7,ready}}]}
</code></pre><p>由于在代码中name为test的任务可能有多个，则代码修改为这样：</p>
<pre><code>cancel_task() -&gt;
    {ok,Task_list} = cron_service:select_by_name(&quot;test&quot;),
    lists:foreach(
        fun({Key,Task}) -&gt;
            io:format(&quot;Key is ====~p~n&quot;,[Key]),
            cron_service:cancel_task(Key)
        end,Task_list).
</code></pre><h3 id="list">2.5 list</h3>
<p>列出当前管理的所有任务：</p>
<pre><code>(ebank@tracvm)21&gt; cron_service:list().
[{&quot;F96804D493C3ADE09D0B546F33486AC4&quot;,
  {task,&quot;test&quot;,
        {normal,{[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19|...],
                 &#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;}},
        {timer_fun,print_msg,[&quot;hello&quot;]},
        undefined,undefined,undefined,undefined,
        {{2015,5,5},{16,55,56}},
        0,cancel}},
 {&quot;6743D633FAF566A744CF94A4C594F517&quot;,
  {task,&quot;test&quot;,
        {normal,{[0,10,20,30,40,50],&#39;*&#39;,&#39;*&#39;,&#39;*&#39;,&#39;*&#39;}},
        {timer_fun,print_msg,[&quot;I&#39;m still alive&quot;]},
        undefined,undefined,undefined,undefined,
        {{2015,5,5},{17,0,44}},
        0,ready}}
]
</code></pre><h3 id="restarttask">2.6 restart_task</h3>
<p>重启一个已停止的任务。</p>
<pre><code>restart_task() -&gt;
    {ok,Task_list} = cron_service:select_by_name(&quot;test&quot;),
    lists:foreach(
        fun({Key,Task}) -&gt;
            io:format(&quot;Key is ====~p~n&quot;,[Key]),
            cron_service:restart_task(Key)
        end,Task_list).
</code></pre><h3 id="startlink">2.7 start_link</h3>
<p>启动服务。</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../index.html" class="navigation navigation-prev " aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../cs_api/cs_api.html" class="navigation navigation-next " aria-label="Next page: cs_api"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
