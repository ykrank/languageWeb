<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>ewp_render_util | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.3.4">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../ewp_str_util/ewp_str_util.html" />
    
    
    <link rel="prev" href="../ewp_pubsub_service/ewp_pubsub_service.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="13" data-basepath=".." data-revision="1463048530419">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="cron_service/cron_service.html">
            
                
                    <a href="../cron_service/cron_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         cron_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="cs_api/cs_api.html">
            
                
                    <a href="../cs_api/cs_api.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         cs_api
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="evo/evo.html">
            
                
                    <a href="../evo/evo.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         evo
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="ewp_adapter/ewp_adapter.html">
            
                
                    <a href="../ewp_adapter/ewp_adapter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         ewp_adapter
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="ewp_app_manager/ewp_app_manager.html">
            
                
                    <a href="../ewp_app_manager/ewp_app_manager.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         ewp_app_manager
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="ewp_channel_util/ewp_channel_util.html">
            
                
                    <a href="../ewp_channel_util/ewp_channel_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         ewp_channel_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="ewp_conf_util/ewp_conf_util.html">
            
                
                    <a href="../ewp_conf_util/ewp_conf_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         ewp_conf_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="ewp_file_util/ewp_file_util.html">
            
                
                    <a href="../ewp_file_util/ewp_file_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         ewp_file_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="ewp_http_client/ewp_http_client.html">
            
                
                    <a href="../ewp_http_client/ewp_http_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         ewp_http_client
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="ewp_json/ewp_json.html">
            
                
                    <a href="../ewp_json/ewp_json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         ewp_json
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="ewp_params/ewp_params.html">
            
                
                    <a href="../ewp_params/ewp_params.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         ewp_params
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="ewp_pubsub_service/ewp_pubsub_service.html">
            
                
                    <a href="../ewp_pubsub_service/ewp_pubsub_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         ewp_pubsub_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="13" data-path="ewp_render_util/ewp_render_util.html">
            
                
                    <a href="../ewp_render_util/ewp_render_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         ewp_render_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="ewp_str_util/ewp_str_util.html">
            
                
                    <a href="../ewp_str_util/ewp_str_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         ewp_str_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="ewp_time/ewp_time.html">
            
                
                    <a href="../ewp_time/ewp_time.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         ewp_time
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="ewp_unicode/ewp_unicode.html">
            
                
                    <a href="../ewp_unicode/ewp_unicode.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         ewp_unicode
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="ewp_util/ewp_util.html">
            
                
                    <a href="../ewp_util/ewp_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         ewp_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="18" data-path="ewp_yaws_util/ewp_yaws_util.html">
            
                
                    <a href="../ewp_yaws_util/ewp_yaws_util.html">
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                         ewp_yaws_util
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="19" data-path="push/push.html">
            
                
                    <a href="../push/push.html">
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                         push
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="20" data-path="session_service/session_service.html">
            
                
                    <a href="../session_service/session_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                         session_service
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="21" data-path="xml_eng/xml_eng.html">
            
                
                    <a href="../xml_eng/xml_eng.html">
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                         xml_eng
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="22" data-path="define/define.html">
            
                
                    <a href="../define/define.html">
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                         宏定义
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown">下载</a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                
                <a href="/emp/ewp_lib_example/ewp_lib_example.zip" class="button">html</a>
                
                
                <a href="/emp/ewp_lib_example/book.pdf" class="button">pdf</a>
                
                
            </div>
        </div>
    </div>

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_8">
                    
                        <h1 id="module-ewp-render-util">Module ewp <em> render </em> util</h1>
<p>概述：http响应生成通用API。该模块用来生成yaws规定的http响应格式，
调用者无须关注API的具体返回格式。该模块API常用来生成自定义
controller的返回值。</p>
<h2 id="fuctions">1 Fuctions</h2>
<h3 id="1render-error-msg1">1.1 1.render <em> error </em> msg/1</h3>
<p>(1)描述： Render the error msg in correct format according to the request.  We assume that client will pass param &#39;o&#39; to represent the return format after EMP 3.0, and in earlier version it is decided by Func name.</p>
<p>根据指定错误信息生成响应。</p>
<pre><code>render _ error _ msg(Msg) -&gt;
    render_error_msg(ewp_params:param(o), Msg).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>render_error_msg(string()) -&gt; response()
抛出错误时：{error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)1&gt; ewp_render_util:render_error_msg(&quot;xml format error&quot;).
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;error string=\&quot;xml format error\&quot;/&gt;&quot;}]}
</code></pre><h3 id="2render-error-msg2">1.2 2.render <em> error </em> msg/2</h3>
<p>(1)描述：根据指定错误信息生成响应。</p>
<pre><code>render_error_msg(wap, Msg) -&gt;
    render_error_xhtml(Msg);
render_error_msg(_, Msg) -&gt;
    render_error_xml(Msg).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>render_error_msg(term(),string()) -&gt; response()
抛出错误时：{error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>a.情况一：
(ebank@tracvm)2&gt; ewp_render_util:render_error_msg(wap, &quot;error&quot;).
{response,[{status,200},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,
                    &quot;&lt;p&gt;error msg:&lt;/p&gt;&lt;br/&gt;&lt;p&gt;error&lt;/p&gt;&quot;}]}

b.情况二：
(ebank@tracvm)3&gt; ewp_render_util:render_error_msg(&lt;&lt;123&gt;&gt;, &quot;error&quot;).
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;error string=\&quot;error\&quot;/&gt;&quot;}]}
</code></pre><h3 id="3render1">1.3 3.render/1</h3>
<p>(1)描述：相当于render(Content, [])。</p>
<pre><code>render(Content) -&gt;
    render(Content, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
抛出错误时： {error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)4&gt; ewp_render_util:render(&quot;ok&quot;).
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,&quot;ok&quot;}]}
</code></pre><h3 id="4render2">1.4 4.render/2</h3>
<p>(1)描述：根据指定内容和选项生成响应。</p>
<pre><code>render(Content, Options) -&gt;
    render(Content, Options, ewp_params:param(o)).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
抛出错误时： {error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)5&gt; ewp_render_util:render(&quot;ok&quot;,[{status,123}]).   
{response,[{status,123},
           {content,&quot;application/xml; charset=utf-8&quot;,&quot;ok&quot;}]}
</code></pre><h3 id="5render3">1.5 5.render/3</h3>
<p>(1)函数：</p>
<pre><code>render(Content, Options, wap) -&gt;
    render_xhtml(Content, Options);
render(Content, Options, json) -&gt;
    render_json(Content, Options);
render(Content, Options, _) -&gt;
    render_xml(Content, Options).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>Options::option()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
抛出错误时： {error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>a.情况一：
(ebank@tracvm)6&gt; ewp_render_util:render(&quot;ok&quot;,[{status,123}],wap).
{response,[{status,123},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,&quot;ok&quot;}]}

b.情况二：
(ebank@tracvm)7&gt; ewp_render_util:render(&quot;ok&quot;,[{status,123}],json).
{response,[{status,123},
           {content,&quot;application/json; charset=utf-8&quot;,&quot;ok&quot;}]}

c.情况三：
(ebank@tracvm)8&gt; ewp_render_util:render(&quot;ok&quot;,[{status,123}],&quot;string&quot;).
{response,[{status,123},
           {content,&quot;application/xml; charset=utf-8&quot;,&quot;ok&quot;}]}
</code></pre><h3 id="6render-xml1">1.6 6.render _ xml/1</h3>
<p>(1)描述：相当于render_xml(Xml, [])。</p>
<pre><code>render_xml(Xml) when is_tuple(Xml) -&gt;
    render_xml(ewp_xml_util:export_xml(Xml));
render_xml(Xml) -&gt;
    render_xml(Xml, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>spec (xml_element() | string() | binary()) -&gt; response()
抛出错误时： {error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)1&gt; ewp_render_util:render_xml(&quot;&lt;root&gt;2&lt;/root&gt;&quot;).                      
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;root&gt;2&lt;/root&gt;&quot;}]}
</code></pre><h3 id="7render-xml2">1.7 7.render _ xml/2</h3>
<p>(1)描述：根据指定的xml数据或xml字符串和选项生成响应。</p>
<pre><code>render_xml(Xml, Options) when is_tuple(Xml) -&gt;
    render_xml(ewp_xml_util:export_xml(Xml), Options);
render_xml(Xml, Options)  -&gt;
    if is_binary(Xml)==true -&gt; go_on;
       is_list(Xml)==true -&gt; go_on;
       true -&gt;  throw({error, &quot;xml format error&quot;})
    end,
    {response,
     [{status, get_status_from_options(Options)}] ++
         get_headers_from_options(Options) ++
         [{content, 
           case get_content_type_from_options(Options) of
               &quot;&quot; -&gt; &quot;application/xml; charset=utf-8&quot;;
               ContentType -&gt; ContentType
           end,Xml}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(xml_element() | string() | binary(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
抛出错误时： {error, string()}
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>a.情况一：
(ebank@tracvm)2&gt; ewp_render_util:render_xml(&quot;&lt;root&gt;test&lt;/root&gt;&quot;,[status,101]).
{response,[{status,true},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;root&gt;test&lt;/root&gt;&quot;}]}

b.情况二：
(ebank@tracvm)3&gt; ewp_render_util:render_xml(&quot;&lt;root&gt;test&lt;/root&gt;&quot;,[header,{&quot;name&quot;,&quot;myheader&quot;}]).
{response,[{status,200},
           {header,true},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;root&gt;test&lt;/root&gt;&quot;}]}

c.情况三：
(ebank@tracvm)4&gt; ewp_render_util:render_xml(&quot;&lt;root&gt;test&lt;/root&gt;&quot;,[content_type,&quot;content_type&quot;]).
{response,[{status,200},{content,true,&quot;&lt;root&gt;test&lt;/root&gt;&quot;}]}
</code></pre><h3 id="8render-xml3">1.8 8.render _ xml/3</h3>
<p>(1)描述：根据指定的xml数据或xml字符串和选项以及yaws arg记录生成响应。yaws arg记录用来判断响应是否需要压缩。</p>
<pre><code>render_xml(Xml, Options, A) -&gt;
    case ewp_yaws_util:is_gzip_accepted(A) of
        true -&gt; 
            render_xml_gzip(Xml, Options);
        _ -&gt; 
            render_xml(Xml, Options)
    end.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(xml_element() | string() | binary(), [option()], yaws_arg()) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
抛出错误时： {error, string()}

对于记录arg：
-record(arg, {
          clisock,        % the socket leading to the peer client
          client_ip_port, % {ClientIp, ClientPort} tuple
          headers,        % headers
          req ,            % request (possibly rewritten)
          % orig_req,       % original request
          clidata,        % The client data (as a binary in POST requests)
          server_path,    % The normalized server path
                          % (pre-querystring part of URI)
          querydata,      % For URIs of the form ...?querydata
                          %  equiv of cgi QUERY_STRING
          appmoddata,     % (deprecated - use pathinfo instead) the remainder
                          % of the path leading up to the query
          docroot,        % Physical base location of data for this request
          docroot_mount,  % virtual directory e.g /myapp/ that the docroot
                          %  refers to.
          fullpath,       % full deep path to yaws file
          cont,           % Continuation for chunked multipart uploads
          state,          % State for use by users of the out/1 callback
          pid,            % pid of the yaws worker process
          opaque,         % useful to pass static data
          appmod_prepath, % (deprecated - use prepath instead) path in front
                          %  of: &lt;appmod&gt;&lt;appmoddata&gt;
          prepath,        % Path prior to &#39;dynamic&#39; segment of URI.
                          %  ie http://some.host/&lt;prepath&gt;/&lt;script-point&gt;/d/e
                          % where &lt;script-point&gt; is an appmod mount point,
                          % or .yaws,.php,.cgi,.fcgi etc script file.
          pathinfo        % Set to &#39;/d/e&#39; when calling c.yaws for the request
                          % http://some.host/a/b/c.yaws/d/e
                          %  equiv of cgi PATH_INFO
         }).
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>首先给变量A赋值：     
(ebank@tracvm)1&gt; A = { arg,bb,
(ebank@tracvm)1&gt;       {{192,168,65,213},56467},
(ebank@tracvm)1&gt;       {headers,&quot;keep-alive&quot;,
(ebank@tracvm)1&gt;       &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,
(ebank@tracvm)1&gt;       &quot;192.168.65.180:4002&quot;,undefined,undefined,
(ebank@tracvm)1&gt;       undefined,undefined,undefined,undefined,
(ebank@tracvm)1&gt;       undefined,
(ebank@tracvm)1&gt;       &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0&quot;,
(ebank@tracvm)1&gt;       undefined,[],undefined,undefined,undefined,
(ebank@tracvm)1&gt;       undefined,undefined,undefined,undefined,
(ebank@tracvm)1&gt;       undefined,
(ebank@tracvm)1&gt;       [{http_header,1,&#39;Cache-Control&#39;,undefined,
(ebank@tracvm)1&gt;       &quot;max-age=0&quot;},
(ebank@tracvm)1&gt;       {http_header,10,&#39;Accept-Encoding&#39;,undefined,
(ebank@tracvm)1&gt;       &quot;gzip, deflate&quot;},
(ebank@tracvm)1&gt;       {http_header,11,&#39;Accept-Language&#39;,undefined,
(ebank@tracvm)1&gt;       &quot;zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3&quot;}]},
(ebank@tracvm)1&gt;       {http_request,&#39;GET&#39;,
(ebank@tracvm)1&gt;       {abs_path,&quot;/collection/list&quot;},
(ebank@tracvm)1&gt;       {1,1}},
(ebank@tracvm)1&gt;       undefined,&quot;/collection/list&quot;,undefined,
(ebank@tracvm)1&gt;       &quot;collection/list&quot;,
(ebank@tracvm)1&gt;       &quot;/root/zyw/ebank/../ewp/public/www&quot;,&quot;/&quot;,
(ebank@tracvm)1&gt;       &quot;/root/zyw/ebank/../ewp/public/www/collection/list&quot;,
(ebank@tracvm)1&gt;       undefined,undefined,aa,[],[],[],
(ebank@tracvm)1&gt;       &quot;/collection/list&quot;}.
{arg,bb,
     {{192,168,65,213},56467},
     {headers,&quot;keep-alive&quot;,
              &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,
              &quot;192.168.65.180:4002&quot;,undefined,undefined,undefined,
              undefined,undefined,undefined,undefined,
              &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0&quot;,
              undefined,[],undefined,undefined,undefined,undefined,
              undefined,undefined,undefined,undefined,
              [{http_header,...},{...}|...]},
     {http_request,&#39;GET&#39;,{abs_path,&quot;/collection/list&quot;},{1,1}},
     undefined,&quot;/collection/list&quot;,undefined,&quot;collection/list&quot;,
     &quot;/root/zyw/ebank/../ewp/public/www&quot;,&quot;/&quot;,
     &quot;/root/zyw/ebank/../ewp/public/www/collection/list&quot;,
     undefined,undefined,aa,[],[],[],&quot;/collection/list&quot;}

然后运行：
(ebank@tracvm)6&gt; ewp_render_util:render_xml(&quot;&lt;root&gt;test&lt;/root&gt;&quot;,[status,101],A).
{response,[{status,true},
           {header,{&quot;Content-Encoding&quot;,&quot;gzip&quot;}},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    [&lt;&lt;31,139,8,0,0,0,0,0,0,255&gt;&gt;,
                     &lt;&lt;179,41,202,207,47,177,43,73,45,46,177,209,7,51,1&gt;&gt;,
                     &lt;&lt;252,101,191,94,17,0,0,0&gt;&gt;]}]}
</code></pre><h3 id="9render-html2">1.9 9.render _ html/2</h3>
<p>(1)描述：根据指定的html字符串和选项生成响应。</p>
<pre><code>render_html(Content, Options) -&gt;
    {response,
     [{status, get_status_from_options(Options)}] ++
         get_headers_from_options(Options) ++
         [{content, &quot;text/html; charset=utf-8&quot;, Content}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)3&gt; ewp_render_util:render_html(&quot;test&quot;,[status,101]).   
{response,[{status,true},
           {content,&quot;text/html; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="10render-xhtml1">1.10 10.render _ xhtml/1</h3>
<p>(1)描述：相当于render_xhtml(XhtmlContent,[])。</p>
<pre><code>render_xhtml(XhtmlContent) -&gt;
    render_xhtml(XhtmlContent,[]).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)5&gt; ewp_render_util:render_xhtml(&quot;test&quot;).                            
{response,[{status,200},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="11render-xhtml2">1.11 11.render _ xhtml/2</h3>
<p>(1)描述：根据指定的xhtml字符串和选项生成响应。</p>
<pre><code>render_xhtml(Xhtml,Options) -&gt;
    {response,
     [{status, get_status_from_options(Options)}] ++
         get_headers_from_options(Options) ++
         [{content, &quot;application/xhtml+xml; charset=utf-8&quot;, Xhtml}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)6&gt; ewp_render_util:render_xhtml(&quot;test&quot;,[header,{&quot;name&quot;,&quot;myheader&quot;}]).
{response,[{status,200},
           {header,true},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="12render-error-xhtml1">1.12 12.render <em> error </em> xhtml/1</h3>
<p>(1)描述：相当于render_error_xhtml(Str, [])。</p>
<pre><code>render_error_xhtml(Str) -&gt;
    render_error_xhtml(Str, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>render_error_xhtml(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)7&gt; ewp_render_util:render_error_xhtml(&quot;test&quot;).
{response,[{status,200},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,
                    &quot;&lt;p&gt;error msg:&lt;/p&gt;&lt;br/&gt;&lt;p&gt;test&lt;/p&gt;&quot;}]}
</code></pre><h3 id="13render-error-xhtml2">1.13 13.render _error _xhtml/2</h3>
<p>(1)描述：根据指定的错误信息和选项生成xhtml响应。</p>
<pre><code>render_error_xhtml(Str, Options) when is_binary(Str) -&gt;
    render_error_xhtml(binary_to_list(Str), Options);
render_error_xhtml(Str, Options) when is_atom(Str) -&gt;
    render_error_xhtml(atom_to_list(Str), Options);
render_error_xhtml(Str, Options) when is_tuple(Str) -&gt;
    render_error_xhtml(ewp_str_util:io_format(&quot;~p&quot;, [Str]), Options);
render_error_xhtml(Str, Options) -&gt;
    Content = &quot;&lt;p&gt;error msg:&lt;/p&gt;&lt;br/&gt;&lt;p&gt;&quot; ++ Str ++ &quot;&lt;/p&gt;&quot;,
    render_xhtml(Content, Options).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)11&gt; ewp_render_util:render_error_xhtml(&lt;&lt;113&gt;&gt;,[{status,101}]). 
{response,[{status,101},
           {content,&quot;application/xhtml+xml; charset=utf-8&quot;,
                    &quot;&lt;p&gt;error msg:&lt;/p&gt;&lt;br/&gt;&lt;p&gt;q&lt;/p&gt;&quot;}]}
</code></pre><h3 id="14render-xml-gzip1">1.14 14.render _xml _gzip/1</h3>
<p>(1)描述：相当于render_xml_gzip(Xml, [])。</p>
<pre><code>render_xml_gzip(Xml) when is_tuple(Xml)-&gt;
    render_xml_gzip(ewp_xml_util:export_xml(Xml), []);
render_xml_gzip(Xml) -&gt;
    render_xml_gzip(Xml, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(xml_element() | string() | binary) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)7&gt; ewp_render_util:render_xml_gzip(&quot;&lt;root&gt;test&lt;/root&gt;&quot;). 
{response,[{status,200},
           {header,{&quot;Content-Encoding&quot;,&quot;gzip&quot;}},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    [&lt;&lt;31,139,8,0,0,0,0,0,0,255&gt;&gt;,
                     &lt;&lt;179,41,202,207,47,177,43,73,45,46,177,209,7,51,1&gt;&gt;,
                     &lt;&lt;252,101,191,94,17,0,0,0&gt;&gt;]}]}
</code></pre><h3 id="15render-xml-gzip2">1.15 15.render _xml _gzip/2</h3>
<p>(1)描述：根据指定的xml数据或xml字符串和选项压缩并生成响应。</p>
<pre><code>render_xml_gzip(Xml, Options) when is_tuple(Xml) -&gt;
    render_xml_gzip(ewp_xml_util:export_xml(Xml), Options);
render_xml_gzip(Xml, Options) when is_list(Xml) -&gt;
    render_xml_gzip(list_to_binary(Xml), Options);
render_xml_gzip(Xml, Options) -&gt;
    {ok, ZippedData} = yaws_zlib:gzip(Xml),
    {response,
     [{status, get_status_from_options(Options)},
      {header, {&quot;Content-Encoding&quot;, &quot;gzip&quot;}}] ++
          get_headers_from_options(Options) ++
          %% NOTE: even if we gzip it, the content type should 
     %% be the original one.
     [{content, 
       case get_content_type_from_options(Options) of
           &quot;&quot; -&gt; &quot;application/xml; charset=utf-8&quot;;
           ContentType -&gt; ContentType
       end,
       %%&quot;application/octet-stream; charset=utf-8&quot;,
       ZippedData}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(xml_element() | string() | binary, [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)8&gt; ewp_render_util:render_xml_gzip(&quot;&lt;root&gt;test&lt;/root&gt;&quot;,[{status,101}]). 
{response,[{status,101},
           {header,{&quot;Content-Encoding&quot;,&quot;gzip&quot;}},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    [&lt;&lt;31,139,8,0,0,0,0,0,0,255&gt;&gt;,
                     &lt;&lt;179,41,202,207,47,177,43,73,45,46,177,209,7,51,1&gt;&gt;,
                     &lt;&lt;252,101,191,94,17,0,0,0&gt;&gt;]}]}
</code></pre><h3 id="16render-json1">1.16 16.render _json/1</h3>
<p>(1)描述：相当于render_json(Json, [])。</p>
<pre><code>render_json(Json) -&gt;
    render_json(Json, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(json() | string() | binary()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)15&gt; ewp_render_util:render_json(&quot;test&quot;).                
{response,[{status,200},
           {content,&quot;application/json; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="17renderjson2">1.17 17.render_json/2</h3>
<p>(1)描述：根据指定的json数据或json字符串和选项生成响应。</p>
<pre><code>render_json(Json, Options) when is_tuple(Json) -&gt;
    {ok,JsonText,[]} = ewp_json:decode(Json),
    render_json(ewp_json:encode(JsonText), Options);
render_json(Json, Options) -&gt;
    {response, [{status, get_status_from_options(Options)},
                {content, &quot;application/json; charset=utf-8&quot;, case o(Options, encode) of
                 unicode -&gt; ewp_unicode:to_utf8(Json);
                 _ -&gt; Json
                   end}|
    get_headers_from_options(Options)]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(json() | string() | binary(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)16&gt; ewp_render_util:render_json(&quot;test&quot;,[{status,101}]).
{response,[{status,101},
           {content,&quot;application/json; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="18rendertext2">1.18 18.render_text/2</h3>
<p>(1)描述：根据指定的文本和选项生成响应</p>
<pre><code>render_text(Text, Options) when is_binary(Text) -&gt;
    {response, [{status, get_status_from_options(Options)},
                {content, &quot;text/plain; charset=utf-8&quot;, Text}]};
render_text(Text, Options) when is_atom(Text) -&gt;
    render_text(atom_to_list(Text), Options);
render_text(Text, Options) when is_tuple(Text) -&gt;
    render_text(ewp_str_util:io_format(&quot;~p&quot;, [Text]), Options);
render_text(Text, Options) -&gt;
    {response, [{status, get_status_from_options(Options)},
                {content, &quot;text/plain; charset=utf-8&quot;, ewp_unicode:to_utf8(Text)}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)17&gt; ewp_render_util:render_text(&quot;test&quot;, [{status,101}]). 
{response,[{status,101},
           {content,&quot;text/plain; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="19rendertext1">1.19 19.render_text/1</h3>
<p>(1)描述：相当于render_text(Text, [])。</p>
<pre><code>render_text(Text) -&gt;
    render_text(Text, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)18&gt; ewp_render_util:render_text(&quot;test&quot;).                 
{response,[{status,200},
           {content,&quot;text/plain; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="20render-state-xml1">1.20 20.render _state _xml/1</h3>
<p>(1)描述：Render a standard state XML file.  If only one argument, it will be
 rendered as string=&quot;Str&quot;.  </p>
<pre><code>render_state_xml(Str) -&gt;
    render_state_xml(Str, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>( string() | binary()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)20&gt; ewp_render_util:render_state_xml(&lt;&lt;113&gt;&gt;).
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;state string=\&quot;q\&quot;/&gt;&quot;}]}
</code></pre><h3 id="21render-state-xml2">1.21 21.render _state _xml/2</h3>
<p>(1)描述：Render a standard state XML file. If more attributes are needed, they could be
 specified as a list in the second argument</p>
<pre><code>render_state_xml(Str, Attrs) -&gt;
    render_xml(ewp_xml_util:export_xml(ewp_xml_util:atom_builder(&#39;state&#39;, [{string, Str} | Attrs], [], [])), []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>( string() ，[{key,value}]) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)22&gt; ewp_render_util:render_state_xml(&quot;status&quot;, [{id, &quot;1234&quot;}]).
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;state string=\&quot;status\&quot; id=\&quot;1234\&quot;/&gt;&quot;}]}
</code></pre><h3 id="22render-state-xml3">1.22 22.render _state _xml/3</h3>
<p>(1)描述：Render a standard state XML file. If more attributes are needed, they could be
 specified as a list in the second argument</p>
<pre><code>render_state_xml(Str, Attrs, HttpOptions) -&gt;
    render_xml(ewp_xml_util:export_xml(ewp_xml_util:atom_builder(&#39;state&#39;, [{string, Str} | Attrs], [], [])),
               HttpOptions).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>( string() ，[],string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)27&gt; ewp_render_util:render_state_xml(&quot;test&quot;, [{id, &quot;1234&quot;}],&quot;String&quot;).         
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;state string=\&quot;test\&quot; id=\&quot;1234\&quot;/&gt;&quot;}]}
</code></pre><h3 id="23render-state-xml4">1.23 23.render _state _xml/4</h3>
<p>(1)描述：Render a standard state XML file. If more attributes are needed, they could be
 specified as a list in the second argument</p>
<pre><code>render_state_xml(Str, Attrs, HttpOptions, RequestArg) -&gt;
    render_xml(ewp_xml_util:export_xml(ewp_xml_util:atom_builder(&#39;state&#39;, [{string, Str} | Attrs], [], [])),
               HttpOptions, RequestArg).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>( string() ，[],string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>为变量A赋值：
(ebank@tracvm)36&gt;  A = {arg,bb,
(ebank@tracvm)36&gt;                            {{192,168,65,213},56467},
(ebank@tracvm)36&gt;                            {headers,&quot;keep-alive&quot;,
(ebank@tracvm)36&gt;                                &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,
(ebank@tracvm)36&gt;                                &quot;192.168.65.180:4002&quot;,undefined,undefined,
(ebank@tracvm)36&gt;                                undefined,undefined,undefined,undefined,
(ebank@tracvm)36&gt;                                undefined,
(ebank@tracvm)36&gt;                                &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0&quot;,
(ebank@tracvm)36&gt;                                undefined,[],undefined,undefined,undefined,
(ebank@tracvm)36&gt;                                undefined,undefined,undefined,undefined,
(ebank@tracvm)36&gt;                                undefined,
(ebank@tracvm)36&gt;                                [{http_header,1,&#39;Cache-Control&#39;,undefined,
(ebank@tracvm)36&gt;                                     &quot;max-age=0&quot;},
(ebank@tracvm)36&gt;                                 {http_header,10,&#39;Accept-Encoding&#39;,undefined,
(ebank@tracvm)36&gt;                                     &quot;gzip, deflate&quot;},
(ebank@tracvm)36&gt;                                 {http_header,11,&#39;Accept-Language&#39;,undefined,
(ebank@tracvm)36&gt;                                     &quot;zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3&quot;}]},
(ebank@tracvm)36&gt;                            {http_request,&#39;GET&#39;,
(ebank@tracvm)36&gt;                                {abs_path,&quot;/collection/list&quot;},
(ebank@tracvm)36&gt;                                {1,1}},
(ebank@tracvm)36&gt;                            undefined,&quot;/collection/list&quot;,undefined,
(ebank@tracvm)36&gt;                            &quot;collection/list&quot;,
(ebank@tracvm)36&gt;                            &quot;/root/zyw/ebank/../ewp/public/www&quot;,&quot;/&quot;,
(ebank@tracvm)36&gt;                            &quot;/root/zyw/ebank/../ewp/public/www/collection/list&quot;,
(ebank@tracvm)36&gt;                            undefined,undefined,aa,[],[],[],
(ebank@tracvm)36&gt;                            &quot;/collection/list&quot;}.
{arg,bb,
     {{192,168,65,213},56467},
     {headers,&quot;keep-alive&quot;,
              &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,
              &quot;192.168.65.180:4002&quot;,undefined,undefined,undefined,
              undefined,undefined,undefined,undefined,
              &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0&quot;,
              undefined,[],undefined,undefined,undefined,undefined,
              undefined,undefined,undefined,undefined,
              [{http_header,...},{...}|...]},
     {http_request,&#39;GET&#39;,{abs_path,&quot;/collection/list&quot;},{1,1}},
     undefined,&quot;/collection/list&quot;,undefined,&quot;collection/list&quot;,
     &quot;/root/zyw/ebank/../ewp/public/www&quot;,&quot;/&quot;,
     &quot;/root/zyw/ebank/../ewp/public/www/collection/list&quot;,
     undefined,undefined,aa,[],[],[],&quot;/collection/list&quot;}

编译运行：
(ebank@tracvm)37&gt; ewp_render_util:render_state_xml(&quot;test&quot;, [{id, &quot;1234&quot;}],&quot;String&quot;,A). 
{response,[{status,200},
           {header,{&quot;Content-Encoding&quot;,&quot;gzip&quot;}},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    [&lt;&lt;31,139,8,0,0,0,0,0,0,255&gt;&gt;,
                     &lt;&lt;&quot;³±¯ÈÍQ(K-*ÎÌÏ³U7Ô3PWHÍKÎOÉÌK·U/-IÓµP··ã²).I,IU(.)&quot;...&gt;&gt;,
                     &lt;&lt;36,138,147,105,71,0,0,0&gt;&gt;]}]}
</code></pre><h3 id="24renderbinary2">1.24 24.render_binary/2</h3>
<p>(1)描述：根据指定的二进制数据和选项生成响应。</p>
<pre><code>render_binary(Bin, Options) -&gt;
    {response,
     [{status, get_status_from_options(Options)}] ++
         get_headers_from_options(Options) ++
         [{content,
           case get_content_type_from_options(Options) of
               &quot;&quot; -&gt; &quot;application/octet-stream&quot;;
               ContentType -&gt; ContentType
           end, Bin}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(binary(), [option()]) -&gt; response()
option() = {status, Code :: integer()} | {header, [header()]} |{content_type, string()}.
header() = {Field :: string(), Value :: string()}.
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)51&gt; ewp_render_util:render_binary(&lt;&lt;113&gt;&gt;,[{status,101}]).   
{response,[{status,101},
           {content,&quot;application/octet-stream&quot;,&lt;&lt;&quot;q&quot;&gt;&gt;}]}
</code></pre><h3 id="25renderbinary1">1.25 25.render_binary/1</h3>
<p>(1)描述：相当于render_binary(Bin, [])。</p>
<pre><code>render_binary(Bin) -&gt;
    render_binary(Bin, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(binary()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)52&gt; ewp_render_util:render_binary(&lt;&lt;113&gt;&gt;).               
{response,[{status,200},
           {content,&quot;application/octet-stream&quot;,&lt;&lt;&quot;q&quot;&gt;&gt;}]}
</code></pre><h3 id="26render-error-xml2">1.26 26.render _error _xml/2</h3>
<p>(1)描述：根据指定的错误信息和选项生成xml响应。</p>
<pre><code>render_error_xml(Str, Options) when is_binary(Str) -&gt;
    render_error_xml(ewp_str_util:to_list(Str), Options);
render_error_xml(Str, Options) when is_atom(Str) -&gt;
    render_error_xml(atom_to_list(Str), Options);
render_error_xml(Str, Options) when is_tuple(Str) -&gt;
    render_error_xml(ewp_str_util:io_format(&quot;~p&quot;, [Str]), Options);
render_error_xml(Str, Options) -&gt;
    render_xml(ewp_xml_util:export_xml(ewp_xml_util:atom_builder(&#39;error&#39;, [{string, Str}], [], [])), Options).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)53&gt; ewp_render_util:render_error_xml(&quot;test&quot;,[{status,101}]).
{response,[{status,101},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;error string=\&quot;test\&quot;/&gt;&quot;}]}
</code></pre><h3 id="27render-error-xml1">1.27 27.render _error _xml/1</h3>
<p>(1)描述：相当于render_error_xml(Str, [])。</p>
<pre><code>render_error_xml(Str) -&gt;
    render_error_xml(Str, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)54&gt; ewp_render_util:render_error_xml(&quot;test&quot;).               
{response,[{status,200},
           {content,&quot;application/xml; charset=utf-8&quot;,
                    &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;error string=\&quot;test\&quot;/&gt;&quot;}]}
</code></pre><h3 id="28render-ok-json1">1.28 28.render _ok _json/1</h3>
<p>(1)描述：根据指定选项生成{&quot;message&quot;:&quot;ok&quot;}json响应。</p>
<pre><code>render_ok_json(Options) -&gt;
    JsonTerm = {obj, [{&quot;message&quot;, list_to_binary(&quot;ok&quot;)}]},
    render_json(ewp_json:encode(JsonTerm), Options).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>([option()]) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)55&gt; ewp_render_util:render_ok_json([status,101]).
{response,[{status,true},
           {content,&quot;application/json; charset=utf-8&quot;,
                    &quot;{\&quot;message\&quot;:\&quot;ok\&quot;}&quot;}]}
</code></pre><h3 id="29render-ok-json0">1.29 29.render _ok _json/0</h3>
<p>(1)描述：相当于render_ok_json([])。</p>
<pre><code>render_ok_json() -&gt;
    render_ok_json([]).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>() -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)56&gt; ewp_render_util:render_ok_json().            
{response,[{status,200},
           {content,&quot;application/json; charset=utf-8&quot;,
                    &quot;{\&quot;message\&quot;:\&quot;ok\&quot;}&quot;}]}
</code></pre><h3 id="30render-error-json2">1.30 30.render _error _json/2</h3>
<p>(1)描述：根据指定错误信息和选项生成{&quot;message&quot;:&quot;Str&quot;}json响应。</p>
<pre><code>render_error_json(Str, Options) when is_atom(Str) -&gt;
    render_error_json(atom_to_list(Str), Options);
render_error_json(Str, Options) -&gt;
    JsonTerm = {obj, [{&quot;message&quot;, list_to_binary(Str)}]},
    render_json(ewp_json:encode(JsonTerm), Options).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), [option()]) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)57&gt; ewp_render_util:render_error_json(&quot;test&quot;,[status,101]).
{response,[{status,true},
           {content,&quot;application/json; charset=utf-8&quot;,
                    &quot;{\&quot;message\&quot;:\&quot;test\&quot;}&quot;}]}
</code></pre><h3 id="31render-error-json1">1.31 31.render _error _json/1</h3>
<p>(1)描述：相当于render_error_json(Str, [])。</p>
<pre><code>render_error_json(Str) when is_atom(Str) -&gt;
    render_error_json(atom_to_list(Str));
render_error_json(Str) -&gt;
    render_error_json(Str, []).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)58&gt; ewp_render_util:render_error_json(&quot;test&quot;).             
{response,[{status,200},
           {content,&quot;application/json; charset=utf-8&quot;,
                    &quot;{\&quot;message\&quot;:\&quot;test\&quot;}&quot;}]}
</code></pre><h3 id="32render4042">1.32 32.render_404/2</h3>
<p>(1)描述：根据指定内容和类型生成状态码为404的响应。</p>
<pre><code>render_404(Content, ContentType) -&gt;
    {response, [{status, 404},
                {content, ContentType, Content}]}.
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string(), string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)61&gt; ewp_render_util:render_404(&quot;test&quot;, &quot;text/plain; charset=utf-8&quot;).
{response,[{status,404},
           {content,&quot;text/plain; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="33render4041">1.33 33.render_404/1</h3>
<p>(1)描述：相当于render_404(Str, &quot;text/plain; charset=utf-8&quot;)。</p>
<pre><code>render_404(Str) -&gt;
    render_404(Str, &quot;text/plain; charset=utf-8&quot;).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>(string()) -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)62&gt; ewp_render_util:render_404(&quot;test&quot;).                             
{response,[{status,404},
           {content,&quot;text/plain; charset=utf-8&quot;,&quot;test&quot;}]}
</code></pre><h3 id="34render4040">1.34 34.render_404/0</h3>
<p>(1)描述：相当于render_404(&quot;&quot;)。</p>
<pre><code>render_404() -&gt;
    render_404([]).
</code></pre><p>(2)参考数据类型：</p>
<pre><code>() -&gt; response()
</code></pre><p>(3)编译运行效果为：</p>
<pre><code>(ebank@tracvm)63&gt; ewp_render_util:render_404().      
{response,[{status,404},
           {content,&quot;text/plain; charset=utf-8&quot;,[]}]}
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../ewp_pubsub_service/ewp_pubsub_service.html" class="navigation navigation-prev " aria-label="Previous page: ewp_pubsub_service"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../ewp_str_util/ewp_str_util.html" class="navigation navigation-next " aria-label="Next page: ewp_str_util"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
