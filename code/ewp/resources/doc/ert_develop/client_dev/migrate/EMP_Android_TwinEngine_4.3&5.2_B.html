<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>改造方案 | ERT开发</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.3.4">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../../release_note/android/Introduction.html" />
    
    
    <link rel="prev" href="../../client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_A.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../../gitbook/style.css">


        
    <div class="book" data-level="2.6.4.2" data-basepath="../.." data-revision="1465797918048">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         iOS 开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="architecture_design/Introduction.html">
            
                
                    <a href="../../architecture_design/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         架构设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1.1" data-path="architecture_design/iOS/iOSArchitectureDesign.html">
            
                
                    <a href="../../architecture_design/iOS/iOSArchitectureDesign.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.1.</b>
                        
                         iOS总体架构设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.1.2" data-path="architecture_design/iOS/iOSLuaArchitectureDesign.html">
            
                
                    <a href="../../architecture_design/iOS/iOSLuaArchitectureDesign.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.2.</b>
                        
                         iOS Lua架构设计
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.1.3" data-path="architecture_design/iOS/iOSJSArchitectureDesign.html">
            
                
                    <a href="../../architecture_design/iOS/iOSJSArchitectureDesign.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.3.</b>
                        
                         iOS JS架构设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="setup_develop_env/iOSDevEnv.html">
            
                
                    <a href="../../setup_develop_env/iOSDevEnv.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         iOS开发环境搭建
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="client_dev/Introduction.html">
            
                
                    <a href="../../client_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         iOS开发入门
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.3.1" data-path="client_dev/iOSDevFoundation.html">
            
                
                    <a href="../../client_dev/iOSDevFoundation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.1.</b>
                        
                         iOS开发基础
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.2" data-path="hello_emp/client/CreateiOSApplication.html">
            
                
                    <a href="../../hello_emp/client/CreateiOSApplication.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.2.</b>
                        
                         创建iOS_Application
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3" data-path="client_dev/emp_config/ert/ios/README.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.</b>
                        
                         配置说明
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.3.3.1" data-path="client_dev/emp_config/ert/ios/ert_config.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/ert_config.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.1.</b>
                        
                         iOS配置说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.2" data-path="client_dev/emp_config/ert/ios/develop_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/develop_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.2.</b>
                        
                         开发模式配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.3" data-path="client_dev/emp_config/ert/ios/push_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/push_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.3.</b>
                        
                         推送配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.4" data-path="client_dev/emp_config/ert/ios/mdap_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/mdap_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.4.</b>
                        
                         统计分析配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.5" data-path="client_dev/emp_config/ert/ios/encrypt_config.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/encrypt_config.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.5.</b>
                        
                         加密库配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.6" data-path="client_dev/emp_config/ert/ios/other_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/other_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.6.</b>
                        
                         ====配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3.3.7" data-path="client_dev/emp_config/ert/ios/resource_instruction_for_app.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/resource_instruction_for_app.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.7.</b>
                        
                         DEMO-APP本地资源
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.4" data-path="deepin_client_dev/ios/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/ios/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                         iOS高级开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.4.1" data-path="deepin_client_dev/ios/iOS_Control_Extension.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Control_Extension.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.</b>
                        
                         IOS扩展UI控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.2" data-path="deepin_client_dev/ios/iOS_Lua_Extension.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Lua_Extension.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.2.</b>
                        
                         IOS扩展Lua接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.3" data-path="deepin_client_dev/ios/iOS_JS_Architecture.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_JS_Architecture.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.3.</b>
                        
                         IOS扩展JS接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.4" data-path="deepin_client_dev/ios/iOS_Control_Extension_5.2.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Control_Extension_5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.4.</b>
                        
                         IOS扩展UI控件_5.2
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.4.5" data-path="deepin_client_dev/ios/iOS_Lua_Extension_5.2.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Lua_Extension_5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.5.</b>
                        
                         IOS扩展Lua接口_5.2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.5" data-path="deepin_client_dev/ios/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/ios/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                         iOS功能说明
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.5.1" data-path="client_dev/emp_config/ert/ios/ios_statusBar.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/ios_statusBar.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.1.</b>
                        
                         iOS 状态栏
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.2" data-path="client_dev/emp_config/ert/ios/ios_adapter.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/ios_adapter.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.2.</b>
                        
                         iOS 适配说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.3" data-path="client_dev/emp_config/ert/ios/international.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/international.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.3.</b>
                        
                         iOS 国际化使用说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.4" data-path="client_dev/emp_config/ert/ios/resource_instruction_for_app.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/resource_instruction_for_app.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.4.</b>
                        
                         iOS App目录下本地资源说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.5" data-path="deepin_client_dev/ios/iOS_Offline.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.5.</b>
                        
                         IOS5.2离线文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.6" data-path="deepin_client_dev/ios/iOS_MDAP.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_MDAP.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.6.</b>
                        
                         IOS统计分析使用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.7" data-path="deepin_client_dev/ios/iOS_LuaQRCode.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_LuaQRCode.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.7.</b>
                        
                         IOS QRCode使用
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.8" data-path="client_dev/emp_config/ert/ios/ios_SDK.html">
            
                
                    <a href="../../client_dev/emp_config/ert/ios/ios_SDK.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.8.</b>
                        
                         iOS SDK定制说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.9" data-path="deepin_client_dev/ios/iOS_Exception_Catch.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_Exception_Catch.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.9.</b>
                        
                         iOS 异常捕获
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.5.10" data-path="deepin_client_dev/ios/iOS_OfflineExplain.html">
            
                
                    <a href="../../deepin_client_dev/ios/iOS_OfflineExplain.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.10.</b>
                        
                         iOS 离线资源使用及部分方法说明
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.6" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                         migrate
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.6.1" data-path="client_dev/migrate/EMP_x.xto5.x.html">
            
                
                    <a href="../../client_dev/migrate/EMP_x.xto5.x.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.1.</b>
                        
                         客户端升级改造to5.x
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.6.2" data-path="client_dev/migrate/EMP_iOS_5.1to5.2.html">
            
                
                    <a href="../../client_dev/migrate/EMP_iOS_5.1to5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.2.</b>
                        
                         iOS 5.1to5.2
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.6.3" data-path="client_dev/migrate/EMP_iOS_TwinEngine_3.2_5.2.html">
            
                
                    <a href="../../client_dev/migrate/EMP_iOS_TwinEngine_3.2_5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.3.</b>
                        
                         iOS EMP3.2和EMP5.2双引擎兼容改造方案
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="1.7" data-path="release_note/ios/Introduction.html">
            
                
                    <a href="../../release_note/ios/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                         Release Note
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.7.1" data-path="release_note/ios/Release_Note_5.3.41.html">
            
                
                    <a href="../../release_note/ios/Release_Note_5.3.41.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.1.</b>
                        
                         5.3.41
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7.2" data-path="release_note/ios/Release_Note_5.3.69.html">
            
                
                    <a href="../../release_note/ios/Release_Note_5.3.69.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.2.</b>
                        
                         5.3.69
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7.3" data-path="release_note/ios/Release_Note_5.3.71~5.3.83R.html">
            
                
                    <a href="../../release_note/ios/Release_Note_5.3.71~5.3.83R.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.3.</b>
                        
                         5.3.83R
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7.4" data-path="release_note/ios/Release_Note_5.3.84~5.3.134B.html">
            
                
                    <a href="../../release_note/ios/Release_Note_5.3.84~5.3.134B.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.4.</b>
                        
                         5.3.134B
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.7.5" data-path="release_note/ios/Release_Note_5.3.84~5.3.134B.html">
            
                
                    <a href="../../release_note/ios/Release_Note_5.3.84~5.3.134B.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.5.</b>
                        
                         5.4
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.7.5.1" data-path="release_note/ios/EMP_iOS_5.4/Release_Note_5.4.24B.html">
            
                
                    <a href="../../release_note/ios/EMP_iOS_5.4/Release_Note_5.4.24B.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.5.1.</b>
                        
                         5.4.24B
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Android 开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="architecture_design/Introduction.html">
            
                
                    <a href="../../architecture_design/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         架构设计
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1.1" data-path="architecture_design/android/Android_ArchitectureDesign.html">
            
                
                    <a href="../../architecture_design/android/Android_ArchitectureDesign.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                         Android架构设计
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="setup_develop_env/AndroidDevEnv.html">
            
                
                    <a href="../../setup_develop_env/AndroidDevEnv.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Android平台配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="client_dev/Introduction.html">
            
                
                    <a href="../../client_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Android开发入门
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.3.1" data-path="client_dev/AndroidDevFoundation.html">
            
                
                    <a href="../../client_dev/AndroidDevFoundation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.1.</b>
                        
                         Android开发基础
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3.2" data-path="hello_emp/client/CreateAndroidApplication.html">
            
                
                    <a href="../../hello_emp/client/CreateAndroidApplication.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.2.</b>
                        
                         创建Android_Application
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3.3" data-path="client_dev/emp_config/ert/android/README.html">
            
                
                    <a href="../../client_dev/emp_config/ert/android/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.3.</b>
                        
                         配置
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.3.3.1" data-path="client_dev/emp_config/ert/android/emp_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/android/emp_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.3.1.</b>
                        
                         EmpConfig
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3.3.2" data-path="client_dev/emp_config/ert/android/widget_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/android/widget_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.3.2.</b>
                        
                         WidgetConfig(废弃类)
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3.3.3" data-path="client_dev/emp_config/ert/android/control_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/android/control_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.3.3.</b>
                        
                         ControlConfig
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="deepin_client_dev/android/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/android/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         Android高级开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.4.1" data-path="deepin_client_dev/android/Android_Control_Extending_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Control_Extending_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.1.</b>
                        
                         Android EMP5.2扩展UI控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.2" data-path="deepin_client_dev/android/Android_Lua_Extending_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Lua_Extending_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.2.</b>
                        
                         Android EMP5.2扩展Lua接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.3" data-path="deepin_client_dev/android/Android_JS_Extending_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_JS_Extending_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.3.</b>
                        
                         Android EMP5.2扩展JS接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.4" data-path="deepin_client_dev/android/Android_Forward_Support_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Forward_Support_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.4.</b>
                        
                         Android EMP5.2对EMP5.1支持
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.5" data-path="deepin_client_dev/android/Android_Thread_Dev.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Thread_Dev.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.5.</b>
                        
                         Android EMP5.2线程分离改造开发说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.6" data-path="deepin_client_dev/android/Android_Keyboard_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Keyboard_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.6.</b>
                        
                         Android EMP5.3自定义键盘开发
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4.7" data-path="deepin_client_dev/android/Android_SM_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_SM_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.7.</b>
                        
                         Android EMP5.2国密使用说明兼开发记录
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="deepin_client_dev/android/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/android/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         Android高级功能使用
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.5.1" data-path="deepin_client_dev/android/Android_Offline_V1.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_V1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.1.</b>
                        
                         Android离线1版本使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.2" data-path="deepin_client_dev/android/Android_Offline_V2.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_V2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.2.</b>
                        
                         Android离线2版本使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.3" data-path="deepin_client_dev/android/Android_Offline_V3.0.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_V3.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.3.</b>
                        
                         Android离线3.0版本使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.4" data-path="deepin_client_dev/android/Android_Offline_V4.0.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_V4.0.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.4.</b>
                        
                         Android离线4.0版本使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.5" data-path="deepin_client_dev/android/Android_Offline_V4.0_websocket.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_V4.0_websocket.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.5.</b>
                        
                         Android离线4.0版本 - Websocket下载 - 使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.6" data-path="deepin_client_dev/android/Android_Offline_5.2To5.1.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Offline_5.2To5.1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.6.</b>
                        
                         Android EMP5.2离线模块移植到5.1的解决方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.7" data-path="deepin_client_dev/android/Android_MDAP.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_MDAP.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.7.</b>
                        
                         Android统计分析使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.8" data-path="deepin_client_dev/android/Android_EmpReader.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_EmpReader.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.8.</b>
                        
                         Android附件阅读使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.9" data-path="deepin_client_dev/android/Android_EmpQrcode.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_EmpQrcode.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.9.</b>
                        
                         Android二维码使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.10" data-path="deepin_client_dev/android/Android_EmpChart.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_EmpChart.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.10.</b>
                        
                         Android图表使用指南
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.11" data-path="deepin_client_dev/android/Android_International_Guide.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_International_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.11.</b>
                        
                         Android国际化使用说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.12" data-path="deepin_client_dev/android/Android_Exception.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Exception.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.12.</b>
                        
                         Android异常本地查看说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5.13" data-path="deepin_client_dev/android/Android_Map.html">
            
                
                    <a href="../../deepin_client_dev/android/Android_Map.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.13.</b>
                        
                         Android高德地图使用说明
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2.6" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                         migrate
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.6.1" data-path="client_dev/migrate/EMP_x.xto5.x.html">
            
                
                    <a href="../../client_dev/migrate/EMP_x.xto5.x.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.1.</b>
                        
                         客户端升级改造to5.x
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6.2" data-path="client_dev/migrate/EMP_Android_5.1to5.2.html">
            
                
                    <a href="../../client_dev/migrate/EMP_Android_5.1to5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.2.</b>
                        
                         Android 5.1to5.2
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6.3" data-path="client_dev/migrate/EMP_Android_TwinEngine_3.2&amp;5.2.html">
            
                
                    <a href="../../client_dev/migrate/EMP_Android_TwinEngine_3.2&amp;5.2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.3.</b>
                        
                         Android EMP3.2和EMP5.2双引擎兼容改造方案
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6.4" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.4.</b>
                        
                         Android EMP4.3和EMP5.2双引擎兼容改造方案
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.6.4.1" data-path="client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_A.html">
            
                
                    <a href="../../client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_A.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.4.1.</b>
                        
                         实现原理
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="2.6.4.2" data-path="client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_B.html">
            
                
                    <a href="../../client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_B.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.4.2.</b>
                        
                         改造方案
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2.7" data-path="release_note/android/Introduction.html">
            
                
                    <a href="../../release_note/android/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                         Release Note
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.7.1" data-path="release_note/android/Release_Note_Android_5.3.41.html">
            
                
                    <a href="../../release_note/android/Release_Note_Android_5.3.41.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.1.</b>
                        
                         5.3.41
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.7.2" data-path="release_note/android/Release_Note_Android_5.3.69.html">
            
                
                    <a href="../../release_note/android/Release_Note_Android_5.3.69.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.2.</b>
                        
                         5.3.41 ~ 5.3.69R
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.7.3" data-path="release_note/android/Release_Note_Android_5.3.83.html">
            
                
                    <a href="../../release_note/android/Release_Note_Android_5.3.83.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.3.</b>
                        
                         5.3.69R ~ 5.3.83R
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         WP 开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="setup_develop_env/WindowsPhoneDevEnv.html">
            
                
                    <a href="../../setup_develop_env/WindowsPhoneDevEnv.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Windows Phone开发环境配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="client_dev/Introduction.html">
            
                
                    <a href="../../client_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         WP开发入门
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.2.1" data-path="client_dev/WPDevFoundation.html">
            
                
                    <a href="../../client_dev/WPDevFoundation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.1.</b>
                        
                         WP开发基础
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2.2" data-path="hello_emp/client/CreateWPApplication.html">
            
                
                    <a href="../../hello_emp/client/CreateWPApplication.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.2.</b>
                        
                         创建WP_Application
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2.3" data-path="client_dev/emp_config/ert/wp/README.html">
            
                
                    <a href="../../client_dev/emp_config/ert/wp/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.</b>
                        
                         配置
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.2.3.1" data-path="client_dev/emp_config/ert/wp/develop_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/wp/develop_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.1.</b>
                        
                         开发模式配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2.3.2" data-path="client_dev/emp_config/ert/wp/push_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/wp/push_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.2.</b>
                        
                         推送配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2.3.3" data-path="client_dev/emp_config/ert/wp/mdap_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/wp/mdap_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.3.</b>
                        
                         统计分析配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2.3.4" data-path="client_dev/emp_config/ert/wp/other_conf.html">
            
                
                    <a href="../../client_dev/emp_config/ert/wp/other_conf.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.4.</b>
                        
                         ====配置
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="deepin_client_dev/WP/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/WP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                         WP高级开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.3.1" data-path="deepin_client_dev/WP/WP_Control_ExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_Control_ExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.1.</b>
                        
                         WindowsPhone扩展UI控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3.2" data-path="deepin_client_dev/WP/WP_LuaArchitectureAndExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_LuaArchitectureAndExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.2.</b>
                        
                         WindowsPhone扩展Lua接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3.3" data-path="deepin_client_dev/WP/WP_JS_ArchitectureAndExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_JS_ArchitectureAndExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.3.</b>
                        
                         WindowsPhone扩展JS接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3.4" data-path="deepin_client_dev/WP/WP_SM_Guide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_SM_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.4.</b>
                        
                         WindowsPhoneEMP5.2国密使用说明兼加密调整
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3.5" data-path="deepin_client_dev/WP/WP_Global.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_Global.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.5.</b>
                        
                         WindowsPhone国际化使用说明
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3.4" data-path="deepin_client_dev/WP/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/WP/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                         WP高级功能使用
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.4.1" data-path="deepin_client_dev/WP/WP_Offline.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_Offline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.1.</b>
                        
                         WindowsPhone5.2离线文档
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4.2" data-path="deepin_client_dev/WP/WP_MDAP.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_MDAP.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.2.</b>
                        
                         WindowsPhone5.2数据采集
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4.3" data-path="deepin_client_dev/WP/WP_Chart_ExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_Chart_ExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.3.</b>
                        
                         WindowsPhone图表扩展及使用说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4.4" data-path="deepin_client_dev/WP/WP_EmpReader.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_EmpReader.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.4.</b>
                        
                         WindowsPhone附件阅读使用说明
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4.5" data-path="deepin_client_dev/WP/WP_SDK_Custom_Guide.html">
            
                
                    <a href="../../deepin_client_dev/WP/WP_SDK_Custom_Guide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.5.</b>
                        
                         WindowsPhone 控件SDK定制及使用说明
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="section_README.html">
            
                
                    <a href="../../section_README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         QT 开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="setup_develop_env/QTDevEnv.html">
            
                
                    <a href="../../setup_develop_env/QTDevEnv.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         QT开发环境配置
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="client_dev/Introduction.html">
            
                
                    <a href="../../client_dev/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         QT开发入门
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.2.1" data-path="client_dev/QTDevFoundation.html">
            
                
                    <a href="../../client_dev/QTDevFoundation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.1.</b>
                        
                         QT开发基础
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2.2" data-path="hello_emp/client/CreateQTApplication.html">
            
                
                    <a href="../../hello_emp/client/CreateQTApplication.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.2.</b>
                        
                         创建QT_Application
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="deepin_client_dev/QT/Introduction.html">
            
                
                    <a href="../../deepin_client_dev/QT/Introduction.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         QT高级开发
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.3.1" data-path="deepin_client_dev/qt/QT_Control_ExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/qt/QT_Control_ExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.1.</b>
                        
                         QT扩展UI控件
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3.2" data-path="deepin_client_dev/qt/QT_Lua_FunctionAndExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/qt/QT_Lua_FunctionAndExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.2.</b>
                        
                         QT扩展Lua接口
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3.3" data-path="deepin_client_dev/qt/QT_JS_Bridge_ArchitectureAndExtendingGuide.html">
            
                
                    <a href="../../deepin_client_dev/qt/QT_JS_Bridge_ArchitectureAndExtendingGuide.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.3.</b>
                        
                         QT扩展JS接口
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    

    
    
    
    

    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown">下载</a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                
                <a href="/emp/ert_develop/ert_develop.zip" class="button">html</a>
                
                
                <a href="/emp/ert_develop/book.pdf" class="button">pdf</a>
                
                
            </div>
        </div>
    </div>

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >ERT开发</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_38">
                    
                        <h1 id="双引擎改造修改记录">双引擎改造修改记录</h1>
<h2 id="版本历史">1 版本历史</h2>
<table>
<thead>
<tr>
<th>版本号</th>
<th>日期</th>
<th>作者</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>V1.0</td>
<td>2015.6.30</td>
<td>李浩(li.hao85)</td>
<td>双引擎改造过程中的修改记录</td>
</tr>
</tbody>
</table>
<!-- toc -->  
<h2 id="防篡改流程修改">2 防篡改流程修改</h2>
<p>防篡改功能涉及到的so库为libAppVerify.so，加载此文件的语句为System.loadLibrary(&quot;AppVerify&quot;);这些与5.2框架是冲突的，因此需要进行修改。</p>
<p>修改方法类似于4.3框架到5.2框架的双引擎改造。</p>
<h2 id="信道改造">3 信道改造</h2>
<p>交行的话，不再使用旧的加密信道，直接用新的。</p>
<h2 id="开启新业务">4 开启新业务</h2>
<h3 id="增加新引擎activity">4.1 增加新引擎Activity</h3>
<p>新引擎的业务都是通过Lua脚本来执行的，因此首先要跳转到新引擎的Activity。这个新引擎的Activity内容如下：</p>
<pre><code>public class NewEngineActivity extends EMPActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onInitActivity() {
        // 隐藏系统标题栏
        requestWindowFeature(Window.FEATURE_NO_TITLE);
    }

    @Override
    public void onAdjustEMPConfig(EMPConfig empConfig) {
        empConfig.setPrintLog(Boolean.parseBoolean(Utils.getConfigStringFormAsset(this, &quot;isprintMessage&quot;)));
        empConfig.setUsePush(Boolean.parseBoolean(Utils.getConfigStringFormAsset(this, &quot;usePush&quot;)));
        empConfig.setTwowayAuthentication(
                Boolean.parseBoolean(Utils.getConfigStringFormAsset(this, &quot;two-way_authentication&quot;)));

        empConfig.setServerUri(Utils.SERVER_URI);
        empConfig.setServerUriNoPort(Utils.SERVER_URI_NO_PORT);

        empConfig.setOffstorePlatform(Utils.getConfigStringFormAsset(this, &quot;offstoreplatform&quot;));
        empConfig.setAppName(Utils.getConfigStringFormAsset(this, &quot;app&quot;));
        empConfig.setOPlatform(Utils.getConfigStringFormAsset(this, &quot;oPlatform&quot;));
        empConfig.setClientType(Utils.getConfigStringFormAsset(this, &quot;clientType&quot;));
        empConfig.setHsmclikey(Utils.getConfigStringFormAsset(this, &quot;hsmclikey&quot;));
        empConfig.setHsmcliEXPONENT(Utils.getConfigStringFormAsset(this, &quot;hsmcliEXPONENT&quot;));

        empConfig.mHttpException = Utils.getConfigStringFormAsset(this, &quot;httpError&quot;);
        empConfig.setBrHeight(Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;brHeight&quot;)));

        empConfig.setVerticalMarginOfB(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalMarginOfB&quot;)));
        empConfig.setHorizontalMarginOfB(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalMarginOfB&quot;)));
        empConfig.setVerticalGapOfB(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalGapOfB&quot;)));
        empConfig.setHorizontalGapOfB(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalGapOfB&quot;)));
        empConfig.setVerticalMarginOfF(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalMarginOfF&quot;)));
        empConfig.setHorizontalMarginOfF(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalMarginOfF&quot;)));
        empConfig.setVerticalGapOfF(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalGapOfF&quot;)));
        empConfig.setHorizontalGapOfF(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalGapOfF&quot;)));
        empConfig.setVerticalMarginOfD(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalMarginOfD&quot;)));
        empConfig.setHorizontalMarginOfD(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalMarginOfD&quot;)));
        empConfig.setVerticalGapOfD(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalGapOfD&quot;)));
        empConfig.setHorizontalGapOfD(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalGapOfD&quot;)));
        empConfig.setVerticalMarginOfT(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalMarginOfT&quot;)));
        empConfig.setHorizontalMarginOfT(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalMarginOfT&quot;)));
        empConfig.setVerticalGapOfT(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;verticalGapOfT&quot;)));
        empConfig.setHorizontalGapOfT(
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;horizontalGapOfT&quot;)));

        int benchmarkresolutionW = 
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;BenchmarkresolutionW&quot;));
        int benchmarkresolutionH = 
                Integer.parseInt(Utils.getConfigStringFormAsset(this, &quot;BenchmarkresolutionH&quot;));
        empConfig.setBasicScreen(new Rect(0, 0, benchmarkresolutionW, benchmarkresolutionH));

        empConfig.setAlertPrompt(true);
        empConfig.setUpdateOfflineRes(true);
        empConfig.setDevelopmentMode(false);
        empConfig.setOfflinePromptOn(true);
        empConfig.setTrack(false);
        empConfig.setTlsVersion(1.3f);
        empConfig.setOfflineVersion(1);
    }

    @Override
    public void onLoadStartPage(EMPRender empRender) {
        // 加载assets下页面
        empRender.loadLocalFile(&quot;assets:main.xml&quot;);
    }
}
</code></pre><p>记得提供对应的main.xml文件。</p>
<h3 id="配置启动页">4.2 配置启动页</h3>
<p>相应的主配置文件中此Acitivity的配置如下：</p>
<pre><code>        &lt;activity
            android:name=&quot;.twoengine.NewEngineActivity&quot;
            android:alwaysRetainTaskState=&quot;true&quot;
            android:configChanges=&quot;orientation|keyboardHidden&quot;
            android:launchMode=&quot;singleTask&quot;
            android:screenOrientation=&quot;portrait&quot;
            android:windowSoftInputMode=&quot;adjustPan&quot; &gt;
        &lt;/activity&gt;
</code></pre><p>在SplashScreenActivity类的goMainHome方法中，将跳转的Activity切换到新引擎的Activity上：</p>
<pre><code>    /**
     * 进入首页
     */
    public void goMainHome() {
        Intent it = new Intent();
        Intent myIntent = getIntent();
        int id = 0;
        if(myIntent.hasExtra(&quot;moodimg&quot;)){
            id = myIntent.getExtras().getInt(&quot;moodimg&quot;);
            if(id != 0){
                List&lt;Activity&gt; mActivityList = BankcommApplication.getInstance().activityList;
                if(mActivityList.size() &gt; 1){
                    Activity act = mActivityList.get(mActivityList.size() - 1);
                    if(act instanceof SplashScreenActivity){
                        ConfigManager.goPush = true;//如果当前页是splash，但是mActivityList的个size大于1，说明这个应用已经启动了，只要finish当前个splash界面就可以了
                    }
                }
                if(ConfigManager.goPush){
                    finish();
                    return;
                }
                it.putExtra(&quot;moodimg&quot;, id);
            }
        }
        it.setClass(this, NewEngineActivity.class);
        startActivity(it);
        finish();
    }
</code></pre><p>注：这个NewEngineActivity类启动后会一直存在，只有当退出程序的时候才会被销毁。</p>
<h3 id="防重放参数修改">4.3 防重放参数修改</h3>
<p>目前交行客户端一进入后就调到新引擎的Activity，不再使用原来的防重放方法了。</p>
<h2 id="扩展lua接口">5 扩展Lua接口</h2>
<ul>
<li>5.0 -&gt; 5.2框架的业务，使用新的Lua接口即可。</li>
<li>5.2 -&gt; 5.0执行老业务的时候，需要扩展Lua接口，调用老的引擎进行业务展示。</li>
</ul>
<h3 id="使用两个lua状态机">5.1 使用两个Lua状态机</h3>
<p>新框架的Lua状态机由新框架管理，老框架的Lua状态机在初始化后，需要找个地方存一下，方便调用。</p>
<p>其实不论Lua语句想要执行哪种框架的Lua代码，入口都是新框架，因此双引擎改造的时候，老框架的Lua状态机看起来像是“被新框架调用”。</p>
<p>老的Lua状态机初始化于EMPView的onCreate方法中：</p>
<p>考察initLuaScript：</p>
<pre><code>    /**
     * 初始化lua脚本，将脚本中对应的window、screen或者document节点映射到相应的对象
     */
    public static void initLuaScript() {
        LuaLib lualib_ = new LuaLib();
    }
</code></pre><p>其实就是new一下即可。双引擎改造的时候，用一下这个构造方法即可。</p>
<p>以下创建新老两个Lua状态机对应的Lua接口，用于在新老两个Lua状态机之间切换：</p>
<pre><code>public class OldLuaEngine {

    /** 新框架的Lua状态机。 */
    private EMPLua mEMPLua = null;

    /**
     * 初始化OldLuaEngine库。
     * @param empLua 新的Lua状态机。
     */
    public OldLuaEngine(EMPLua empLua){
        mEMPLua = empLua;
        try {
            Component.LUASTATE.pushObjectValue(this);
            Component.LUASTATE.setGlobal(&quot;luaoldLuaEngine&quot;);

            String luahead = &quot;oldLuaEngine = {};&quot;;
            String luafc1 = &quot;function oldLuaEngine:loadPageWithNewEngine(luaContent) luaoldLuaEngine:loadPageWithNewEngine(luaContent); end;&quot;;

            Component.LUASTATE.gc(LuaState.LUA_GCCOLLECT, 0);
            Component.LUASTATE.LdoString(luahead.concat(luafc1));
        } catch (Exception e) {
            Utils.printException(e);
        }
    }

    /**
     * 使用新的Lua引擎执行Lua脚本。&lt;br /&gt;
     * &lt;b&gt;注：这是一个Lua接口。&lt;/b&gt;
     * @param luaContent 一段Lua脚本。
     */
    public void loadPageWithNewEngine(String luaContent){
        mEMPLua.loadString(luaContent);
    }
}
</code></pre><pre><code>public class NewLuaEngine {

    /**
     * 使用老的Lua引擎执行Lua脚本。
     * @param luaContent 一段Lua脚本。
     */
    public void loadPageWithOldEngine(String luaContent){
        if (!Utils.isEmpty(luaContent)) {
            Component.LUASTATE.LdoString(luaContent);
        }
    }
}
</code></pre><p>老框架需要初始化一些数据，当使用旧的Lua引擎解析报文的时候，解析样式、脚本、生成控件的时候要用到。以上包括老引擎相关数据的初始化、新旧两个引擎对应的Lua接口的初始化都放在NewEngineActivity类的onAddLua方法中：</p>
<pre><code>    @Override
    public void onAddLua(EMPLua empLua) {
        /* 初始化老框架需要的数据。 */
        initOldEngineData(empLua);
        /* 增加新的Lua接口。 */
        empLua.addJavaInterface(&quot;newLuaEngine&quot;, new NewLuaEngine()); // 添加新的Lua引擎管理接口。
    }
</code></pre><pre><code>    /**
     * 初始化老框架需要的数据。
     * @param empLua 新框架的Lua状态机。
     */
    private void initOldEngineData(EMPLua empLua){
        // 记录当前的Activity。
        ConfigManager.currentView_ = this;
        // 读老框架的控件。
        try {
            String widgetString = Utils.getStringFormAsset(this, &quot;widget.xml&quot;);
            ParseWidgets pw = new ParseWidgets();
            android.util.Xml.parse(widgetString, pw);
        } catch (SAXException e) {
            Utils.printException(e);
        }
        // 初始化老框架的Lua库。
        new LuaLib();
        new OldLuaEngine(empLua); // 用于老Lua引擎跳转到新Lua引擎的函数库也在这里加载。
    }
</code></pre><p>测试：</p>
<pre><code>            -- 测试新老两个Lua引擎：
            local oldLuaContent = [[
                function oldFunction()
                    oldLuaEngine:loadPageWithNewEngine(&quot;window:alert(&#39;老Lua引擎调用新Lua引擎的弹框。&#39;);&quot;);
                end
                window:alert(&#39;新Lua引擎调用老Lua引擎的弹框。&#39;, &#39;Confirm&#39;, oldFunction);
            ]];
            newLuaEngine:loadPageWithOldEngine(oldLuaContent);
</code></pre><h2 id="扩展back键功能">6 扩展back键功能</h2>
<p>由于新旧两个引擎解析的页面在加载的时候有可能是穿插着进行加载的，因此额外需要一个变量来记录新旧引擎页面加载的顺序：</p>
<pre><code>public class PageOrder {

    /** 页面类型：来自哪个引擎。 */
    public enum PageType{
        /** 页面是由旧引擎渲染出来的。 */
        OLD,
        /** 页面是由新引擎渲染出来的。 */
        NEW
    };

    /** 存储页面类型的一个列表。 */
    private static Vector&lt;PageType&gt; pageTypeVector = new Vector&lt;PageType&gt;();

    /**
     * 记录一个页面类型。
     * @param pageType 页面类型。
     */
    public static void add(PageType pageType){
        pageTypeVector.add(pageType);
    }

    /**
     * 拿出栈顶元素，但不将此元素弹出栈。
     * @return 栈顶页面。
     */
    public static PageType peek(){
        if (pageTypeVector.size() &gt; 0) {
            return pageTypeVector.lastElement();
        }
        return null;
    }

    /**
     * 拿出栈顶元素，并将这个元素弹出栈。
     * @return 栈顶页面。
     */
    public static PageType pop(){
        int count = pageTypeVector.size();
        if (count &gt; 0) {
            PageType pageType = pageTypeVector.lastElement();
            pageTypeVector.removeElementAt(count - 1);
            return pageType;
        }
        return null;
    }

    /**
     * 获得历史栈的长度。
     * @return 历史栈的长度。
     */
    public static int length(){
        return pageTypeVector.size();
    }

    /**
     * 清空页面类型栈。&lt;br /&gt;
     * 注：这里仅清空了页面类型栈，新老引擎各自的页面栈并没有被清空。
     */
    public static void clear(){
        pageTypeVector.clear();
    }

    /**
     * 显示页面类型的加载顺序。
     * @return 页面类型的加载顺序。
     */
    public static String showOrder(){
        return pageTypeVector.toString();
    }
}
</code></pre><p>提供两个接口，分别给新老引擎使用，用于对history库进行扩展：</p>
<pre><code>public class OldHistory {

    /** 新框架的渲染实例。 */
    private EMPRender mEMPRender = null;

    /**
     * 初始化OldHistory库。
     * @param emplua 新的Lua状态机。
     */
    public OldHistory(EMPRender empRender){
        mEMPRender = empRender;
        try {
            Component.LUASTATE.pushObjectValue(this);
            Component.LUASTATE.setGlobal(&quot;luaoldhistory&quot;);

            final String luahead = &quot;oldhistory = {}; &quot;;
            final String luafc1 = &quot;function oldhistory:add(content) luaoldhistory:add(content); end;&quot;;
            final String luafc2 = &quot;function oldhistory:get(index) local a1 = luaoldhistory:get(index); return a1; end;&quot;;
            final String luafc3 = &quot;function oldhistory:length() local a1 = luaoldhistory:length(); return a1; end;&quot;;
            final String luafc4 = &quot;function oldhistory:clear(...)&quot;
                    + &quot; if arg.n == 1 then luaoldhistory:clear(arg[1]);&quot;
                    + &quot; elseif arg.n == 0 then luaoldhistory:clear(); end;&quot;
                    + &quot; end;&quot;;

            Component.LUASTATE.gc(LuaState.LUA_GCCOLLECT, 0);
            Component.LUASTATE.LdoString(luahead.concat(luafc1).concat(luafc2).concat(luafc3).concat(luafc4));
        } catch (Exception e) {
            Utils.printException(e);
        }
    }

    /**
     * 将报文压入历史栈中。
     * @param content 报文。
     */
    @SuppressWarnings({ &quot;rawtypes&quot;, &quot;unchecked&quot; })
    public void add(String content){
        if (null == Component.ACTIONV) {
            Component.ACTIONV = new Stack();
        }
        if (content != null) {
            int lastIndex = content.lastIndexOf(&quot;&lt;/body&gt;&quot;);
            if (lastIndex == -1) {
                return;
            }
            Component.ACTIONV.add(content);
            /* 这个方法中粘贴了老引擎的add全过程，是因为老引擎对不含body的页面有特殊处理。 */
            PageOrder.add(PageType.OLD); // 记录压栈页面的类型：旧引擎页面。
        }
    }

    /**
     * 从栈中拿出指定序号代表的页面。
     * @param index 指定序号。
     * @return 目标页面。
     */
    public String get(int index){
        if (index &lt; 0) { // 参数小于零。从栈顶前端移除index个元素。
            int moveCount = Math.abs(index);
            int moveIndex = 0;
            for (; moveIndex &lt; moveCount; moveIndex++) {
                if (PageOrder.length() &gt; 1) {
                    removePage();
                } else {
                    return &quot;&quot;;
                }
            }
        } else if (index &gt; 0) { // 参数大于零。弹出指定页码到栈顶的所有页面。
            int totalCount = PageOrder.length();
            int moveIndex = 0;
            for (; totalCount &gt; moveIndex; totalCount--) {
                removePage();
            }
        }
        PageType targetPageType = PageOrder.peek(); // 最终演变为get(0)的情况。
        switch (targetPageType) {
        case OLD:{
            int count = Component.ACTIONV.size();
            return count &gt; 0 ? (String) Component.ACTIONV.get(count - 1) : &quot;&quot;;
        }
        case NEW:{
            return mEMPRender.mCache.isEmpty() ? &quot;&quot; : mEMPRender.mCache.peek();
        }
        default:
            break;
        }
        return &quot;&quot;;
    }

    /**
     * 获得历史栈的长度。
     * @return 历史栈的长度。
     */
    public int length(){
        return PageOrder.length();
    }

    /**
     * 清空历史栈。
     */
    public void clear(){
        /* 清除旧引擎的页面历史。 */
        if (Component.ACTIONV != null &amp;&amp; !Component.ACTIONV.isEmpty()) {
            Component.ACTIONV.clear();
        }
        /* 清除新引擎的页面历史。 */
        mEMPRender.mCache.clear();
        /* 清除页面类型栈。 */
        PageOrder.clear();
    }

    /**
     * 清除历史栈中指定数量的页面。
     * @param index 指定清除栈中页面的数量。
     */
    public void clear(int index){
        int pageCount = PageOrder.length();
        if (index &lt;= 0 || index &gt; pageCount) {
            clear();
        } else {
            int moveIndex = 0;
            for (; moveIndex &lt; index; moveIndex++) {
                if (PageOrder.length() &gt; 1) {
                    removePage();
                }
            }
        }
    }

    /**
     * 显示新老引擎页面加载的顺序。
     * @return 新老引擎页面加载的顺序。
     */
    public String showOrder(){
        return PageOrder.showOrder();
    }

    /**
     * 移除一个页面类型记录，并移除一个历史页面，这个页面有可能是新引擎加载的，也有可能是旧引擎加载的。
     */
    private void removePage(){
        PageType pageType = PageOrder.pop(); // 拿到要移除的页面的类型，并移除类型记录。
        switch (pageType) {
        case OLD:{
            /* 此处直接用老引擎的Lua状态机执行Lua语句，是因为老的get方法中有退出Activity的操作。 */
            Component.LUASTATE.LdoString(&quot;history:get(-1);&quot;); // 此处仅仅是pop操作，不必用变量接收。
        }
            break;
        case NEW:{
            if (mEMPRender.mCache.size() &gt; 1) {
                mEMPRender.mCache.pop();
            }
        }
            break;
        default:
            break;
        }
    }
}
</code></pre><pre><code>public class NewHistory {

    /** 新引擎的渲染实例。 */
    private EMPRender mEMPRender = null;

    public NewHistory(EMPRender empRender){
        mEMPRender = empRender;
    }

    /**
     * 将报文压入历史栈中。
     * @param content 报文。
     */
    public void add(String content){
        if (Utils.isEmpty(content)) {
            return;
        }
        mEMPRender.mCache.add(content);
        PageOrder.add(PageType.NEW); // 记录此页面的类型：由新引擎加载而来。
    }

    /**
     * 从栈中拿出指定序号代表的页面。
     * @param index 指定序号。
     * @return 目标页面。
     */
    public String get(int index){
        if (index &lt; 0) { // 参数小于零。从栈顶前端移除index个元素。
            int moveCount = Math.abs(index);
            int moveIndex = 0;
            for (; moveIndex &lt; moveCount; moveIndex++) {
                if (PageOrder.length() &gt; 1) {
                    removePage();
                } else {
                    return null;
                }
            }
        } else if (index &gt; 0) { // 参数大于零。弹出指定页码到栈顶的所有页面。
            int totalCount = PageOrder.length();
            int moveIndex = 0;
            for (; totalCount &gt; moveIndex; totalCount--) {
                removePage();
            }
        }
        PageType targetPageType = PageOrder.peek(); // 最终演变为get(0)的情况。
        switch (targetPageType) {
        case OLD:{
            int count = Component.ACTIONV.size();
            return count &gt; 0 ? (String) Component.ACTIONV.get(count - 1) : null;
        }
        case NEW:{
            return mEMPRender.mCache.isEmpty() ? null : mEMPRender.mCache.peek();
        }
        default:
            break;
        }
        return null;
    }

    /**
     * 获得历史栈的长度。
     * @return 历史栈的长度。
     */
    public int length(){
        return PageOrder.length();
    }

    /**
     * 清空历史栈。
     */
    public void clear(){
        /* 清除新引擎的页面历史。 */
        mEMPRender.mCache.clear();
        /* 清除旧引擎的页面历史。 */
        if (Component.ACTIONV != null &amp;&amp; !Component.ACTIONV.isEmpty()) {
            Component.ACTIONV.clear();
        }
        /* 清除页面类型栈。 */
        PageOrder.clear();
    }

    /**
     * 清除历史栈中指定数量的页面。
     * @param index 指定清除栈中页面的数量。
     */
    public void clear(int index){
        int pageCount = PageOrder.length();
        if (index &lt;= 0 || index &gt; pageCount) {
            clear();
        } else {
            int moveIndex = 0;
            for (; moveIndex &lt; index; moveIndex++) {
                if (PageOrder.length() &gt; 1) {
                    removePage();
                }
            }
        }
    }

    /**
     * 显示新老引擎页面加载的顺序。
     * @return 新老引擎页面加载的顺序。
     */
    public String showOrder(){
        return PageOrder.showOrder();
    }

    /**
     * 移除一个页面类型记录，并移除一个历史页面，这个页面有可能是新引擎加载的，也有可能是旧引擎加载的。
     */
    private void removePage(){
        PageType pageType = PageOrder.pop(); // 拿到要移除的页面的类型，并移除类型记录。
        switch (pageType) {
        case OLD:{
            /* 此处直接用老引擎的Lua状态机执行Lua语句，是因为老的get方法中有退出Activity的操作。 */
            Component.LUASTATE.LdoString(&quot;history:get(-1);&quot;); // 此处仅仅是pop操作，不必用变量接收。
        }
            break;
        case NEW:{
            if (mEMPRender.mCache.size() &gt; 1) {
                mEMPRender.mCache.pop();
            }
        }
            break;
        default:
            break;
        }
    }
}
</code></pre><p>在NewEngineActivity中对这两个库进行了注册：</p>
<pre><code>empLua.addJavaInterface(&quot;newhistory&quot;, new NewHistory(empLua.getEMPRender())); // 添加新的扩展历史库。

new OldHistory(empLua.getEMPRender()); // 给老引擎用的扩展历史库。
</code></pre><p>测试报文：</p>
<pre><code>-- 测试历史栈：

-- add方法测试:
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old1&lt;/body&gt;&#39;);&quot;);
newhistory:add(&quot;new1&quot;);
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old2&lt;/body&gt;&#39;);&quot;);
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old3&lt;/body&gt;&#39;);&quot;);
newhistory:add(&quot;new2&quot;);
newhistory:add(&quot;new3&quot;);
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old4&lt;/body&gt;&#39;);&quot;);
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old5&lt;/body&gt;&#39;);&quot;);
newhistory:add(&quot;new4&quot;);
newhistory:add(&quot;new5&quot;);
newhistory:add(&quot;new6&quot;);
newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:add(&#39;old6&lt;/body&gt;&#39;);&quot;);
newhistory:add(&quot;new7&quot;);

-- 页面类型加载顺序测试：
-- window:alert(newhistory:showOrder());
-- newLuaEngine:loadPageWithOldEngine(&quot;window:alert(oldhistory:showOrder());&quot;);

-- clear全部页面的方法测试：
-- newhistory:clear(); -- 之后各种页面数量统计值都为0。
            -- newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:clear();&quot;); -- 之后各种页面数量统计值都为0。

-- clear部分页面的方法测试：clear之后页面总量变为8。
-- newhistory:clear(5); -- pop了一个old页面、4个new页面。之后old页面总量为5，new页面总量为3。
-- newLuaEngine:loadPageWithOldEngine(&quot;oldhistory:clear(5);&quot;); -- pop了一个old页面、4个new页面。之后old页面总量为5，new页面总量为3。

-- length方法测试:
-- window:alert(&quot;新引擎页面数量：&quot; .. tostring(history:length())); -- 7
-- newLuaEngine:loadPageWithOldEngine(&quot;window:alert(&#39;老引擎页面数量：&#39; .. tostring(history:length()));&quot;); -- 6
-- window:alert(&quot;总共页面数量(use newhistory)：&quot; .. tostring(newhistory:length())); -- 13
-- newLuaEngine:loadPageWithOldEngine(&quot;window:alert(&#39;总共页面数量(use oldhistory)：&#39; .. tostring(oldhistory:length()))&quot;); -- 13

-- get方法测试：
-- window:alert(newhistory:get(-5)); -- old5&lt;/body&gt;
newLuaEngine:loadPageWithOldEngine(&quot;window:alert(oldhistory:get(-5));&quot;); -- old5&lt;/body&gt;
</code></pre><p>以上是使用Lua脚本进行的页面跳转，对于物理back键的设置，请使用新的newhistory库中的get方法(老引擎请使用oldhistory库中的get方法)。</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../client_dev/migrate/EMP_Android_TwinEngine_4.3&amp;5.2_A.html" class="navigation navigation-prev " aria-label="Previous page: 实现原理"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../release_note/android/Introduction.html" class="navigation navigation-next " aria-label="Next page: Release Note"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
